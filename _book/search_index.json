[["index.html", "Housing prices Copenhagen Prerequisites Create data and results folders Ggplot themes Download data from kortforsyningen R session 0.1 House characteristics 0.2 Location characteristics 0.3 Neighbourhood characteristics", " Housing prices Copenhagen Javier Elío, Henning S. Hansen, Carsten Keßler 2021-04-13 Prerequisites The data have been analysed with R (version 4.0.4) and Rstudio (version 1.4.1106), and the book has been created with bookdown package. The required packages are automatically checked and installed if needed from CRAN. # Create an auxiliary function for checking if a package is installed, # install it if it is not, and load the package # (based on https://gist.github.com/stevenworthington/3178163) ipak &lt;- function(pkg){ new_pkg &lt;- pkg[!(pkg %in% installed.packages()[, &quot;Package&quot;])] if (length(new_pkg)) install.packages(new_pkg, dependencies = TRUE, repos = &quot;http://cran.us.r-project.org&quot;) sapply(pkg, require, character.only = TRUE) } # List of packages pkg &lt;- c( &quot;bit64&quot;, &quot;bookdown&quot;, &quot;data.table&quot;, &quot;danstat&quot;, &quot;forcats&quot;, &quot;furrr&quot;, &quot;ggspatial&quot;, &quot;giscoR&quot;, &quot;janitor&quot;, &quot;kableExtra&quot;, &quot;knitr&quot;, &quot;latex2exp&quot;, &quot;osmdata&quot;, &quot;patchwork&quot;, &quot;potential&quot;, &quot;rmarkdown&quot;, &quot;remotes&quot;, &quot;RColorBrewer&quot;, &quot;sf&quot;, &quot;stringr&quot;, &quot;SnowballC&quot;, &quot;units&quot;, &quot;tidyverse&quot;, &quot;tidytext&quot;, &quot;tm&quot;, &quot;tools&quot;) # Check and install ipak(pkg) Create data and results folders Save important data and results in their respective folders dir.create(&quot;data&quot;) dir.create(&quot;results&quot;) Ggplot themes Create our own theme for plotting maps in ggplot2. my_theme_map &lt;- function() { theme_void() + theme( # Title and captions plot.title = element_text(size = 14, colour = &quot;darkblue&quot;, face = &quot;bold&quot;), plot.caption = element_text(size = 10, colour = &quot;grey25&quot;), # Legend legend.title = element_text(size = 10, face = &quot;bold&quot;), legend.text = element_text(size = 10), # Facets strip.text = element_text(size = 12, color = &quot;black&quot;, face = &quot;italic&quot;) ) } Download data from kortforsyningen We have create our own package for downloading the data to a local repository (i.e. dangeo. Although the data are free, we need to create a username and a password for getting access to kortforsyningen. By default dangeo looks for credentials on .Renviron (kortforsyningen_id = username and kortforsyningen_pwd = password). We also need to define the local directory where the data are downloaded (i.e. dangeo_set_param()). The first time we download a file it may be time consuming; however, a file will not be downloaded if it is already in the local directory. # Install package from GitHub if (!require(&quot;dangeo&quot;)) remotes::install_github(&quot;javiereliomedina/dangeo&quot;) library(dangeo) # Set username and password # usethis::edit_r_environ() # Open .Renviron file, and save the username (kortforsyningen_id = &quot;username&quot;) and password (kortforsyningen_pwd = &quot;password&quot;) # Set local repository dangeo_set_param() # loc_dir # Check path to local repository CORINE dangeo_get_data(ftp_folder = &quot;CORINE&quot;, zip_name = &quot;DK_CORINE_SHP_UTM32-WGS84.zip&quot;) DAGI (scale 1:10000) dangeo_get_data(ftp_folder = &quot;landinddelinger/dagi/SHAPE&quot;, zip_name = &quot;DAGIREF_SHAPE_UTM32-EUREF89.zip&quot;) Inspire_railway-transport-network dangeo_get_data( ftp_folder = &quot;grundlaeggende_landkortdata/inspire_railway-transport-network&quot;, zip_name = &quot;DK_RailwayTransportNetwork_GML_UTM32-EUREF89.zip&quot;) GeoDanmark dangeo_get_data(ftp_folder = &quot;grundlaeggende_landkortdata/fot/SHAPE&quot;, zip_name = &quot;DK_SHAPE_UTM32-EUREF89.zip&quot;) R session # R version 4.0.4 (2021-02-15) # Platform: x86_64-w64-mingw32/x64 (64-bit) # Running under: Windows 10 x64 (build 17763) # # Matrix products: default # # locale: # [1] LC_COLLATE=English_United Kingdom.1252 LC_CTYPE=English_United Kingdom.1252 # [3] LC_MONETARY=English_United Kingdom.1252 LC_NUMERIC=C # [5] LC_TIME=English_United Kingdom.1252 # # attached base packages: # [1] tools stats graphics grDevices utils datasets methods base # # other attached packages: # [1] dangeo_0.0.0.9000 tm_0.7-8 NLP_0.2-1 tidytext_0.3.0 dplyr_1.0.5 purrr_0.3.4 # [7] readr_1.4.0 tidyr_1.1.3 tibble_3.1.0 ggplot2_3.3.3 tidyverse_1.3.0 units_0.7-1 # [13] SnowballC_0.7.0 stringr_1.4.0 sf_0.9-8 RColorBrewer_1.1-2 remotes_2.2.0 rmarkdown_2.7 # [19] potential_0.1.0 patchwork_1.1.1 osmdata_0.1.5 latex2exp_0.5.0 knitr_1.31 kableExtra_1.3.4 # [25] janitor_2.1.0 giscoR_0.2.2 ggspatial_1.1.5 furrr_0.2.2 future_1.21.0 forcats_0.5.1 # [31] danstat_0.1.0 data.table_1.14.0 bookdown_0.21 bit64_4.0.5 bit_4.0.4 # # loaded via a namespace (and not attached): # [1] leafem_0.1.3 colorspace_2.0-0 ellipsis_0.3.1 class_7.3-18 leaflet_2.0.4.1 snakecase_0.11.0 # [7] satellite_1.0.2 fs_1.5.0 base64enc_0.1-3 rstudioapi_0.13 proxy_0.4-25 listenv_0.8.0 # [13] fansi_0.4.2 lubridate_1.7.9.2 xml2_1.3.2 codetools_0.2-18 jsonlite_1.7.2 broom_0.7.5 # [19] servr_0.21 dbplyr_2.1.0 png_0.1-7 compiler_4.0.4 httr_1.4.2 backports_1.2.1 # [25] mapview_2.9.0 Matrix_1.3-2 assertthat_0.2.1 cli_2.3.1 later_1.1.0.1 htmltools_0.5.1.1 # [31] gtable_0.3.0 glue_1.4.2 rappdirs_0.3.3 Rcpp_1.0.6 slam_0.1-48 cellranger_1.1.0 # [37] jquerylib_0.1.3 raster_3.4-5 vctrs_0.3.6 svglite_2.0.0 crosstalk_1.1.1 xfun_0.22 # [43] globals_0.14.0 rvest_1.0.0 mime_0.10 lifecycle_1.0.0 scales_1.1.1 hms_1.0.0 # [49] promises_1.2.0.1 parallel_4.0.4 yaml_2.2.1 curl_4.3 sass_0.3.1 stringi_1.5.3 # [55] tokenizers_0.2.1 e1071_1.7-6 rlang_0.4.10 pkgconfig_2.0.3 systemfonts_1.0.1 evaluate_0.14 # [61] lattice_0.20-41 htmlwidgets_1.5.3 tidyselect_1.1.0 parallelly_1.24.0 magrittr_2.0.1 R6_2.5.0 # [67] generics_0.1.0 DBI_1.1.1 withr_2.4.1 pillar_1.5.1 haven_2.3.1 sp_1.4-5 # [73] janeaustenr_0.1.5 modelr_0.1.8 crayon_1.4.1 KernSmooth_2.23-18 utf8_1.2.1 readxl_1.3.1 # [79] grid_4.0.4 isoband_0.2.4 reprex_1.0.0 digest_0.6.27 classInt_0.4-3 webshot_0.5.2 # [85] httpuv_1.5.5 stats4_4.0.4 munsell_0.5.0 viridisLite_0.3.0 bslib_0.2.4 0.1 House characteristics 0.2 Location characteristics 0.3 Neighbourhood characteristics "]]
