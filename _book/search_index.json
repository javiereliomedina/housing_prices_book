[["residential-units-saled-as-free-scale.html", "Chapter 8 Residential units saled as free scale 8.1 Housing prices 8.2 Residential units by floor level", " Chapter 8 Residential units saled as free scale We focused our study in residential dwellings on the ordinary free trade (Table ??). There are large differences in the number of residential units between years, why?? Study only one year for the moment (e.g. 2019)?? 8.1 Housing prices We adjusted the housing prices for taking into account the inflation and, therefore, be able to compared them between years (Valtersdorf Møller (2020)). The indexes have been obtained from Statistic Denmark; i.e. table EJ66: Price index for sales property (2006=100) by region, category of real property and unit, and targeted for the study area (i.e. Province Byen København). \\[ Pice_{2019} = Price_{i} \\cdot \\frac{Index_{2019}}{Index_{i}}\\] Index: # DST table (EJ66: Price index for sales property (2006=100) by region, category of real property and unit) id_table &lt;- &quot;EJ66&quot; dat_meta &lt;- get_table_metadata(table_id = id_table, variables_only = TRUE) # Values to retrieve variables &lt;- list( # Province Byen København: region = 01 list(code = &quot;OMRÅDE&quot;, values = &quot;01&quot;), # Category of real property list(code = &quot;EJENDOMSKATE&quot;, values = c(&quot;0111&quot;, &quot;2103&quot;)), # Index list(code = &quot;TAL&quot;, values = 100), # From 2004 to 2019 list(code = &quot;Tid&quot;, values = seq(2004, 2019, 1)) ) # Get index price_index &lt;- get_data(&quot;EJ66&quot;, variables) %&gt;% # Translate into English rename(region = OMRÅDE, category = EJENDOMSKATE, unit = TAL, date = TID, value = INDHOLD) # Print table price_index %&gt;% # Wide format pivot_wider(names_from = date, values_from = value) %&gt;% select(-region, -unit) %&gt;% kbl(caption = &quot;Price index for sale properties in Copenhagen City&quot;) %&gt;% kable_paper() %&gt;% scroll_box(width = &quot;100%&quot;) Table 8.1: Price index for sale properties in Copenhagen City category 2004 2005 2006 2007 2008 2009 2010 2011 2012 2013 2014 2015 2016 2017 2018 2019 One-family houses 609 794 1000 961 897 747 809 815 795 857 933 1015 1094 1154 1226 1254 Owner-occupied flats, total 602 794 1000 918 822 712 777 791 806 894 992 1115 1218 1315 1388 1384 8.2 Residential units by floor level KL - basement ST - ground floor 1 - 1st floor 2 - 2nd floor 3 - 3rd floor 4 - 4th floor 5 or more = etc. res_units_oft %&gt;% group_by(floor_level, type) %&gt;% summarise(n = n()) %&gt;% ungroup() %&gt;% # in percentage [%] mutate(perc = 100 * n / sum(n)) %&gt;% # Reorder type levels for plotting multi-storey first mutate(type = factor(type)) %&gt;% ggplot() + geom_bar(aes(y = floor_level, x = perc, fill = type), stat = &quot;identity&quot;) + labs(y = &quot;&quot;, x = &quot;Percentage [%]&quot;) + theme_bw() + theme(legend.position = &quot;bottom&quot;, legend.title = element_blank()) + guides(fill = guide_legend(ncol = 2)) + scale_x_continuous(labels = scales::comma) + scale_fill_manual(values = c(&quot;#0072B2&quot;, &quot;#D55E00&quot;, &quot;#CC79A7&quot;)) Figure 8.1: Residential units distribution by floor level Dwelling by type codes: Egentlig beboelse = Actual residence Blandet erhverv og beboelse = Mixed occupations and housing Enkeltværelse = Single room E. Andet (bl.a. institutioner og erhverv) = Other (including institutions and professions) res_units %&gt;% as_tibble() %&gt;% group_by(BOLIGTYPE_KODE, type) %&gt;% summarise(n = n()) # # A tibble: 24 x 3 # # Groups: BOLIGTYPE_KODE [6] # BOLIGTYPE_KODE type n # &lt;fct&gt; &lt;fct&gt; &lt;int&gt; # 1 1 College 80371 # 2 1 Farmhouse 16 # 3 1 Multi-storey 5372380 # 4 1 Residential institution 58 # 5 1 Second building 3102 # 6 1 Semi-detached house 146334 # # ... with 18 more rows Unit area &lt; 0?? res_units %&gt;% as_tibble() %&gt;% filter(BEBO_ARL &lt; 0) # # A tibble: 161 x 42 # VEJ_NAVN HUS_NR Etagebetegn SIDE_DOERNR PostNr KomKode ESREjdNr Landsejerlavkode KomEjerlavKode # &lt;chr&gt; &lt;chr&gt; &lt;ord&gt; &lt;chr&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; # 1 Haregade 1 st &quot;&quot; 1320 101 8983 2000166 16 # 2 Ãlekistevej 221 st &quot;&quot; 2720 101 686264 2000177 27 # 3 Ãster Vold~ 12 3 &quot;&quot; 1350 101 671909 2000166 16 # 4 Humlehaven 64 st &quot;&quot; 2500 101 243540 2000180 30 # 5 SÃ¦byholmsv~ 23 st &quot;&quot; 2500 101 553027 2000180 30 # 6 SolvÃ¦nget 10 st &quot;&quot; 2100 101 514862 2000173 23 # # ... with 155 more rows, and 33 more variables: MatrNr &lt;chr&gt;, BYG_ANVEND_KODE &lt;fct&gt;, # # OPFOERELSE_AAR &lt;int&gt;, OMBYG_AAR &lt;int&gt;, YDERVAEG_KODE &lt;fct&gt;, TAG_KODE &lt;fct&gt;, BYG_ARL_SAML &lt;int&gt;, # # BYG_BOLIG_ARL_SAML &lt;int&gt;, ERHV_ARL_SAML &lt;int&gt;, BYG_BEBYG_ARL &lt;int&gt;, ETAGER_ANT &lt;int&gt;, # # ENH_ANVEND_KODE &lt;fct&gt;, BOLIGTYPE_KODE &lt;fct&gt;, ENH_ARL_SAML &lt;int&gt;, BEBO_ARL &lt;int&gt;, # # ENH_ERHV_ARL &lt;int&gt;, VAERELSE_ANT &lt;int&gt;, ENERGI_KODE &lt;fct&gt;, VAER_ERHV_ANT &lt;int&gt;, # # VARMEINSTAL_KODE &lt;fct&gt;, OPVARMNING_KODE &lt;fct&gt;, VARME_SUPPL_KODE &lt;fct&gt;, EJD_VAERDI &lt;int64&gt;, # # GRUND_VAERDI &lt;int64&gt;, STUEHUS_VAERDI &lt;int&gt;, KONTANT_KOEBESUM &lt;int64&gt;, OVERDRAGELSES_KODE &lt;fct&gt;, # # SKOEDE_DATO &lt;date&gt;, geometry &lt;POINT [m]&gt;, floor_level &lt;ord&gt;, type &lt;fct&gt;, int &lt;lgl&gt;, # # BBR_year &lt;dbl&gt; Unit area = 0?? res_units %&gt;% as_tibble() %&gt;% filter(BEBO_ARL == 0) # # A tibble: 285 x 42 # VEJ_NAVN HUS_NR Etagebetegn SIDE_DOERNR PostNr KomKode ESREjdNr Landsejerlavkode KomEjerlavKode # &lt;chr&gt; &lt;chr&gt; &lt;ord&gt; &lt;chr&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; # 1 Olufsvej 6B 1 &quot;th&quot; 2100 101 420132 2000173 23 # 2 Betty Nanse~ 53 6 &quot;613&quot; 2000 147 241801 10051 1 # 3 Betty Nanse~ 53 7 &quot;713&quot; 2000 147 241801 10051 1 # 4 George Mars~ 13 st &quot;&quot; 2450 101 19878 2000174 24 # 5 H.C. Anders~ 13 3 &quot;tv&quot; 1553 101 24474 2000179 29 # 6 Falkoner Al~ 114A st &quot;th&quot; 2000 147 31076 10051 1 # # ... with 279 more rows, and 33 more variables: MatrNr &lt;chr&gt;, BYG_ANVEND_KODE &lt;fct&gt;, # # OPFOERELSE_AAR &lt;int&gt;, OMBYG_AAR &lt;int&gt;, YDERVAEG_KODE &lt;fct&gt;, TAG_KODE &lt;fct&gt;, BYG_ARL_SAML &lt;int&gt;, # # BYG_BOLIG_ARL_SAML &lt;int&gt;, ERHV_ARL_SAML &lt;int&gt;, BYG_BEBYG_ARL &lt;int&gt;, ETAGER_ANT &lt;int&gt;, # # ENH_ANVEND_KODE &lt;fct&gt;, BOLIGTYPE_KODE &lt;fct&gt;, ENH_ARL_SAML &lt;int&gt;, BEBO_ARL &lt;int&gt;, # # ENH_ERHV_ARL &lt;int&gt;, VAERELSE_ANT &lt;int&gt;, ENERGI_KODE &lt;fct&gt;, VAER_ERHV_ANT &lt;int&gt;, # # VARMEINSTAL_KODE &lt;fct&gt;, OPVARMNING_KODE &lt;fct&gt;, VARME_SUPPL_KODE &lt;fct&gt;, EJD_VAERDI &lt;int64&gt;, # # GRUND_VAERDI &lt;int64&gt;, STUEHUS_VAERDI &lt;int&gt;, KONTANT_KOEBESUM &lt;int64&gt;, OVERDRAGELSES_KODE &lt;fct&gt;, # # SKOEDE_DATO &lt;date&gt;, geometry &lt;POINT [m]&gt;, floor_level &lt;ord&gt;, type &lt;fct&gt;, int &lt;lgl&gt;, # # BBR_year &lt;dbl&gt; Big houses (area &gt; 1000) res_units %&gt;% as_tibble() %&gt;% filter(BEBO_ARL &gt; 1000) # # A tibble: 402 x 42 # VEJ_NAVN HUS_NR Etagebetegn SIDE_DOERNR PostNr KomKode ESREjdNr Landsejerlavkode KomEjerlavKode # &lt;chr&gt; &lt;chr&gt; &lt;ord&gt; &lt;chr&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; # 1 Amalienborg~ 7 st &quot;&quot; 1257 101 23028 2000167 17 # 2 Amalienborg~ 7 st &quot;&quot; 1257 101 23028 2000167 17 # 3 Ottiliavej 3 1 &quot;&quot; 2500 101 173666 2000176 26 # 4 Rymarksvej 1 st &quot;&quot; 2900 101 474402 2000173 23 # 5 Ottiliavej 1 1 &quot;&quot; 2500 101 173666 2000176 26 # 6 HillerÃ¸dga~ 64 st &quot;&quot; 2200 101 390594 2000175 25 # # ... with 396 more rows, and 33 more variables: MatrNr &lt;chr&gt;, BYG_ANVEND_KODE &lt;fct&gt;, # # OPFOERELSE_AAR &lt;int&gt;, OMBYG_AAR &lt;int&gt;, YDERVAEG_KODE &lt;fct&gt;, TAG_KODE &lt;fct&gt;, BYG_ARL_SAML &lt;int&gt;, # # BYG_BOLIG_ARL_SAML &lt;int&gt;, ERHV_ARL_SAML &lt;int&gt;, BYG_BEBYG_ARL &lt;int&gt;, ETAGER_ANT &lt;int&gt;, # # ENH_ANVEND_KODE &lt;fct&gt;, BOLIGTYPE_KODE &lt;fct&gt;, ENH_ARL_SAML &lt;int&gt;, BEBO_ARL &lt;int&gt;, # # ENH_ERHV_ARL &lt;int&gt;, VAERELSE_ANT &lt;int&gt;, ENERGI_KODE &lt;fct&gt;, VAER_ERHV_ANT &lt;int&gt;, # # VARMEINSTAL_KODE &lt;fct&gt;, OPVARMNING_KODE &lt;fct&gt;, VARME_SUPPL_KODE &lt;fct&gt;, EJD_VAERDI &lt;int64&gt;, # # GRUND_VAERDI &lt;int64&gt;, STUEHUS_VAERDI &lt;int&gt;, KONTANT_KOEBESUM &lt;int64&gt;, OVERDRAGELSES_KODE &lt;fct&gt;, # # SKOEDE_DATO &lt;date&gt;, geometry &lt;POINT [m]&gt;, floor_level &lt;ord&gt;, type &lt;fct&gt;, int &lt;lgl&gt;, # # BBR_year &lt;dbl&gt; "]]
