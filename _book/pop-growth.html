<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 1 Population growth | Housing prices Copenhagen</title>
  <meta name="description" content="Housing prices BBR data" />
  <meta name="generator" content="bookdown 0.22 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 1 Population growth | Housing prices Copenhagen" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Housing prices BBR data" />
  <meta name="github-repo" content="javiereliomedina/housing_prices_book" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 1 Population growth | Housing prices Copenhagen" />
  
  <meta name="twitter:description" content="Housing prices BBR data" />
  

<meta name="author" content="Javier Elío, Henning S. Hansen, Frederik S. Hass, Carsten Keßler" />


<meta name="date" content="2021-05-28" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="index.html"/>
<link rel="next" href="hedonic-price-model.html"/>
<script src="libs/header-attrs-2.8/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
<link href="libs/bsTable-3.3.7/bootstrapTable.min.css" rel="stylesheet" />
<script src="libs/bsTable-3.3.7/bootstrapTable.js"></script>
<script>
/* ========================================================================
 * Bootstrap: transition.js v3.3.7
 * http://getbootstrap.com/javascript/#transitions
 * ========================================================================
 * Copyright 2011-2016 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */


+function ($) {
  'use strict';

  // CSS TRANSITION SUPPORT (Shoutout: http://www.modernizr.com/)
  // ============================================================

  function transitionEnd() {
    var el = document.createElement('bootstrap')

    var transEndEventNames = {
      WebkitTransition : 'webkitTransitionEnd',
      MozTransition    : 'transitionend',
      OTransition      : 'oTransitionEnd otransitionend',
      transition       : 'transitionend'
    }

    for (var name in transEndEventNames) {
      if (el.style[name] !== undefined) {
        return { end: transEndEventNames[name] }
      }
    }

    return false // explicit for ie8 (  ._.)
  }

  // http://blog.alexmaccaw.com/css-transitions
  $.fn.emulateTransitionEnd = function (duration) {
    var called = false
    var $el = this
    $(this).one('bsTransitionEnd', function () { called = true })
    var callback = function () { if (!called) $($el).trigger($.support.transition.end) }
    setTimeout(callback, duration)
    return this
  }

  $(function () {
    $.support.transition = transitionEnd()

    if (!$.support.transition) return

    $.event.special.bsTransitionEnd = {
      bindType: $.support.transition.end,
      delegateType: $.support.transition.end,
      handle: function (e) {
        if ($(e.target).is(this)) return e.handleObj.handler.apply(this, arguments)
      }
    }
  })

}(jQuery);
</script>
<script>
/* ========================================================================
 * Bootstrap: collapse.js v3.3.7
 * http://getbootstrap.com/javascript/#collapse
 * ========================================================================
 * Copyright 2011-2016 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */

/* jshint latedef: false */

+function ($) {
  'use strict';

  // COLLAPSE PUBLIC CLASS DEFINITION
  // ================================

  var Collapse = function (element, options) {
    this.$element      = $(element)
    this.options       = $.extend({}, Collapse.DEFAULTS, options)
    this.$trigger      = $('[data-toggle="collapse"][href="#' + element.id + '"],' +
                           '[data-toggle="collapse"][data-target="#' + element.id + '"]')
    this.transitioning = null

    if (this.options.parent) {
      this.$parent = this.getParent()
    } else {
      this.addAriaAndCollapsedClass(this.$element, this.$trigger)
    }

    if (this.options.toggle) this.toggle()
  }

  Collapse.VERSION  = '3.3.7'

  Collapse.TRANSITION_DURATION = 350

  Collapse.DEFAULTS = {
    toggle: true
  }

  Collapse.prototype.dimension = function () {
    var hasWidth = this.$element.hasClass('width')
    return hasWidth ? 'width' : 'height'
  }

  Collapse.prototype.show = function () {
    if (this.transitioning || this.$element.hasClass('in')) return

    var activesData
    var actives = this.$parent && this.$parent.children('.panel').children('.in, .collapsing')

    if (actives && actives.length) {
      activesData = actives.data('bs.collapse')
      if (activesData && activesData.transitioning) return
    }

    var startEvent = $.Event('show.bs.collapse')
    this.$element.trigger(startEvent)
    if (startEvent.isDefaultPrevented()) return

    if (actives && actives.length) {
      Plugin.call(actives, 'hide')
      activesData || actives.data('bs.collapse', null)
    }

    var dimension = this.dimension()

    this.$element
      .removeClass('collapse')
      .addClass('collapsing')[dimension](0)
      .attr('aria-expanded', true)

    this.$trigger
      .removeClass('collapsed')
      .attr('aria-expanded', true)

    this.transitioning = 1

    var complete = function () {
      this.$element
        .removeClass('collapsing')
        .addClass('collapse in')[dimension]('')
      this.transitioning = 0
      this.$element
        .trigger('shown.bs.collapse')
    }

    if (!$.support.transition) return complete.call(this)

    var scrollSize = $.camelCase(['scroll', dimension].join('-'))

    this.$element
      .one('bsTransitionEnd', $.proxy(complete, this))
      .emulateTransitionEnd(Collapse.TRANSITION_DURATION)[dimension](this.$element[0][scrollSize])
  }

  Collapse.prototype.hide = function () {
    if (this.transitioning || !this.$element.hasClass('in')) return

    var startEvent = $.Event('hide.bs.collapse')
    this.$element.trigger(startEvent)
    if (startEvent.isDefaultPrevented()) return

    var dimension = this.dimension()

    this.$element[dimension](this.$element[dimension]())[0].offsetHeight

    this.$element
      .addClass('collapsing')
      .removeClass('collapse in')
      .attr('aria-expanded', false)

    this.$trigger
      .addClass('collapsed')
      .attr('aria-expanded', false)

    this.transitioning = 1

    var complete = function () {
      this.transitioning = 0
      this.$element
        .removeClass('collapsing')
        .addClass('collapse')
        .trigger('hidden.bs.collapse')
    }

    if (!$.support.transition) return complete.call(this)

    this.$element
      [dimension](0)
      .one('bsTransitionEnd', $.proxy(complete, this))
      .emulateTransitionEnd(Collapse.TRANSITION_DURATION)
  }

  Collapse.prototype.toggle = function () {
    this[this.$element.hasClass('in') ? 'hide' : 'show']()
  }

  Collapse.prototype.getParent = function () {
    return $(this.options.parent)
      .find('[data-toggle="collapse"][data-parent="' + this.options.parent + '"]')
      .each($.proxy(function (i, element) {
        var $element = $(element)
        this.addAriaAndCollapsedClass(getTargetFromTrigger($element), $element)
      }, this))
      .end()
  }

  Collapse.prototype.addAriaAndCollapsedClass = function ($element, $trigger) {
    var isOpen = $element.hasClass('in')

    $element.attr('aria-expanded', isOpen)
    $trigger
      .toggleClass('collapsed', !isOpen)
      .attr('aria-expanded', isOpen)
  }

  function getTargetFromTrigger($trigger) {
    var href
    var target = $trigger.attr('data-target')
      || (href = $trigger.attr('href')) && href.replace(/.*(?=#[^\s]+$)/, '') // strip for ie7

    return $(target)
  }


  // COLLAPSE PLUGIN DEFINITION
  // ==========================

  function Plugin(option) {
    return this.each(function () {
      var $this   = $(this)
      var data    = $this.data('bs.collapse')
      var options = $.extend({}, Collapse.DEFAULTS, $this.data(), typeof option == 'object' && option)

      if (!data && options.toggle && /show|hide/.test(option)) options.toggle = false
      if (!data) $this.data('bs.collapse', (data = new Collapse(this, options)))
      if (typeof option == 'string') data[option]()
    })
  }

  var old = $.fn.collapse

  $.fn.collapse             = Plugin
  $.fn.collapse.Constructor = Collapse


  // COLLAPSE NO CONFLICT
  // ====================

  $.fn.collapse.noConflict = function () {
    $.fn.collapse = old
    return this
  }


  // COLLAPSE DATA-API
  // =================

  $(document).on('click.bs.collapse.data-api', '[data-toggle="collapse"]', function (e) {
    var $this   = $(this)

    if (!$this.attr('data-target')) e.preventDefault()

    var $target = getTargetFromTrigger($this)
    var data    = $target.data('bs.collapse')
    var option  = data ? 'toggle' : $this.data()

    Plugin.call($target, option)
  })

}(jQuery);
</script>
<script>
window.initializeCodeFolding = function(show) {

  // handlers for show-all and hide all
  $("#rmd-show-all-code").click(function() {
    // close the dropdown menu when an option is clicked
    $("#allCodeButton").dropdown("toggle");
    $('div.r-code-collapse').each(function() {
      $(this).collapse('show');
    });
  });
  $("#rmd-hide-all-code").click(function() {
    // close the dropdown menu when an option is clicked
    $("#allCodeButton").dropdown("toggle");
    $('div.r-code-collapse').each(function() {
      $(this).collapse('hide');
    });
  });

  // index for unique code element ids
  var currentIndex = 1;

  // select all R code blocks
  var rCodeBlocks = $('pre.sourceCode, pre.r, pre.python, pre.bash, pre.sql, pre.cpp, pre.stan');
  rCodeBlocks.each(function() {

    // if code block has been labeled with class `fold-show`, show the code on init!
    var classList = $(this).attr('class').split(/\s+/);
    for (var i = 0; i < classList.length; i++) {
    if (classList[i] === 'fold-show') {
        show = true;
      }
    }

    // create a collapsable div to wrap the code in
    var div = $('<div class="collapse r-code-collapse"></div>');
    if (show)
      div.addClass('in');
    var id = 'rcode-643E0F36' + currentIndex++;
    div.attr('id', id);
    $(this).before(div);
    $(this).detach().appendTo(div);

    // add a show code button right above
    var showCodeText = $('<span>' + (show ? 'Hide' : 'Code') + '</span>');
    var showCodeButton = $('<button type="button" class="btn btn-default btn-xs code-folding-btn pull-right"></button>');
    showCodeButton.append(showCodeText);
    showCodeButton
        .attr('data-toggle', 'collapse')
        .attr('data-target', '#' + id)
        .attr('aria-expanded', show)
        .attr('aria-controls', id);

    var buttonRow = $('<div class="row"></div>');
    var buttonCol = $('<div class="col-md-12"></div>');

    buttonCol.append(showCodeButton);
    buttonRow.append(buttonCol);

    div.before(buttonRow);

    // hack: return show to false, otherwise all next codeBlocks will be shown!
    show = false;

    // update state of button on show/hide
    div.on('hidden.bs.collapse', function () {
      showCodeText.text('Code');
    });
    div.on('show.bs.collapse', function () {
      showCodeText.text('Hide');
    });
  });

}
</script>
<script>
/* ========================================================================
 * Bootstrap: dropdown.js v3.3.7
 * http://getbootstrap.com/javascript/#dropdowns
 * ========================================================================
 * Copyright 2011-2016 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */


+function ($) {
  'use strict';

  // DROPDOWN CLASS DEFINITION
  // =========================

  var backdrop = '.dropdown-backdrop'
  var toggle   = '[data-toggle="dropdown"]'
  var Dropdown = function (element) {
    $(element).on('click.bs.dropdown', this.toggle)
  }

  Dropdown.VERSION = '3.3.7'

  function getParent($this) {
    var selector = $this.attr('data-target')

    if (!selector) {
      selector = $this.attr('href')
      selector = selector && /#[A-Za-z]/.test(selector) && selector.replace(/.*(?=#[^\s]*$)/, '') // strip for ie7
    }

    var $parent = selector && $(selector)

    return $parent && $parent.length ? $parent : $this.parent()
  }

  function clearMenus(e) {
    if (e && e.which === 3) return
    $(backdrop).remove()
    $(toggle).each(function () {
      var $this         = $(this)
      var $parent       = getParent($this)
      var relatedTarget = { relatedTarget: this }

      if (!$parent.hasClass('open')) return

      if (e && e.type == 'click' && /input|textarea/i.test(e.target.tagName) && $.contains($parent[0], e.target)) return

      $parent.trigger(e = $.Event('hide.bs.dropdown', relatedTarget))

      if (e.isDefaultPrevented()) return

      $this.attr('aria-expanded', 'false')
      $parent.removeClass('open').trigger($.Event('hidden.bs.dropdown', relatedTarget))
    })
  }

  Dropdown.prototype.toggle = function (e) {
    var $this = $(this)

    if ($this.is('.disabled, :disabled')) return

    var $parent  = getParent($this)
    var isActive = $parent.hasClass('open')

    clearMenus()

    if (!isActive) {
      if ('ontouchstart' in document.documentElement && !$parent.closest('.navbar-nav').length) {
        // if mobile we use a backdrop because click events don't delegate
        $(document.createElement('div'))
          .addClass('dropdown-backdrop')
          .insertAfter($(this))
          .on('click', clearMenus)
      }

      var relatedTarget = { relatedTarget: this }
      $parent.trigger(e = $.Event('show.bs.dropdown', relatedTarget))

      if (e.isDefaultPrevented()) return

      $this
        .trigger('focus')
        .attr('aria-expanded', 'true')

      $parent
        .toggleClass('open')
        .trigger($.Event('shown.bs.dropdown', relatedTarget))
    }

    return false
  }

  Dropdown.prototype.keydown = function (e) {
    if (!/(38|40|27|32)/.test(e.which) || /input|textarea/i.test(e.target.tagName)) return

    var $this = $(this)

    e.preventDefault()
    e.stopPropagation()

    if ($this.is('.disabled, :disabled')) return

    var $parent  = getParent($this)
    var isActive = $parent.hasClass('open')

    if (!isActive && e.which != 27 || isActive && e.which == 27) {
      if (e.which == 27) $parent.find(toggle).trigger('focus')
      return $this.trigger('click')
    }

    var desc = ' li:not(.disabled):visible a'
    var $items = $parent.find('.dropdown-menu' + desc)

    if (!$items.length) return

    var index = $items.index(e.target)

    if (e.which == 38 && index > 0)                 index--         // up
    if (e.which == 40 && index < $items.length - 1) index++         // down
    if (!~index)                                    index = 0

    $items.eq(index).trigger('focus')
  }


  // DROPDOWN PLUGIN DEFINITION
  // ==========================

  function Plugin(option) {
    return this.each(function () {
      var $this = $(this)
      var data  = $this.data('bs.dropdown')

      if (!data) $this.data('bs.dropdown', (data = new Dropdown(this)))
      if (typeof option == 'string') data[option].call($this)
    })
  }

  var old = $.fn.dropdown

  $.fn.dropdown             = Plugin
  $.fn.dropdown.Constructor = Dropdown


  // DROPDOWN NO CONFLICT
  // ====================

  $.fn.dropdown.noConflict = function () {
    $.fn.dropdown = old
    return this
  }


  // APPLY TO STANDARD DROPDOWN ELEMENTS
  // ===================================

  $(document)
    .on('click.bs.dropdown.data-api', clearMenus)
    .on('click.bs.dropdown.data-api', '.dropdown form', function (e) { e.stopPropagation() })
    .on('click.bs.dropdown.data-api', toggle, Dropdown.prototype.toggle)
    .on('keydown.bs.dropdown.data-api', toggle, Dropdown.prototype.keydown)
    .on('keydown.bs.dropdown.data-api', '.dropdown-menu', Dropdown.prototype.keydown)

}(jQuery);
</script>
<style type="text/css">
.code-folding-btn {
  margin-bottom: 4px;
}

.row { display: flex; }
.collapse { display: none; }
.in { display:block }
.pull-right > .dropdown-menu {
    right: 0;
    left: auto;
}

.dropdown-menu {
    position: absolute;
    top: 100%;
    left: 0;
    z-index: 1000;
    display: none;
    float: left;
    min-width: 160px;
    padding: 5px 0;
    margin: 2px 0 0;
    font-size: 14px;
    text-align: left;
    list-style: none;
    background-color: #fff;
    -webkit-background-clip: padding-box;
    background-clip: padding-box;
    border: 1px solid #ccc;
    border: 1px solid rgba(0,0,0,.15);
    border-radius: 4px;
    -webkit-box-shadow: 0 6px 12px rgba(0,0,0,.175);
    box-shadow: 0 6px 12px rgba(0,0,0,.175);
}

.open > .dropdown-menu {
    display: block;
    color: #ffffff;
    background-color: #ffffff;
    background-image: none;
    border-color: #92897e;
}

.dropdown-menu > li > a {
  display: block;
  padding: 3px 20px;
  clear: both;
  font-weight: 400;
  line-height: 1.42857143;
  color: #000000;
  white-space: nowrap;
}

.dropdown-menu > li > a:hover,
.dropdown-menu > li > a:focus {
  color: #ffffff;
  text-decoration: none;
  background-color: #e95420;
}

.dropdown-menu > .active > a,
.dropdown-menu > .active > a:hover,
.dropdown-menu > .active > a:focus {
  color: #ffffff;
  text-decoration: none;
  background-color: #e95420;
  outline: 0;
}
.dropdown-menu > .disabled > a,
.dropdown-menu > .disabled > a:hover,
.dropdown-menu > .disabled > a:focus {
  color: #aea79f;
}

.dropdown-menu > .disabled > a:hover,
.dropdown-menu > .disabled > a:focus {
  text-decoration: none;
  cursor: not-allowed;
  background-color: transparent;
  background-image: none;
  filter: progid:DXImageTransform.Microsoft.gradient(enabled = false);
}

.btn {
  display: inline-block;
  margin-bottom: 1;
  font-weight: normal;
  text-align: center;
  white-space: nowrap;
  vertical-align: middle;
  -ms-touch-action: manipulation;
      touch-action: manipulation;
  cursor: pointer;
  background-image: none;
  border: 1px solid transparent;
  padding: 4px 8px;
  font-size: 14px;
  line-height: 1.42857143;
  border-radius: 4px;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

.btn:focus,
.btn:active:focus,
.btn.active:focus,
.btn.focus,
.btn:active.focus,
.btn.active.focus {
  outline: 5px auto -webkit-focus-ring-color;
  outline-offset: -2px;
}
.btn:hover,
.btn:focus,
.btn.focus {
  color: #ffffff;
  text-decoration: none;
}
.btn:active,
.btn.active {
  background-image: none;
  outline: 0;
  box-shadow: inset 0 3px 5px rgba(0, 0, 0, 0.125);
}
.btn.disabled,
.btn[disabled],
fieldset[disabled] .btn {
  cursor: not-allowed;
  filter: alpha(opacity=65);
  opacity: 0.65;
  box-shadow: none;
}
a.btn.disabled,
fieldset[disabled] a.btn {
  pointer-events: none;
}
.btn-default {
  color: #ffffff;
  background-color: #aea79f; #important
  border-color: #aea79f;
}

.btn-default:focus,
.btn-default.focus {
  color: #ffffff;
  background-color: #978e83;
  border-color: #6f675e;
}

.btn-default:hover {
  color: #ffffff;
  background-color: #978e83;
  border-color: #92897e;
}
.btn-default:active,
.btn-default.active,
.btn-group > .btn:not(:first-child):not(:last-child):not(.dropdown-toggle) {
  border-radius: 0;
}
.btn-group > .btn:first-child {
  margin-left: 0;
}
.btn-group > .btn:first-child:not(:last-child):not(.dropdown-toggle) {
  border-top-right-radius: 0;
  border-bottom-right-radius: 0;
}
.btn-group > .btn:last-child:not(:first-child),
.btn-group > .dropdown-toggle:not(:first-child) {
  border-top-left-radius: 0;
  border-bottom-left-radius: 0;
}
.btn-group > .btn-group {
  float: left;
}
.btn-group > .btn-group:not(:first-child):not(:last-child) > .btn {
  border-radius: 0;
}
.btn-group > .btn-group:first-child:not(:last-child) > .btn:last-child,
.btn-group > .btn-group:first-child:not(:last-child) > .dropdown-toggle {
  border-top-right-radius: 0;
  border-bottom-right-radius: 0;
}
.btn-group > .btn-group:last-child:not(:first-child) > .btn:first-child {
  border-top-left-radius: 0;
  border-bottom-left-radius: 0;
}
.btn-group .dropdown-toggle:active,
.btn-group.open .dropdown-toggle {
  outline: 0;
}
.btn-group > .btn + .dropdown-toggle {
  padding-right: 8px;
  padding-left: 8px;
}
.btn-group > .btn-lg + .dropdown-toggle {
  padding-right: 12px;
  padding-left: 12px;
}
.btn-group.open .dropdown-toggle {
  box-shadow: inset 0 3px 5px rgba(0, 0, 0, 0.125);
}
.btn-group.open .dropdown-toggle.btn-link {
  box-shadow: none;
}

</style>
<script>
var str = '<div class="btn-group pull-right" style="position: fixed; right: 50px; top: 10px; z-index: 200"><button type="button" class="btn btn-default btn-xs dropdown-toggle" id="allCodeButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true" data-_extension-text-contrast=""><span>Code</span> <span class="caret"></span></button><ul class="dropdown-menu" style="min-width: 50px;"><li><a id="rmd-show-all-code" href="#">Show All Code</a></li><li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li></ul></div>';
document.write(str);
</script>
<script>
$(document).ready(function () {
  window.initializeCodeFolding("show" === "hide");
});
</script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Housing prices in Copenhagen region</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Prerequisite</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#acknowledgements"><i class="fa fa-check"></i>Acknowledgements</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#r-session"><i class="fa fa-check"></i>R session</a></li>
</ul></li>
<li class="part"><span><b>I Population growth in Denmark and housing prices</b></span></li>
<li class="chapter" data-level="1" data-path="pop-growth.html"><a href="pop-growth.html"><i class="fa fa-check"></i><b>1</b> Population growth</a></li>
<li class="part"><span><b>II Hedonic price model</b></span></li>
<li class="chapter" data-level="2" data-path="hedonic-price-model.html"><a href="hedonic-price-model.html"><i class="fa fa-check"></i><b>2</b> Hedonic model</a>
<ul>
<li class="chapter" data-level="2.1" data-path="hedonic-price-model.html"><a href="hedonic-price-model.html#house-characteristics"><i class="fa fa-check"></i><b>2.1</b> House characteristics</a></li>
<li class="chapter" data-level="2.2" data-path="hedonic-price-model.html"><a href="hedonic-price-model.html#location-characteristics"><i class="fa fa-check"></i><b>2.2</b> Location characteristics</a></li>
<li class="chapter" data-level="2.3" data-path="hedonic-price-model.html"><a href="hedonic-price-model.html#neighbourhood-characteristics"><i class="fa fa-check"></i><b>2.3</b> Neighbourhood characteristics</a></li>
</ul></li>
<li class="part"><span><b>III Load data</b></span></li>
<li class="chapter" data-level="3" data-path="adm-units.html"><a href="adm-units.html"><i class="fa fa-check"></i><b>3</b> Administrative units</a></li>
<li class="chapter" data-level="4" data-path="BBR-data.html"><a href="BBR-data.html"><i class="fa fa-check"></i><b>4</b> Housing data</a></li>
<li class="chapter" data-level="5" data-path="pop-DST.html"><a href="pop-DST.html"><i class="fa fa-check"></i><b>5</b> Population density</a></li>
<li class="chapter" data-level="6" data-path="OSM-features.html"><a href="OSM-features.html"><i class="fa fa-check"></i><b>6</b> Open Street Map</a>
<ul>
<li class="chapter" data-level="6.1" data-path="OSM-features.html"><a href="OSM-features.html#features"><i class="fa fa-check"></i><b>6.1</b> Features</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="OSM-features.html"><a href="OSM-features.html#areal-features"><i class="fa fa-check"></i><b>6.1.1</b> Areal features</a></li>
<li class="chapter" data-level="6.1.2" data-path="OSM-features.html"><a href="OSM-features.html#point-features"><i class="fa fa-check"></i><b>6.1.2</b> Point features</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="OSM-features.html"><a href="OSM-features.html#potential-model"><i class="fa fa-check"></i><b>6.2</b> Potential model</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="dist-CBD.html"><a href="dist-CBD.html"><i class="fa fa-check"></i><b>7</b> Distance to Central Business District</a></li>
<li class="chapter" data-level="8" data-path="noise.html"><a href="noise.html"><i class="fa fa-check"></i><b>8</b> Noise</a></li>
<li class="part"><span><b>IV Data analysis</b></span></li>
<li class="chapter" data-level="9" data-path="EDA-house-prices.html"><a href="EDA-house-prices.html"><i class="fa fa-check"></i><b>9</b> Residential units saled as free scale</a>
<ul>
<li class="chapter" data-level="9.1" data-path="EDA-house-prices.html"><a href="EDA-house-prices.html#residential-units-by-floor-level"><i class="fa fa-check"></i><b>9.1</b> Residential units by floor level</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Housing prices Copenhagen</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="pop-growth" class="section level1" number="1">
<h1><span class="header-section-number">Chapter 1</span> Population growth</h1>
<p>Migration and housing prices are closely related with profound implications on urban planning. In this sense, there is a two-way causal relationship between migration and house prices (e.g. <span class="citation"><a href="#ref-Lin2018" role="doc-biblioref">Lin et al.</a> (<a href="#ref-Lin2018" role="doc-biblioref">2018</a>)</span>, <span class="citation"><a href="#ref-Jeanty2010" role="doc-biblioref">Jeanty, Partridge, and Irwin</a> (<a href="#ref-Jeanty2010" role="doc-biblioref">2010</a>)</span>). On the one hand, a rise on house prices will increase household’s housing equity and, therefore, homeowners would have a higher financial flexibility for purchasing a new house. On the other hand, high housing prices can make the house unaffordable. Prices differences between the region where migrants live and regions where they intend to move may also affect in- and out- migration rates. Finally, the expectation of future house prices also plays an important role in the decision to move (<span class="citation"><a href="#ref-Peng2019" role="doc-biblioref">Peng and Tsai</a> (<a href="#ref-Peng2019" role="doc-biblioref">2019</a>)</span>). Furthermore, migration increases the housing demand and, as a consequence, the prices (<span class="citation"><a href="#ref-Wang2017a" role="doc-biblioref">Wang, Hui, and Sun</a> (<a href="#ref-Wang2017a" role="doc-biblioref">2017</a>)</span>). An example of this effect has been found in Sweden where “a 1% increase in the foreign-born population results in a 0.8% increase in house prices, which increases to 1.2% if internal migration is also accounted for” (<span class="citation"><a href="#ref-Tyrcha2019" role="doc-biblioref">Tyrcha and Abreu</a> (<a href="#ref-Tyrcha2019" role="doc-biblioref">2019</a>)</span>).</p>
<p>We analyse therefore housing prices, population and migration patterns in Denmark, evaluating the influence of housing prices on migration (and vice versa). Specific questions we will respond are, among others:</p>
<ul>
<li><p>How have housing prices changed over time in Denmark?</p></li>
<li><p>How does it affect mobility and the population of a region?</p></li>
<li><p>What is the effect of immigration on housing prices?</p></li>
<li><p>What is the percentage of immigrants that own/rent a property?</p></li>
<li><p>Is there racial segregation of immigrants? How does it affect mobility?</p></li>
</ul>
<p>Do the developments of housing prices in areas with significantly higher (or lower) representation of immigrants differ from the developments in nearby areas? If there is an effect, does it differ depending on the immigrants’ country of origin?</p>
<p>Danish population has growth over the last decade from 5.47 million (2008-Q1) to 5.82 million (2020-Q3). However, this increase is mainly due to foreign population. In this sense, the foreigners have raised from 0.30 million to 0.53 million (80%) while Danish citizens has growth from 5.18 million to 5.29 million (2.5%). Therefore, from the increase of almost 350,000 inhabitants over the last decade approximately 66% are immigrants. The population is also getting older with an increase of both the mean and median age of the population. However, there is a significant difference between the mean and median ages of Danish and Foreign citizens, with these values around 40-42 years and 32-34 years respectively. Furthermore, these values have raised for the Danish population but not for foreigners. Another consideration is that the mean age for Danish citizens is less than the median, which indicates that the distribution is skewed to the left (i.e. more elderly people), However, for the foreign population it is the other way around (i.e. the majority are young people).</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="pop-growth.html#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load population data by citizenship and age (208Q1 - 2019Q1)</span></span>
<span id="cb6-2"><a href="pop-growth.html#cb6-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-3"><a href="pop-growth.html#cb6-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Metadata table of interest (e.g. KMSTA001)</span></span>
<span id="cb6-4"><a href="pop-growth.html#cb6-4" aria-hidden="true" tabindex="-1"></a>  var_pop <span class="ot">&lt;-</span> <span class="fu">get_table_metadata</span>(<span class="at">table_id =</span> <span class="st">&quot;FOLK1D&quot;</span>, <span class="at">variables_only =</span> <span class="cn">TRUE</span>)</span>
<span id="cb6-5"><a href="pop-growth.html#cb6-5" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb6-6"><a href="pop-growth.html#cb6-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Variables we would like to get data</span></span>
<span id="cb6-7"><a href="pop-growth.html#cb6-7" aria-hidden="true" tabindex="-1"></a>  var_input <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="fu">list</span>(<span class="at">code =</span> <span class="st">&quot;OMRÅDE&quot;</span>, <span class="at">values =</span> <span class="st">&quot;000&quot;</span>),</span>
<span id="cb6-8"><a href="pop-growth.html#cb6-8" aria-hidden="true" tabindex="-1"></a>                    <span class="fu">list</span>(<span class="at">code =</span> <span class="st">&quot;KØN&quot;</span>, <span class="at">values =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>)),</span>
<span id="cb6-9"><a href="pop-growth.html#cb6-9" aria-hidden="true" tabindex="-1"></a>                    <span class="fu">list</span>(<span class="at">code =</span> <span class="st">&quot;ALDER&quot;</span>, <span class="at">values =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">125</span>, <span class="dv">1</span>)),</span>
<span id="cb6-10"><a href="pop-growth.html#cb6-10" aria-hidden="true" tabindex="-1"></a>                    <span class="fu">list</span>(<span class="at">code =</span> <span class="st">&quot;STATSB&quot;</span>, <span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;DANSK&quot;</span>, <span class="st">&quot;UDLAND&quot;</span>)),</span>
<span id="cb6-11"><a href="pop-growth.html#cb6-11" aria-hidden="true" tabindex="-1"></a>                    <span class="fu">list</span>(<span class="at">code =</span> <span class="st">&quot;tid&quot;</span>, <span class="at">values =</span> var_pop<span class="sc">$</span>values[[<span class="dv">5</span>]]<span class="sc">$</span>id[<span class="dv">1</span><span class="sc">:</span><span class="dv">45</span>]))</span>
<span id="cb6-12"><a href="pop-growth.html#cb6-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-13"><a href="pop-growth.html#cb6-13" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Get data </span></span>
<span id="cb6-14"><a href="pop-growth.html#cb6-14" aria-hidden="true" tabindex="-1"></a>  pop_ctzn_age <span class="ot">&lt;-</span> <span class="fu">get_data</span>(<span class="st">&quot;FOLK1D&quot;</span>, <span class="at">variables =</span> var_input) <span class="sc">%&gt;%</span></span>
<span id="cb6-15"><a href="pop-growth.html#cb6-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rename</span>(<span class="at">Country =</span> OMRÅDE,</span>
<span id="cb6-16"><a href="pop-growth.html#cb6-16" aria-hidden="true" tabindex="-1"></a>           <span class="at">Gender =</span> KØN, </span>
<span id="cb6-17"><a href="pop-growth.html#cb6-17" aria-hidden="true" tabindex="-1"></a>           <span class="at">Age =</span> ALDER,</span>
<span id="cb6-18"><a href="pop-growth.html#cb6-18" aria-hidden="true" tabindex="-1"></a>           <span class="at">Citizen =</span> STATSB,</span>
<span id="cb6-19"><a href="pop-growth.html#cb6-19" aria-hidden="true" tabindex="-1"></a>           <span class="at">Year =</span> TID,</span>
<span id="cb6-20"><a href="pop-growth.html#cb6-20" aria-hidden="true" tabindex="-1"></a>           <span class="at">Pop =</span> INDHOLD) <span class="sc">%&gt;%</span>  </span>
<span id="cb6-21"><a href="pop-growth.html#cb6-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">Country =</span> <span class="st">&quot;Denmark&quot;</span>,</span>
<span id="cb6-22"><a href="pop-growth.html#cb6-22" aria-hidden="true" tabindex="-1"></a>           <span class="at">Citizen =</span> <span class="fu">case_when</span>(Citizen <span class="sc">==</span> <span class="st">&quot;Danish citizen&quot;</span> <span class="sc">~</span> <span class="st">&quot;Danish&quot;</span>,</span>
<span id="cb6-23"><a href="pop-growth.html#cb6-23" aria-hidden="true" tabindex="-1"></a>                               Citizen <span class="sc">==</span> <span class="st">&quot;Foreign citizen&quot;</span> <span class="sc">~</span> <span class="st">&quot;Foreign&quot;</span>),</span>
<span id="cb6-24"><a href="pop-growth.html#cb6-24" aria-hidden="true" tabindex="-1"></a>           <span class="at">Date =</span> <span class="fu">gsub</span>(<span class="st">&quot;Q&quot;</span>, <span class="st">&quot;&quot;</span>, Year),</span>
<span id="cb6-25"><a href="pop-growth.html#cb6-25" aria-hidden="true" tabindex="-1"></a>           <span class="at">Date =</span> <span class="fu">as.integer</span>(Date),</span>
<span id="cb6-26"><a href="pop-growth.html#cb6-26" aria-hidden="true" tabindex="-1"></a>           <span class="at">Date =</span> <span class="fu">as_date_yq</span>(Date),</span>
<span id="cb6-27"><a href="pop-growth.html#cb6-27" aria-hidden="true" tabindex="-1"></a>           <span class="at">Date =</span> <span class="fu">first_of_quarter</span>(Date)) <span class="sc">%&gt;%</span> </span>
<span id="cb6-28"><a href="pop-growth.html#cb6-28" aria-hidden="true" tabindex="-1"></a>    <span class="fu">separate</span>(Year, <span class="fu">c</span>(<span class="st">&quot;Year&quot;</span>, <span class="st">&quot;Quarter&quot;</span>), <span class="at">sep =</span> <span class="st">&quot;Q&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb6-29"><a href="pop-growth.html#cb6-29" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">Year =</span> <span class="fu">as.integer</span>(Year),</span>
<span id="cb6-30"><a href="pop-growth.html#cb6-30" aria-hidden="true" tabindex="-1"></a>           <span class="at">Quarter =</span> <span class="fu">as.integer</span>(Quarter)) <span class="sc">%&gt;%</span> </span>
<span id="cb6-31"><a href="pop-growth.html#cb6-31" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">Age =</span> <span class="fu">parse_number</span>(Age), </span>
<span id="cb6-32"><a href="pop-growth.html#cb6-32" aria-hidden="true" tabindex="-1"></a>           <span class="at">Age =</span> <span class="fu">as.integer</span>(Age)) <span class="sc">%&gt;%</span> </span>
<span id="cb6-33"><a href="pop-growth.html#cb6-33" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Add rows with total pop by age</span></span>
<span id="cb6-34"><a href="pop-growth.html#cb6-34" aria-hidden="true" tabindex="-1"></a>    <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> <span class="st">&quot;Citizen&quot;</span>, <span class="at">values_from =</span> <span class="fu">c</span>(<span class="st">&quot;Pop&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb6-35"><a href="pop-growth.html#cb6-35" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">Total =</span> Danish <span class="sc">+</span> Foreign) <span class="sc">%&gt;%</span> </span>
<span id="cb6-36"><a href="pop-growth.html#cb6-36" aria-hidden="true" tabindex="-1"></a>    <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="fu">c</span>(Danish, Foreign, Total),</span>
<span id="cb6-37"><a href="pop-growth.html#cb6-37" aria-hidden="true" tabindex="-1"></a>                 <span class="at">names_to =</span> <span class="st">&quot;Citizen&quot;</span>,</span>
<span id="cb6-38"><a href="pop-growth.html#cb6-38" aria-hidden="true" tabindex="-1"></a>                 <span class="at">values_to =</span> <span class="st">&quot;Pop&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb6-39"><a href="pop-growth.html#cb6-39" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Add population in percentage (%)</span></span>
<span id="cb6-40"><a href="pop-growth.html#cb6-40" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(Date) <span class="sc">%&gt;%</span> </span>
<span id="cb6-41"><a href="pop-growth.html#cb6-41" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">Pop_per =</span> <span class="dv">100</span> <span class="sc">*</span> Pop <span class="sc">/</span> <span class="fu">sum</span>(Pop)) <span class="sc">%&gt;%</span>    </span>
<span id="cb6-42"><a href="pop-growth.html#cb6-42" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ungroup</span>() </span>
<span id="cb6-43"><a href="pop-growth.html#cb6-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-44"><a href="pop-growth.html#cb6-44" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Total population by quarter and citizenship</span></span>
<span id="cb6-45"><a href="pop-growth.html#cb6-45" aria-hidden="true" tabindex="-1"></a>  pop_ctzn_ttl_quarter <span class="ot">&lt;-</span> pop_ctzn_age <span class="sc">%&gt;%</span> </span>
<span id="cb6-46"><a href="pop-growth.html#cb6-46" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(Date, Citizen) <span class="sc">%&gt;%</span></span>
<span id="cb6-47"><a href="pop-growth.html#cb6-47" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Add summary statistics (mean and median age)</span></span>
<span id="cb6-48"><a href="pop-growth.html#cb6-48" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarise</span>(<span class="at">Pop_total =</span> <span class="fu">sum</span>(Pop),</span>
<span id="cb6-49"><a href="pop-growth.html#cb6-49" aria-hidden="true" tabindex="-1"></a>              <span class="at">Age_mean   =</span> <span class="fu">weighted.mean</span>(Age, Pop),</span>
<span id="cb6-50"><a href="pop-growth.html#cb6-50" aria-hidden="true" tabindex="-1"></a>              <span class="at">Age_median =</span> matrixStats<span class="sc">::</span><span class="fu">weightedMedian</span>(Age, Pop)) <span class="sc">%&gt;%</span>  </span>
<span id="cb6-51"><a href="pop-growth.html#cb6-51" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span>  </span>
<span id="cb6-52"><a href="pop-growth.html#cb6-52" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Standardize it to % change with 2008-Q1 as baseline</span></span>
<span id="cb6-53"><a href="pop-growth.html#cb6-53" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(Citizen) <span class="sc">%&gt;%</span> </span>
<span id="cb6-54"><a href="pop-growth.html#cb6-54" aria-hidden="true" tabindex="-1"></a>    <span class="fu">arrange</span>(Date, Citizen) <span class="sc">%&gt;%</span> </span>
<span id="cb6-55"><a href="pop-growth.html#cb6-55" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">pct_change_2008 =</span> (Pop_total<span class="sc">/</span><span class="fu">first</span>(Pop_total) <span class="sc">-</span> <span class="dv">1</span>) <span class="sc">*</span> <span class="dv">100</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb6-56"><a href="pop-growth.html#cb6-56" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ungroup</span>()</span>
<span id="cb6-57"><a href="pop-growth.html#cb6-57" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb6-58"><a href="pop-growth.html#cb6-58" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot</span></span>
<span id="cb6-59"><a href="pop-growth.html#cb6-59" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb6-60"><a href="pop-growth.html#cb6-60" aria-hidden="true" tabindex="-1"></a>  p1 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb6-61"><a href="pop-growth.html#cb6-61" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_line</span>(<span class="at">data =</span> pop_ctzn_ttl_quarter,</span>
<span id="cb6-62"><a href="pop-growth.html#cb6-62" aria-hidden="true" tabindex="-1"></a>              <span class="fu">aes</span>(<span class="at">x =</span> Date, <span class="at">y =</span> Pop_total<span class="sc">/</span><span class="dv">1000</span>, <span class="at">col =</span> Citizen)) <span class="sc">+</span></span>
<span id="cb6-63"><a href="pop-growth.html#cb6-63" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Danish population (2008 - 2020)&quot;</span>,</span>
<span id="cb6-64"><a href="pop-growth.html#cb6-64" aria-hidden="true" tabindex="-1"></a>         <span class="at">subtitle =</span> <span class="st">&quot;Total population&quot;</span>,</span>
<span id="cb6-65"><a href="pop-growth.html#cb6-65" aria-hidden="true" tabindex="-1"></a>         <span class="at">y =</span> <span class="st">&quot;x1000&quot;</span>) <span class="sc">+</span></span>
<span id="cb6-66"><a href="pop-growth.html#cb6-66" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_bw</span>() </span>
<span id="cb6-67"><a href="pop-growth.html#cb6-67" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb6-68"><a href="pop-growth.html#cb6-68" aria-hidden="true" tabindex="-1"></a>  p2 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb6-69"><a href="pop-growth.html#cb6-69" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_line</span>(<span class="at">data =</span> pop_ctzn_ttl_quarter,</span>
<span id="cb6-70"><a href="pop-growth.html#cb6-70" aria-hidden="true" tabindex="-1"></a>              <span class="fu">aes</span>(<span class="at">x =</span> Date, <span class="at">y =</span> pct_change_2008, <span class="at">col =</span> Citizen)) <span class="sc">+</span></span>
<span id="cb6-71"><a href="pop-growth.html#cb6-71" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;&quot;</span>,</span>
<span id="cb6-72"><a href="pop-growth.html#cb6-72" aria-hidden="true" tabindex="-1"></a>         <span class="at">subtitle =</span> <span class="st">&quot;Percentage of change&quot;</span>,</span>
<span id="cb6-73"><a href="pop-growth.html#cb6-73" aria-hidden="true" tabindex="-1"></a>         <span class="at">y =</span> <span class="st">&quot;%&quot;</span>) <span class="sc">+</span></span>
<span id="cb6-74"><a href="pop-growth.html#cb6-74" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_bw</span>() </span>
<span id="cb6-75"><a href="pop-growth.html#cb6-75" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb6-76"><a href="pop-growth.html#cb6-76" aria-hidden="true" tabindex="-1"></a>  p3 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb6-77"><a href="pop-growth.html#cb6-77" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_line</span>(<span class="at">data =</span> pop_ctzn_ttl_quarter,</span>
<span id="cb6-78"><a href="pop-growth.html#cb6-78" aria-hidden="true" tabindex="-1"></a>              <span class="fu">aes</span>(<span class="at">x =</span> Date,</span>
<span id="cb6-79"><a href="pop-growth.html#cb6-79" aria-hidden="true" tabindex="-1"></a>                  <span class="at">y =</span> Age_median,</span>
<span id="cb6-80"><a href="pop-growth.html#cb6-80" aria-hidden="true" tabindex="-1"></a>                  <span class="at">colour =</span> Citizen,</span>
<span id="cb6-81"><a href="pop-growth.html#cb6-81" aria-hidden="true" tabindex="-1"></a>                  <span class="at">linetype =</span> <span class="st">&quot;Median&quot;</span>)) <span class="sc">+</span></span>
<span id="cb6-82"><a href="pop-growth.html#cb6-82" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_line</span>(<span class="at">data =</span> pop_ctzn_ttl_quarter,</span>
<span id="cb6-83"><a href="pop-growth.html#cb6-83" aria-hidden="true" tabindex="-1"></a>              <span class="fu">aes</span>(<span class="at">x =</span> Date,</span>
<span id="cb6-84"><a href="pop-growth.html#cb6-84" aria-hidden="true" tabindex="-1"></a>                  <span class="at">y =</span> Age_mean,</span>
<span id="cb6-85"><a href="pop-growth.html#cb6-85" aria-hidden="true" tabindex="-1"></a>                  <span class="at">colour =</span> Citizen,</span>
<span id="cb6-86"><a href="pop-growth.html#cb6-86" aria-hidden="true" tabindex="-1"></a>                  <span class="at">linetype =</span> <span class="st">&quot;Mean&quot;</span>)) <span class="sc">+</span></span>
<span id="cb6-87"><a href="pop-growth.html#cb6-87" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_linetype_discrete</span>(<span class="at">name =</span> <span class="st">&quot;Age&quot;</span>) <span class="sc">+</span></span>
<span id="cb6-88"><a href="pop-growth.html#cb6-88" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;&quot;</span>,</span>
<span id="cb6-89"><a href="pop-growth.html#cb6-89" aria-hidden="true" tabindex="-1"></a>         <span class="at">subtitle =</span> <span class="st">&quot;Age variation&quot;</span>, </span>
<span id="cb6-90"><a href="pop-growth.html#cb6-90" aria-hidden="true" tabindex="-1"></a>         <span class="at">y =</span> <span class="st">&quot;Age&quot;</span>) <span class="sc">+</span></span>
<span id="cb6-91"><a href="pop-growth.html#cb6-91" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_bw</span>() </span>
<span id="cb6-92"><a href="pop-growth.html#cb6-92" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb6-93"><a href="pop-growth.html#cb6-93" aria-hidden="true" tabindex="-1"></a>  p1 <span class="sc">+</span> p2 <span class="sc">+</span> p3</span></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:fig-DK-pop"></span>
<img src="Housing_prices_book_files/figure-html/fig-DK-pop-1.png" alt="Danish population from 2008-2020" width="960" />
<p class="caption">
Figure 1.1: Danish population from 2008-2020
</p>
</div>
<p>The population pyramid also confirms this tendency (figure <a href="pop-growth.html#fig:fig-pop-pyramith">1.2</a>). We can see an increase of the percentage of the old dependency people (i.e. &gt; 65 years old), while the percentages of young people (&lt;18 years) has been reduced (lower birth rate with time). Foreign citizens have also increases, with the majority in the economically active region (i.e. 25-35 years old). The bulge in this region may indicate a period of immigration and/or a baby boom years before. The number of young people in this population has also increased, in comparison to the first day of 2008 (Is it due to a high birth rate among foreigner and/or because migrants came to Denmark with their family/children?). However, we see a narrow shape at the top of the curve, which indicate that low proportion of foreigners get older in Denmark. A narrow shape usually means high death rates in the population; however, it is not plausible in Denmark and it may be more reasonable to think that migrants return to their countries after retirement.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="pop-growth.html#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load population data by ancestry and age (5 years) in DK</span></span>
<span id="cb7-2"><a href="pop-growth.html#cb7-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-3"><a href="pop-growth.html#cb7-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Metadata table of interest (e.g. FOLK1C)</span></span>
<span id="cb7-4"><a href="pop-growth.html#cb7-4" aria-hidden="true" tabindex="-1"></a>  id_table <span class="ot">&lt;-</span> <span class="st">&quot;FOLK1C&quot;</span></span>
<span id="cb7-5"><a href="pop-growth.html#cb7-5" aria-hidden="true" tabindex="-1"></a>  var_pop <span class="ot">&lt;-</span> <span class="fu">get_table_metadata</span>(<span class="at">table_id =</span> id_table, <span class="at">variables_only =</span> <span class="cn">TRUE</span>)</span>
<span id="cb7-6"><a href="pop-growth.html#cb7-6" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb7-7"><a href="pop-growth.html#cb7-7" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Loop by quarter for getting the data </span></span>
<span id="cb7-8"><a href="pop-growth.html#cb7-8" aria-hidden="true" tabindex="-1"></a>    steps <span class="ot">&lt;-</span> <span class="cf">function</span>(quarter){</span>
<span id="cb7-9"><a href="pop-growth.html#cb7-9" aria-hidden="true" tabindex="-1"></a>      var_values <span class="ot">&lt;-</span> <span class="fu">list</span>(id_region,</span>
<span id="cb7-10"><a href="pop-growth.html#cb7-10" aria-hidden="true" tabindex="-1"></a>                         id_gender,</span>
<span id="cb7-11"><a href="pop-growth.html#cb7-11" aria-hidden="true" tabindex="-1"></a>                         id_age,</span>
<span id="cb7-12"><a href="pop-growth.html#cb7-12" aria-hidden="true" tabindex="-1"></a>                         id_ancestry,</span>
<span id="cb7-13"><a href="pop-growth.html#cb7-13" aria-hidden="true" tabindex="-1"></a>                         id_citizen,</span>
<span id="cb7-14"><a href="pop-growth.html#cb7-14" aria-hidden="true" tabindex="-1"></a>                         quarter)</span>
<span id="cb7-15"><a href="pop-growth.html#cb7-15" aria-hidden="true" tabindex="-1"></a>      var_input <span class="ot">&lt;-</span> purrr<span class="sc">::</span><span class="fu">map2</span>(<span class="at">.x =</span> var_codes,</span>
<span id="cb7-16"><a href="pop-growth.html#cb7-16" aria-hidden="true" tabindex="-1"></a>                               <span class="at">.y =</span> var_values,</span>
<span id="cb7-17"><a href="pop-growth.html#cb7-17" aria-hidden="true" tabindex="-1"></a>                               <span class="at">.f =</span> <span class="sc">~</span><span class="fu">list</span>(<span class="at">code =</span> .x, <span class="at">values =</span> .y))</span>
<span id="cb7-18"><a href="pop-growth.html#cb7-18" aria-hidden="true" tabindex="-1"></a>      <span class="fu">get_data</span>(id_table, <span class="at">variables =</span> var_input)</span>
<span id="cb7-19"><a href="pop-growth.html#cb7-19" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb7-20"><a href="pop-growth.html#cb7-20" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb7-21"><a href="pop-growth.html#cb7-21" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Codes for var_input</span></span>
<span id="cb7-22"><a href="pop-growth.html#cb7-22" aria-hidden="true" tabindex="-1"></a>  var_codes <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;OMRÅDE&quot;</span>, <span class="st">&quot;KØN&quot;</span>, <span class="st">&quot;ALDER&quot;</span>, <span class="st">&quot;HERKOMST&quot;</span>, <span class="st">&quot;IELAND&quot;</span>, <span class="st">&quot;Tid&quot;</span>)</span>
<span id="cb7-23"><a href="pop-growth.html#cb7-23" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb7-24"><a href="pop-growth.html#cb7-24" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Values for var_input</span></span>
<span id="cb7-25"><a href="pop-growth.html#cb7-25" aria-hidden="true" tabindex="-1"></a>  <span class="do">## All regions</span></span>
<span id="cb7-26"><a href="pop-growth.html#cb7-26" aria-hidden="true" tabindex="-1"></a>  id_region <span class="ot">&lt;-</span> <span class="st">&quot;000&quot;</span></span>
<span id="cb7-27"><a href="pop-growth.html#cb7-27" aria-hidden="true" tabindex="-1"></a>  <span class="do">## Gender: Men/Women</span></span>
<span id="cb7-28"><a href="pop-growth.html#cb7-28" aria-hidden="true" tabindex="-1"></a>  id_gender <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>)</span>
<span id="cb7-29"><a href="pop-growth.html#cb7-29" aria-hidden="true" tabindex="-1"></a>  <span class="do">## Age (remove total)</span></span>
<span id="cb7-30"><a href="pop-growth.html#cb7-30" aria-hidden="true" tabindex="-1"></a>  id_age <span class="ot">&lt;-</span> <span class="fu">subset</span>(var_pop<span class="sc">$</span>values[[<span class="dv">3</span>]], id <span class="sc">!=</span> <span class="st">&quot;IALT&quot;</span>)<span class="sc">$</span>id</span>
<span id="cb7-31"><a href="pop-growth.html#cb7-31" aria-hidden="true" tabindex="-1"></a>  <span class="do">## Ancestry</span></span>
<span id="cb7-32"><a href="pop-growth.html#cb7-32" aria-hidden="true" tabindex="-1"></a>  id_ancestry <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">5</span>, <span class="dv">4</span>, <span class="dv">3</span>)</span>
<span id="cb7-33"><a href="pop-growth.html#cb7-33" aria-hidden="true" tabindex="-1"></a>  <span class="do">## country of origin (remove total)</span></span>
<span id="cb7-34"><a href="pop-growth.html#cb7-34" aria-hidden="true" tabindex="-1"></a>  id_citizen <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(var_pop<span class="sc">$</span>values[[<span class="dv">5</span>]]<span class="sc">$</span>id)</span>
<span id="cb7-35"><a href="pop-growth.html#cb7-35" aria-hidden="true" tabindex="-1"></a>  id_citizen <span class="ot">&lt;-</span> id_citizen[id_citizen <span class="sc">&gt;</span> <span class="dv">0</span>]</span>
<span id="cb7-36"><a href="pop-growth.html#cb7-36" aria-hidden="true" tabindex="-1"></a>  <span class="do">## Quarters (e.g. 2008-Q1 and 2019-Q1)</span></span>
<span id="cb7-37"><a href="pop-growth.html#cb7-37" aria-hidden="true" tabindex="-1"></a>  id_quarter <span class="ot">&lt;-</span> var_pop<span class="sc">$</span>values[[<span class="dv">6</span>]]<span class="sc">$</span>id[<span class="dv">1</span><span class="sc">:</span><span class="dv">45</span>]</span>
<span id="cb7-38"><a href="pop-growth.html#cb7-38" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb7-39"><a href="pop-growth.html#cb7-39" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Get data (in parallel)</span></span>
<span id="cb7-40"><a href="pop-growth.html#cb7-40" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plan</span>(multisession, <span class="at">workers =</span> <span class="dv">7</span>)</span>
<span id="cb7-41"><a href="pop-growth.html#cb7-41" aria-hidden="true" tabindex="-1"></a>  pop_DK <span class="ot">&lt;-</span> id_quarter <span class="sc">%&gt;%</span></span>
<span id="cb7-42"><a href="pop-growth.html#cb7-42" aria-hidden="true" tabindex="-1"></a>    <span class="fu">future_map_dfr</span>(steps) <span class="sc">%&gt;%</span> </span>
<span id="cb7-43"><a href="pop-growth.html#cb7-43" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(INDHOLD <span class="sc">&gt;</span> <span class="dv">0</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb7-44"><a href="pop-growth.html#cb7-44" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Translate column names to English</span></span>
<span id="cb7-45"><a href="pop-growth.html#cb7-45" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rename</span>(<span class="at">region =</span> OMRÅDE,</span>
<span id="cb7-46"><a href="pop-growth.html#cb7-46" aria-hidden="true" tabindex="-1"></a>           <span class="at">gender =</span> KØN,</span>
<span id="cb7-47"><a href="pop-growth.html#cb7-47" aria-hidden="true" tabindex="-1"></a>           <span class="at">age =</span> ALDER,</span>
<span id="cb7-48"><a href="pop-growth.html#cb7-48" aria-hidden="true" tabindex="-1"></a>           <span class="at">ancestry =</span> HERKOMST,</span>
<span id="cb7-49"><a href="pop-growth.html#cb7-49" aria-hidden="true" tabindex="-1"></a>           <span class="at">origin =</span> IELAND,</span>
<span id="cb7-50"><a href="pop-growth.html#cb7-50" aria-hidden="true" tabindex="-1"></a>           <span class="at">date =</span> TID, </span>
<span id="cb7-51"><a href="pop-growth.html#cb7-51" aria-hidden="true" tabindex="-1"></a>           <span class="at">pop =</span> INDHOLD) <span class="sc">%&gt;%</span> </span>
<span id="cb7-52"><a href="pop-growth.html#cb7-52" aria-hidden="true" tabindex="-1"></a>    <span class="co"># First day of the quarter</span></span>
<span id="cb7-53"><a href="pop-growth.html#cb7-53" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">date =</span> <span class="fu">gsub</span>(<span class="st">&quot;Q&quot;</span>, <span class="st">&quot;&quot;</span>, date),</span>
<span id="cb7-54"><a href="pop-growth.html#cb7-54" aria-hidden="true" tabindex="-1"></a>           <span class="at">date =</span> <span class="fu">as_date_yq</span>(<span class="fu">as.integer</span>(date)),</span>
<span id="cb7-55"><a href="pop-growth.html#cb7-55" aria-hidden="true" tabindex="-1"></a>           <span class="at">date =</span> <span class="fu">first_of_quarter</span>(date)) <span class="sc">%&gt;%</span> </span>
<span id="cb7-56"><a href="pop-growth.html#cb7-56" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">region =</span> <span class="fu">ifelse</span>(region <span class="sc">==</span> <span class="st">&quot;All Denmark&quot;</span>,</span>
<span id="cb7-57"><a href="pop-growth.html#cb7-57" aria-hidden="true" tabindex="-1"></a>                           <span class="st">&quot;Denmark&quot;</span>,</span>
<span id="cb7-58"><a href="pop-growth.html#cb7-58" aria-hidden="true" tabindex="-1"></a>                           <span class="cn">NA</span>))  <span class="sc">%&gt;%</span> </span>
<span id="cb7-59"><a href="pop-growth.html#cb7-59" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Format ancestry </span></span>
<span id="cb7-60"><a href="pop-growth.html#cb7-60" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">ancestry =</span> <span class="fu">ifelse</span>(ancestry <span class="sc">==</span> <span class="st">&quot;Persons of Danish origin&quot;</span>,</span>
<span id="cb7-61"><a href="pop-growth.html#cb7-61" aria-hidden="true" tabindex="-1"></a>                             <span class="st">&quot;Danish&quot;</span>,</span>
<span id="cb7-62"><a href="pop-growth.html#cb7-62" aria-hidden="true" tabindex="-1"></a>                             ancestry),</span>
<span id="cb7-63"><a href="pop-growth.html#cb7-63" aria-hidden="true" tabindex="-1"></a>           <span class="at">ancestry =</span> <span class="fu">factor</span>(ancestry), </span>
<span id="cb7-64"><a href="pop-growth.html#cb7-64" aria-hidden="true" tabindex="-1"></a>           <span class="at">ancestry =</span> <span class="fu">fct_relevel</span>(ancestry, <span class="st">&quot;Immigrants&quot;</span>, <span class="at">after =</span> <span class="dv">1</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb7-65"><a href="pop-growth.html#cb7-65" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Format &quot;age&quot;    </span></span>
<span id="cb7-66"><a href="pop-growth.html#cb7-66" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">age =</span> <span class="fu">ifelse</span>(age <span class="sc">==</span> <span class="st">&quot;100 years and over&quot;</span>, <span class="st">&quot;100OV&quot;</span>, age),</span>
<span id="cb7-67"><a href="pop-growth.html#cb7-67" aria-hidden="true" tabindex="-1"></a>           <span class="at">age =</span> <span class="fu">gsub</span>(<span class="st">&quot; years&quot;</span>, <span class="st">&quot;&quot;</span>, age),</span>
<span id="cb7-68"><a href="pop-growth.html#cb7-68" aria-hidden="true" tabindex="-1"></a>           <span class="at">age =</span> <span class="fu">factor</span>(age, <span class="at">levels =</span> id_age)) <span class="sc">%&gt;%</span> </span>
<span id="cb7-69"><a href="pop-growth.html#cb7-69" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Calculate population in percentage</span></span>
<span id="cb7-70"><a href="pop-growth.html#cb7-70" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(date) <span class="sc">%&gt;%</span> </span>
<span id="cb7-71"><a href="pop-growth.html#cb7-71" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">pop_per =</span> <span class="dv">100</span> <span class="sc">*</span> pop <span class="sc">/</span> <span class="fu">sum</span>(pop)) <span class="sc">%&gt;%</span> </span>
<span id="cb7-72"><a href="pop-growth.html#cb7-72" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ungroup</span>()</span>
<span id="cb7-73"><a href="pop-growth.html#cb7-73" aria-hidden="true" tabindex="-1"></a>    <span class="fu">plan</span>(<span class="st">&quot;default&quot;</span>)</span>
<span id="cb7-74"><a href="pop-growth.html#cb7-74" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb7-75"><a href="pop-growth.html#cb7-75" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot population pyramid </span></span>
<span id="cb7-76"><a href="pop-growth.html#cb7-76" aria-hidden="true" tabindex="-1"></a>  brks_y <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="sc">-</span><span class="dv">4</span>, <span class="dv">4</span>, <span class="dv">1</span>)</span>
<span id="cb7-77"><a href="pop-growth.html#cb7-77" aria-hidden="true" tabindex="-1"></a>  lmts_y <span class="ot">=</span> <span class="fu">c</span>(<span class="fu">min</span>(brks_y), <span class="fu">max</span>(brks_y))</span>
<span id="cb7-78"><a href="pop-growth.html#cb7-78" aria-hidden="true" tabindex="-1"></a>  lbls_y <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="fu">as.character</span>(<span class="fu">abs</span>(brks_y)), <span class="st">&quot;%&quot;</span>)</span>
<span id="cb7-79"><a href="pop-growth.html#cb7-79" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb7-80"><a href="pop-growth.html#cb7-80" aria-hidden="true" tabindex="-1"></a>  pop_DK <span class="sc">%&gt;%</span> </span>
<span id="cb7-81"><a href="pop-growth.html#cb7-81" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(date <span class="sc">==</span> <span class="st">&quot;2008-01-01&quot;</span> <span class="sc">|</span> date <span class="sc">==</span> <span class="st">&quot;2019-01-01&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb7-82"><a href="pop-growth.html#cb7-82" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggpyramid</span>(<span class="at">values =</span> pop_per, <span class="at">fill =</span> ancestry) <span class="sc">+</span></span>
<span id="cb7-83"><a href="pop-growth.html#cb7-83" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_manual</span>(<span class="at">name =</span> <span class="st">&quot;Ancestry&quot;</span>,</span>
<span id="cb7-84"><a href="pop-growth.html#cb7-84" aria-hidden="true" tabindex="-1"></a>                      <span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;#0072B2&quot;</span>, <span class="st">&quot;#F0E442&quot;</span>, <span class="st">&quot;#D55E00&quot;</span>)) <span class="sc">+</span></span>
<span id="cb7-85"><a href="pop-growth.html#cb7-85" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_y_continuous</span>(<span class="at">name =</span> <span class="cn">NULL</span>,</span>
<span id="cb7-86"><a href="pop-growth.html#cb7-86" aria-hidden="true" tabindex="-1"></a>                       <span class="at">breaks =</span> brks_y,</span>
<span id="cb7-87"><a href="pop-growth.html#cb7-87" aria-hidden="true" tabindex="-1"></a>                       <span class="at">labels =</span> lbls_y,</span>
<span id="cb7-88"><a href="pop-growth.html#cb7-88" aria-hidden="true" tabindex="-1"></a>                       <span class="at">limits =</span> lmts_y) <span class="sc">+</span></span>
<span id="cb7-89"><a href="pop-growth.html#cb7-89" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">caption =</span> <span class="st">&quot;Source: Statistics Denmark&quot;</span>) <span class="sc">+</span> </span>
<span id="cb7-90"><a href="pop-growth.html#cb7-90" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_segment</span>(<span class="at">data =</span> <span class="fu">filter</span>(pop_DK,</span>
<span id="cb7-91"><a href="pop-growth.html#cb7-91" aria-hidden="true" tabindex="-1"></a>                               date <span class="sc">==</span> <span class="st">&quot;2008-01-01&quot;</span> <span class="sc">|</span> date <span class="sc">==</span> <span class="st">&quot;2019-01-01&quot;</span>),</span>
<span id="cb7-92"><a href="pop-growth.html#cb7-92" aria-hidden="true" tabindex="-1"></a>                 <span class="fu">aes</span>(<span class="at">x =</span> <span class="dv">4</span>, <span class="at">xend =</span> <span class="dv">4</span>,</span>
<span id="cb7-93"><a href="pop-growth.html#cb7-93" aria-hidden="true" tabindex="-1"></a>                     <span class="at">y =</span> <span class="sc">-</span><span class="dv">4</span>, <span class="at">yend =</span> <span class="dv">4</span>),</span>
<span id="cb7-94"><a href="pop-growth.html#cb7-94" aria-hidden="true" tabindex="-1"></a>                 <span class="at">linetype =</span> <span class="st">&quot;dashed&quot;</span>) <span class="sc">+</span></span>
<span id="cb7-95"><a href="pop-growth.html#cb7-95" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_segment</span>(<span class="at">data =</span> <span class="fu">filter</span>(pop_DK,</span>
<span id="cb7-96"><a href="pop-growth.html#cb7-96" aria-hidden="true" tabindex="-1"></a>                               date <span class="sc">==</span> <span class="st">&quot;2008-01-01&quot;</span> <span class="sc">|</span> date <span class="sc">==</span> <span class="st">&quot;2019-01-01&quot;</span>),</span>
<span id="cb7-97"><a href="pop-growth.html#cb7-97" aria-hidden="true" tabindex="-1"></a>                 <span class="fu">aes</span>(<span class="at">x =</span> <span class="fl">13.5</span>, <span class="at">xend =</span> <span class="fl">13.5</span>,</span>
<span id="cb7-98"><a href="pop-growth.html#cb7-98" aria-hidden="true" tabindex="-1"></a>                     <span class="at">y =</span> <span class="sc">-</span><span class="dv">4</span>, <span class="at">yend =</span> <span class="dv">4</span>),</span>
<span id="cb7-99"><a href="pop-growth.html#cb7-99" aria-hidden="true" tabindex="-1"></a>                 <span class="at">linetype =</span> <span class="st">&quot;dashed&quot;</span>) <span class="sc">+</span></span>
<span id="cb7-100"><a href="pop-growth.html#cb7-100" aria-hidden="true" tabindex="-1"></a>    ggplot2<span class="sc">::</span><span class="fu">annotate</span>(<span class="at">geom =</span> <span class="st">&quot;text&quot;</span>,</span>
<span id="cb7-101"><a href="pop-growth.html#cb7-101" aria-hidden="true" tabindex="-1"></a>             <span class="at">y =</span> <span class="fu">c</span>(<span class="dv">2</span> , <span class="dv">2</span>),</span>
<span id="cb7-102"><a href="pop-growth.html#cb7-102" aria-hidden="true" tabindex="-1"></a>             <span class="at">x =</span> <span class="fl">20.5</span>,</span>
<span id="cb7-103"><a href="pop-growth.html#cb7-103" aria-hidden="true" tabindex="-1"></a>             <span class="at">label =</span> <span class="st">&quot;Women&quot;</span>,</span>
<span id="cb7-104"><a href="pop-growth.html#cb7-104" aria-hidden="true" tabindex="-1"></a>             <span class="at">fontface =</span> <span class="st">&quot;bold&quot;</span>,</span>
<span id="cb7-105"><a href="pop-growth.html#cb7-105" aria-hidden="true" tabindex="-1"></a>             <span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb7-106"><a href="pop-growth.html#cb7-106" aria-hidden="true" tabindex="-1"></a>    ggplot2<span class="sc">:::</span><span class="fu">annotate</span>(<span class="at">geom =</span> <span class="st">&quot;text&quot;</span>,</span>
<span id="cb7-107"><a href="pop-growth.html#cb7-107" aria-hidden="true" tabindex="-1"></a>             <span class="at">y =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="dv">2</span>,<span class="sc">-</span><span class="dv">2</span>),</span>
<span id="cb7-108"><a href="pop-growth.html#cb7-108" aria-hidden="true" tabindex="-1"></a>             <span class="at">x =</span> <span class="fl">20.5</span>,</span>
<span id="cb7-109"><a href="pop-growth.html#cb7-109" aria-hidden="true" tabindex="-1"></a>             <span class="at">label =</span> <span class="st">&quot;Men&quot;</span>,</span>
<span id="cb7-110"><a href="pop-growth.html#cb7-110" aria-hidden="true" tabindex="-1"></a>             <span class="at">fontface =</span> <span class="st">&quot;bold&quot;</span>,</span>
<span id="cb7-111"><a href="pop-growth.html#cb7-111" aria-hidden="true" tabindex="-1"></a>             <span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb7-112"><a href="pop-growth.html#cb7-112" aria-hidden="true" tabindex="-1"></a>    <span class="fu">facet_wrap</span>(<span class="sc">~</span>date) <span class="sc">+</span></span>
<span id="cb7-113"><a href="pop-growth.html#cb7-113" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_bw</span>() </span></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:fig-pop-pyramith"></span>
<img src="Housing_prices_book_files/figure-html/fig-pop-pyramith-1.png" alt="Population pyramith of Denmark" width="960" />
<p class="caption">
Figure 1.2: Population pyramith of Denmark
</p>
</div>
<p>The urban areas (e.g. Copenhagn, Aalborg, Aarhus, Odese) have gained population from 2008 to 2020, while the rural regions have loss them (e.g. Lolland, Lemvig). It seems also that there are some influence from big cities, and people are moving from the rural areas into (or close to) the cities (figure <a href="pop-growth.html#fig:fig-pop-growth-total">1.3</a>). However, we do not see the same patter between the Danes and Immigrants and the number of immigrants and their descendants has increased all aver the country (figure <a href="pop-growth.html#fig:fig-pop-growth-ancestry">1.4</a>), alleviating the population loss on rural areas.</p>
<p>To what degree migrants and their descendants make up for the population loss in Danes without a migrant background over time? e.g. Do the Danes leave first and the migrants fill the “gap?”
The majority of immigrants however live in big cities (Figure 5). Are there differences between migrants in urban-rural areas (e.g. skilled/non-skilled migrants due to job marked)?</p>
<p>Are the Danish people in rural areas (red areas) older (e.g. young people are moving to the cities but elderly people stay there)? Are immigrants however young workers?</p>
<p>Are these areas loosing population because low birth rates/high death? Low in-migration?</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="pop-growth.html#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Municipalities (get from DAGI)</span></span>
<span id="cb8-2"><a href="pop-growth.html#cb8-2" aria-hidden="true" tabindex="-1"></a>  muni_link <span class="ot">&lt;-</span> <span class="fu">paste</span>(loc_dir,</span>
<span id="cb8-3"><a href="pop-growth.html#cb8-3" aria-hidden="true" tabindex="-1"></a>                        <span class="st">&quot;DAGIREF_SHAPE_UTM32-EUREF89/ADM&quot;</span>,</span>
<span id="cb8-4"><a href="pop-growth.html#cb8-4" aria-hidden="true" tabindex="-1"></a>                        <span class="st">&quot;KOMMUNE.shp&quot;</span>,</span>
<span id="cb8-5"><a href="pop-growth.html#cb8-5" aria-hidden="true" tabindex="-1"></a>                        <span class="at">sep =</span> <span class="st">&quot;/&quot;</span>)</span>
<span id="cb8-6"><a href="pop-growth.html#cb8-6" aria-hidden="true" tabindex="-1"></a>  dk_muni  <span class="ot">&lt;-</span> <span class="fu">read_sf</span>(muni_link) <span class="sc">%&gt;%</span></span>
<span id="cb8-7"><a href="pop-growth.html#cb8-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">st_zm</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb8-8"><a href="pop-growth.html#cb8-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">st_transform</span>(<span class="at">crs =</span> <span class="st">&quot;EPSG:25832&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb8-9"><a href="pop-growth.html#cb8-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(KOMKODE, KOMNAVN) <span class="sc">%&gt;%</span> </span>
<span id="cb8-10"><a href="pop-growth.html#cb8-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rename</span>(<span class="at">muni_id =</span> KOMKODE,</span>
<span id="cb8-11"><a href="pop-growth.html#cb8-11" aria-hidden="true" tabindex="-1"></a>           <span class="at">muni_name =</span> KOMNAVN) <span class="sc">%&gt;%</span> </span>
<span id="cb8-12"><a href="pop-growth.html#cb8-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(muni_id, muni_name) <span class="sc">%&gt;%</span></span>
<span id="cb8-13"><a href="pop-growth.html#cb8-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarise</span>(<span class="at">geometry =</span> sf<span class="sc">::</span><span class="fu">st_union</span>(geometry)) <span class="sc">%&gt;%</span></span>
<span id="cb8-14"><a href="pop-growth.html#cb8-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ungroup</span>() </span>
<span id="cb8-15"><a href="pop-growth.html#cb8-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-16"><a href="pop-growth.html#cb8-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Big cities/urban areas</span></span>
<span id="cb8-17"><a href="pop-growth.html#cb8-17" aria-hidden="true" tabindex="-1"></a>  big_cities <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;København&quot;</span>, <span class="st">&quot;Aarhus&quot;</span>, <span class="st">&quot;Odense&quot;</span>, <span class="st">&quot;Aalborg&quot;</span>)</span>
<span id="cb8-18"><a href="pop-growth.html#cb8-18" aria-hidden="true" tabindex="-1"></a>  big_cities <span class="ot">&lt;-</span> dk_muni <span class="sc">%&gt;%</span> <span class="fu">filter</span>(muni_name <span class="sc">%in%</span> big_cities)</span></code></pre></div>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="pop-growth.html#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load population data by ancestry and municipalities </span></span>
<span id="cb9-2"><a href="pop-growth.html#cb9-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-3"><a href="pop-growth.html#cb9-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Metadata table of interest (e.g. FOLK1C) </span></span>
<span id="cb9-4"><a href="pop-growth.html#cb9-4" aria-hidden="true" tabindex="-1"></a>  id_table <span class="ot">&lt;-</span> <span class="st">&quot;FOLK1C&quot;</span></span>
<span id="cb9-5"><a href="pop-growth.html#cb9-5" aria-hidden="true" tabindex="-1"></a>  var_pop <span class="ot">&lt;-</span> <span class="fu">get_table_metadata</span>(<span class="at">table_id =</span> id_table, <span class="at">variables_only =</span> <span class="cn">TRUE</span>)</span>
<span id="cb9-6"><a href="pop-growth.html#cb9-6" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb9-7"><a href="pop-growth.html#cb9-7" aria-hidden="true" tabindex="-1"></a>  <span class="co"># loop by quarter for getting the data </span></span>
<span id="cb9-8"><a href="pop-growth.html#cb9-8" aria-hidden="true" tabindex="-1"></a>  steps <span class="ot">&lt;-</span> <span class="cf">function</span>(quarter){</span>
<span id="cb9-9"><a href="pop-growth.html#cb9-9" aria-hidden="true" tabindex="-1"></a>    var_values <span class="ot">&lt;-</span> <span class="fu">list</span>(id_region,</span>
<span id="cb9-10"><a href="pop-growth.html#cb9-10" aria-hidden="true" tabindex="-1"></a>                       id_ancestry,</span>
<span id="cb9-11"><a href="pop-growth.html#cb9-11" aria-hidden="true" tabindex="-1"></a>                       quarter)</span>
<span id="cb9-12"><a href="pop-growth.html#cb9-12" aria-hidden="true" tabindex="-1"></a>    var_input <span class="ot">&lt;-</span> purrr<span class="sc">::</span><span class="fu">map2</span>(<span class="at">.x =</span> var_codes,</span>
<span id="cb9-13"><a href="pop-growth.html#cb9-13" aria-hidden="true" tabindex="-1"></a>                             <span class="at">.y =</span> var_values,</span>
<span id="cb9-14"><a href="pop-growth.html#cb9-14" aria-hidden="true" tabindex="-1"></a>                             <span class="at">.f =</span> <span class="sc">~</span><span class="fu">list</span>(<span class="at">code =</span> .x, <span class="at">values =</span> .y))</span>
<span id="cb9-15"><a href="pop-growth.html#cb9-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">get_data</span>(id_table, <span class="at">variables =</span> var_input)</span>
<span id="cb9-16"><a href="pop-growth.html#cb9-16" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb9-17"><a href="pop-growth.html#cb9-17" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb9-18"><a href="pop-growth.html#cb9-18" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Codes for var_input</span></span>
<span id="cb9-19"><a href="pop-growth.html#cb9-19" aria-hidden="true" tabindex="-1"></a>  var_codes <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;OMRÅDE&quot;</span>, <span class="st">&quot;HERKOMST&quot;</span>, <span class="st">&quot;Tid&quot;</span>)</span>
<span id="cb9-20"><a href="pop-growth.html#cb9-20" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb9-21"><a href="pop-growth.html#cb9-21" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Values for var_input</span></span>
<span id="cb9-22"><a href="pop-growth.html#cb9-22" aria-hidden="true" tabindex="-1"></a>  <span class="do">## Region: Denmark</span></span>
<span id="cb9-23"><a href="pop-growth.html#cb9-23" aria-hidden="true" tabindex="-1"></a>  id_region <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(var_pop<span class="sc">$</span>values[[<span class="dv">1</span>]]<span class="sc">$</span>id)</span>
<span id="cb9-24"><a href="pop-growth.html#cb9-24" aria-hidden="true" tabindex="-1"></a>  id_region <span class="ot">&lt;-</span> id_region[id_region <span class="sc">&gt;</span> <span class="dv">100</span>]</span>
<span id="cb9-25"><a href="pop-growth.html#cb9-25" aria-hidden="true" tabindex="-1"></a>  <span class="do">## Ancestry</span></span>
<span id="cb9-26"><a href="pop-growth.html#cb9-26" aria-hidden="true" tabindex="-1"></a>  id_ancestry <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb9-27"><a href="pop-growth.html#cb9-27" aria-hidden="true" tabindex="-1"></a>  <span class="do">## Quarters</span></span>
<span id="cb9-28"><a href="pop-growth.html#cb9-28" aria-hidden="true" tabindex="-1"></a>  id_quarter <span class="ot">&lt;-</span> var_pop<span class="sc">$</span>values[[<span class="dv">6</span>]]<span class="sc">$</span>id[<span class="dv">1</span><span class="sc">:</span><span class="dv">45</span>]   <span class="co"># Select all quarters</span></span>
<span id="cb9-29"><a href="pop-growth.html#cb9-29" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Parallel process with {future}</span></span>
<span id="cb9-30"><a href="pop-growth.html#cb9-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plan</span>(multisession)  </span>
<span id="cb9-31"><a href="pop-growth.html#cb9-31" aria-hidden="true" tabindex="-1"></a>  pop_muni <span class="ot">&lt;-</span> id_quarter <span class="sc">%&gt;%</span> <span class="fu">future_map_dfr</span>(steps)</span>
<span id="cb9-32"><a href="pop-growth.html#cb9-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plan</span>(<span class="st">&quot;default&quot;</span>)</span>
<span id="cb9-33"><a href="pop-growth.html#cb9-33" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb9-34"><a href="pop-growth.html#cb9-34" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Clean column names and format some data </span></span>
<span id="cb9-35"><a href="pop-growth.html#cb9-35" aria-hidden="true" tabindex="-1"></a>  pop_muni <span class="ot">&lt;-</span> pop_muni <span class="sc">%&gt;%</span> </span>
<span id="cb9-36"><a href="pop-growth.html#cb9-36" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Translate column names into English</span></span>
<span id="cb9-37"><a href="pop-growth.html#cb9-37" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rename</span>(<span class="at">muni_name =</span> OMRÅDE,</span>
<span id="cb9-38"><a href="pop-growth.html#cb9-38" aria-hidden="true" tabindex="-1"></a>           <span class="at">ancestry =</span> HERKOMST,</span>
<span id="cb9-39"><a href="pop-growth.html#cb9-39" aria-hidden="true" tabindex="-1"></a>           <span class="at">date =</span> TID, </span>
<span id="cb9-40"><a href="pop-growth.html#cb9-40" aria-hidden="true" tabindex="-1"></a>           <span class="at">pop =</span> INDHOLD) <span class="sc">%&gt;%</span> </span>
<span id="cb9-41"><a href="pop-growth.html#cb9-41" aria-hidden="true" tabindex="-1"></a>    <span class="co"># First day of the quarter</span></span>
<span id="cb9-42"><a href="pop-growth.html#cb9-42" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">date =</span> <span class="fu">gsub</span>(<span class="st">&quot;Q&quot;</span>, <span class="st">&quot;&quot;</span>, date),</span>
<span id="cb9-43"><a href="pop-growth.html#cb9-43" aria-hidden="true" tabindex="-1"></a>           <span class="at">date =</span> <span class="fu">as_date_yq</span>(<span class="fu">as.integer</span>(date)),</span>
<span id="cb9-44"><a href="pop-growth.html#cb9-44" aria-hidden="true" tabindex="-1"></a>           <span class="at">date =</span> <span class="fu">first_of_quarter</span>(date)) <span class="sc">%&gt;%</span> </span>
<span id="cb9-45"><a href="pop-growth.html#cb9-45" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Translate København (muni_name) and short Danes in ancestry</span></span>
<span id="cb9-46"><a href="pop-growth.html#cb9-46" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">muni_name =</span> <span class="fu">gsub</span>(<span class="st">&quot;Copenhagen&quot;</span>, <span class="st">&quot;København&quot;</span>, muni_name),</span>
<span id="cb9-47"><a href="pop-growth.html#cb9-47" aria-hidden="true" tabindex="-1"></a>           <span class="at">ancestry =</span> <span class="fu">ifelse</span>(ancestry <span class="sc">==</span> <span class="st">&quot;Persons of Danish origin&quot;</span>,</span>
<span id="cb9-48"><a href="pop-growth.html#cb9-48" aria-hidden="true" tabindex="-1"></a>                             <span class="st">&quot;Danish&quot;</span>,</span>
<span id="cb9-49"><a href="pop-growth.html#cb9-49" aria-hidden="true" tabindex="-1"></a>                             ancestry)) <span class="sc">%&gt;%</span> </span>
<span id="cb9-50"><a href="pop-growth.html#cb9-50" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Short municipalities by Total population in 20208-Q1</span></span>
<span id="cb9-51"><a href="pop-growth.html#cb9-51" aria-hidden="true" tabindex="-1"></a>    <span class="fu">pivot_wider</span>(<span class="fu">c</span>(muni_name, date),</span>
<span id="cb9-52"><a href="pop-growth.html#cb9-52" aria-hidden="true" tabindex="-1"></a>                <span class="at">names_from =</span> ancestry,</span>
<span id="cb9-53"><a href="pop-growth.html#cb9-53" aria-hidden="true" tabindex="-1"></a>                <span class="at">values_from =</span> pop) <span class="sc">%&gt;%</span> </span>
<span id="cb9-54"><a href="pop-growth.html#cb9-54" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">muni_name =</span> <span class="fu">factor</span>(muni_name), </span>
<span id="cb9-55"><a href="pop-growth.html#cb9-55" aria-hidden="true" tabindex="-1"></a>           <span class="at">muni_name =</span> <span class="fu">fct_reorder2</span>(muni_name, date, Total, <span class="at">.fun =</span> first2)) <span class="sc">%&gt;%</span> </span>
<span id="cb9-56"><a href="pop-growth.html#cb9-56" aria-hidden="true" tabindex="-1"></a>    <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="fu">c</span>(Total, Danish, Immigrants, Descendant),</span>
<span id="cb9-57"><a href="pop-growth.html#cb9-57" aria-hidden="true" tabindex="-1"></a>                 <span class="at">names_to =</span> <span class="st">&quot;ancestry&quot;</span>,</span>
<span id="cb9-58"><a href="pop-growth.html#cb9-58" aria-hidden="true" tabindex="-1"></a>                 <span class="at">values_to =</span> <span class="st">&quot;pop&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb9-59"><a href="pop-growth.html#cb9-59" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Merge Immigrants and Descendants</span></span>
<span id="cb9-60"><a href="pop-growth.html#cb9-60" aria-hidden="true" tabindex="-1"></a>    <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> ancestry, <span class="at">values_from =</span> pop) <span class="sc">%&gt;%</span> </span>
<span id="cb9-61"><a href="pop-growth.html#cb9-61" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">Foreign =</span> Immigrants <span class="sc">+</span> Descendant) <span class="sc">%&gt;%</span> </span>
<span id="cb9-62"><a href="pop-growth.html#cb9-62" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(<span class="sc">-</span>Immigrants, <span class="sc">-</span>Descendant) <span class="sc">%&gt;%</span> </span>
<span id="cb9-63"><a href="pop-growth.html#cb9-63" aria-hidden="true" tabindex="-1"></a>    <span class="fu">pivot_longer</span>(<span class="sc">-</span><span class="fu">c</span>(muni_name, date),</span>
<span id="cb9-64"><a href="pop-growth.html#cb9-64" aria-hidden="true" tabindex="-1"></a>                 <span class="at">names_to =</span> <span class="st">&quot;ancestry&quot;</span>,</span>
<span id="cb9-65"><a href="pop-growth.html#cb9-65" aria-hidden="true" tabindex="-1"></a>                 <span class="at">values_to =</span> <span class="st">&quot;pop&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb9-66"><a href="pop-growth.html#cb9-66" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Sort ancestry </span></span>
<span id="cb9-67"><a href="pop-growth.html#cb9-67" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">ancestry =</span> <span class="fu">factor</span>(ancestry, </span>
<span id="cb9-68"><a href="pop-growth.html#cb9-68" aria-hidden="true" tabindex="-1"></a>                             <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">&quot;Danish&quot;</span>,</span>
<span id="cb9-69"><a href="pop-growth.html#cb9-69" aria-hidden="true" tabindex="-1"></a>                                        <span class="st">&quot;Foreign&quot;</span>,</span>
<span id="cb9-70"><a href="pop-growth.html#cb9-70" aria-hidden="true" tabindex="-1"></a>                                        <span class="st">&quot;Total&quot;</span>),</span>
<span id="cb9-71"><a href="pop-growth.html#cb9-71" aria-hidden="true" tabindex="-1"></a>                             <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">&quot;Danish&quot;</span>,</span>
<span id="cb9-72"><a href="pop-growth.html#cb9-72" aria-hidden="true" tabindex="-1"></a>                                        <span class="st">&quot;Foreign (Immigrants + Descendant)&quot;</span>,</span>
<span id="cb9-73"><a href="pop-growth.html#cb9-73" aria-hidden="true" tabindex="-1"></a>                                        <span class="st">&quot;Total&quot;</span>))) <span class="sc">%&gt;%</span> </span>
<span id="cb9-74"><a href="pop-growth.html#cb9-74" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Population growth (inhabitant and percentage) using 2008-Q1 as baseline</span></span>
<span id="cb9-75"><a href="pop-growth.html#cb9-75" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(muni_name, ancestry) <span class="sc">%&gt;%</span> </span>
<span id="cb9-76"><a href="pop-growth.html#cb9-76" aria-hidden="true" tabindex="-1"></a>    <span class="fu">arrange</span>(muni_name, date) <span class="sc">%&gt;%</span> </span>
<span id="cb9-77"><a href="pop-growth.html#cb9-77" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">pop_dif_2008 =</span> pop <span class="sc">-</span> <span class="fu">first</span>(pop),</span>
<span id="cb9-78"><a href="pop-growth.html#cb9-78" aria-hidden="true" tabindex="-1"></a>           <span class="at">pop_pct_2008 =</span> (pop<span class="sc">/</span><span class="fu">first</span>(pop) <span class="sc">-</span> <span class="dv">1</span>) <span class="sc">*</span> <span class="dv">100</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb9-79"><a href="pop-growth.html#cb9-79" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ungroup</span>()</span>
<span id="cb9-80"><a href="pop-growth.html#cb9-80" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-81"><a href="pop-growth.html#cb9-81" aria-hidden="true" tabindex="-1"></a><span class="co"># Link population and municipalities</span></span>
<span id="cb9-82"><a href="pop-growth.html#cb9-82" aria-hidden="true" tabindex="-1"></a>  dk_muni_pop <span class="ot">&lt;-</span> dk_muni <span class="sc">%&gt;%</span> </span>
<span id="cb9-83"><a href="pop-growth.html#cb9-83" aria-hidden="true" tabindex="-1"></a>    <span class="fu">left_join</span>(pop_muni, <span class="at">by =</span> <span class="st">&quot;muni_name&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb9-84"><a href="pop-growth.html#cb9-84" aria-hidden="true" tabindex="-1"></a>    <span class="fu">st_as_sf</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb9-85"><a href="pop-growth.html#cb9-85" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">date =</span> <span class="fu">as.Date</span>(date))</span>
<span id="cb9-86"><a href="pop-growth.html#cb9-86" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-87"><a href="pop-growth.html#cb9-87" aria-hidden="true" tabindex="-1"></a><span class="co"># Transform Percentage of change to factor </span></span>
<span id="cb9-88"><a href="pop-growth.html#cb9-88" aria-hidden="true" tabindex="-1"></a>  pct_breaks <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fu">floor</span>(<span class="fu">min</span>(dk_muni_pop<span class="sc">$</span>pop_pct_2008)), <span class="sc">-</span><span class="dv">10</span>, <span class="sc">-</span><span class="dv">5</span>, </span>
<span id="cb9-89"><a href="pop-growth.html#cb9-89" aria-hidden="true" tabindex="-1"></a>                  <span class="dv">0</span>,</span>
<span id="cb9-90"><a href="pop-growth.html#cb9-90" aria-hidden="true" tabindex="-1"></a>                  <span class="dv">5</span>, <span class="dv">10</span>, <span class="dv">20</span>, <span class="dv">30</span>, <span class="dv">50</span>, <span class="dv">100</span>, <span class="dv">200</span>, <span class="fu">max</span>(dk_muni_pop<span class="sc">$</span>pop_pct_2008))</span>
<span id="cb9-91"><a href="pop-growth.html#cb9-91" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb9-92"><a href="pop-growth.html#cb9-92" aria-hidden="true" tabindex="-1"></a>  dk_muni_pop <span class="ot">&lt;-</span> dk_muni_pop <span class="sc">%&gt;%</span> </span>
<span id="cb9-93"><a href="pop-growth.html#cb9-93" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">pop_pct_2008_brk =</span> <span class="fu">cut</span>(dk_muni_pop<span class="sc">$</span>pop_pct_2008,</span>
<span id="cb9-94"><a href="pop-growth.html#cb9-94" aria-hidden="true" tabindex="-1"></a>                                  <span class="at">breaks =</span> pct_breaks)) <span class="sc">%&gt;%</span> </span>
<span id="cb9-95"><a href="pop-growth.html#cb9-95" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">ancestry =</span> <span class="fu">factor</span>(ancestry),</span>
<span id="cb9-96"><a href="pop-growth.html#cb9-96" aria-hidden="true" tabindex="-1"></a>           <span class="at">ancestry =</span> <span class="fu">fct_relevel</span>(ancestry, <span class="st">&quot;Total&quot;</span>, <span class="at">after =</span> <span class="dv">0</span>))</span></code></pre></div>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="pop-growth.html#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot total population </span></span>
<span id="cb10-2"><a href="pop-growth.html#cb10-2" aria-hidden="true" tabindex="-1"></a>  myPallette <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fu">rev</span>(<span class="fu">brewer.pal</span>(<span class="dv">3</span>, <span class="st">&quot;YlOrRd&quot;</span>)), <span class="fu">brewer.pal</span>(<span class="dv">9</span>, <span class="st">&quot;Blues&quot;</span>))</span>
<span id="cb10-3"><a href="pop-growth.html#cb10-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb10-4"><a href="pop-growth.html#cb10-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_sf</span>(<span class="at">data =</span> <span class="fu">filter</span>(dk_muni_pop,</span>
<span id="cb10-5"><a href="pop-growth.html#cb10-5" aria-hidden="true" tabindex="-1"></a>                          date <span class="sc">==</span> <span class="fu">as.Date</span>(<span class="st">&quot;2019-01-01&quot;</span>),</span>
<span id="cb10-6"><a href="pop-growth.html#cb10-6" aria-hidden="true" tabindex="-1"></a>                          ancestry <span class="sc">==</span> <span class="st">&quot;Total&quot;</span>),</span>
<span id="cb10-7"><a href="pop-growth.html#cb10-7" aria-hidden="true" tabindex="-1"></a>            <span class="fu">aes</span>(<span class="at">fill =</span> pop_pct_2008_brk),</span>
<span id="cb10-8"><a href="pop-growth.html#cb10-8" aria-hidden="true" tabindex="-1"></a>            <span class="at">color =</span> <span class="st">&quot;grey50&quot;</span>,</span>
<span id="cb10-9"><a href="pop-growth.html#cb10-9" aria-hidden="true" tabindex="-1"></a>            <span class="at">size =</span> <span class="fl">0.05</span>) <span class="sc">+</span></span>
<span id="cb10-10"><a href="pop-growth.html#cb10-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_manual</span>(<span class="at">name =</span> <span class="st">&quot;Percentage&quot;</span>, </span>
<span id="cb10-11"><a href="pop-growth.html#cb10-11" aria-hidden="true" tabindex="-1"></a>                      <span class="at">values =</span> myPallette,</span>
<span id="cb10-12"><a href="pop-growth.html#cb10-12" aria-hidden="true" tabindex="-1"></a>                      <span class="at">drop =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb10-13"><a href="pop-growth.html#cb10-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;&quot;</span>, </span>
<span id="cb10-14"><a href="pop-growth.html#cb10-14" aria-hidden="true" tabindex="-1"></a>         <span class="at">y =</span> <span class="st">&quot;&quot;</span>) <span class="sc">+</span></span>
<span id="cb10-15"><a href="pop-growth.html#cb10-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_void</span>() <span class="sc">+</span></span>
<span id="cb10-16"><a href="pop-growth.html#cb10-16" aria-hidden="true" tabindex="-1"></a>    <span class="co"># ylim(54.50, 58.0) +</span></span>
<span id="cb10-17"><a href="pop-growth.html#cb10-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_sf_label_repel</span>(<span class="at">data =</span> big_cities,</span>
<span id="cb10-18"><a href="pop-growth.html#cb10-18" aria-hidden="true" tabindex="-1"></a>                        <span class="fu">aes</span>(<span class="at">label =</span> muni_name),</span>
<span id="cb10-19"><a href="pop-growth.html#cb10-19" aria-hidden="true" tabindex="-1"></a>                        <span class="at">nudge_y =</span> <span class="dv">100000</span>,</span>
<span id="cb10-20"><a href="pop-growth.html#cb10-20" aria-hidden="true" tabindex="-1"></a>                        <span class="at">nudge_x =</span> <span class="dv">80000</span>)</span></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:fig-pop-growth-total"></span>
<img src="Housing_prices_book_files/figure-html/fig-pop-growth-total-1.png" alt="Population growth from 2008 to 2019" width="672" />
<p class="caption">
Figure 1.3: Population growth from 2008 to 2019
</p>
</div>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="pop-growth.html#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot by ancestry</span></span>
<span id="cb11-2"><a href="pop-growth.html#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb11-3"><a href="pop-growth.html#cb11-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> <span class="fu">filter</span>(dk_muni_pop,</span>
<span id="cb11-4"><a href="pop-growth.html#cb11-4" aria-hidden="true" tabindex="-1"></a>                        date <span class="sc">==</span> <span class="fu">as.Date</span>(<span class="st">&quot;2019-01-01&quot;</span>),</span>
<span id="cb11-5"><a href="pop-growth.html#cb11-5" aria-hidden="true" tabindex="-1"></a>                        ancestry <span class="sc">!=</span> <span class="st">&quot;Total&quot;</span>),</span>
<span id="cb11-6"><a href="pop-growth.html#cb11-6" aria-hidden="true" tabindex="-1"></a>          <span class="fu">aes</span>(<span class="at">fill =</span> pop_pct_2008_brk),</span>
<span id="cb11-7"><a href="pop-growth.html#cb11-7" aria-hidden="true" tabindex="-1"></a>          <span class="at">color =</span> <span class="st">&quot;grey50&quot;</span>,</span>
<span id="cb11-8"><a href="pop-growth.html#cb11-8" aria-hidden="true" tabindex="-1"></a>          <span class="at">size =</span> <span class="fl">0.05</span>) <span class="sc">+</span></span>
<span id="cb11-9"><a href="pop-growth.html#cb11-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">name =</span> <span class="st">&quot;Percentage&quot;</span>, </span>
<span id="cb11-10"><a href="pop-growth.html#cb11-10" aria-hidden="true" tabindex="-1"></a>                    <span class="at">values =</span> myPallette,</span>
<span id="cb11-11"><a href="pop-growth.html#cb11-11" aria-hidden="true" tabindex="-1"></a>                    <span class="at">drop =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb11-12"><a href="pop-growth.html#cb11-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;&quot;</span>, </span>
<span id="cb11-13"><a href="pop-growth.html#cb11-13" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">&quot;&quot;</span>) <span class="sc">+</span></span>
<span id="cb11-14"><a href="pop-growth.html#cb11-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>() <span class="sc">+</span></span>
<span id="cb11-15"><a href="pop-growth.html#cb11-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>( <span class="sc">~</span> ancestry, <span class="at">ncol =</span> <span class="dv">2</span>) </span></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:fig-pop-growth-ancestry"></span>
<img src="Housing_prices_book_files/figure-html/fig-pop-growth-ancestry-1.png" alt="Population growth from 2008 to 2019 by ancestry" width="672" />
<p class="caption">
Figure 1.4: Population growth from 2008 to 2019 by ancestry
</p>
</div>
<p>Population change</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="pop-growth.html#cb12-1" aria-hidden="true" tabindex="-1"></a>  pop_muni <span class="sc">%&gt;%</span> </span>
<span id="cb12-2"><a href="pop-growth.html#cb12-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> date,</span>
<span id="cb12-3"><a href="pop-growth.html#cb12-3" aria-hidden="true" tabindex="-1"></a>               <span class="at">y =</span> pop_dif_2008<span class="sc">/</span><span class="dv">1000</span>,</span>
<span id="cb12-4"><a href="pop-growth.html#cb12-4" aria-hidden="true" tabindex="-1"></a>               <span class="at">colour =</span> ancestry)) <span class="sc">+</span></span>
<span id="cb12-5"><a href="pop-growth.html#cb12-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_line</span>( ) <span class="sc">+</span></span>
<span id="cb12-6"><a href="pop-growth.html#cb12-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="dv">0</span>, <span class="at">linetype=</span><span class="st">&quot;dashed&quot;</span>, <span class="at">color =</span> <span class="st">&quot;grey&quot;</span>, <span class="at">size =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb12-7"><a href="pop-growth.html#cb12-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">facet_wrap</span>(<span class="sc">~</span>muni_name, <span class="at">ncol =</span> <span class="dv">6</span>,  <span class="at">scale =</span> <span class="st">&quot;free&quot;</span>) <span class="sc">+</span></span>
<span id="cb12-8"><a href="pop-growth.html#cb12-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb12-9"><a href="pop-growth.html#cb12-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;bottom&quot;</span>,</span>
<span id="cb12-10"><a href="pop-growth.html#cb12-10" aria-hidden="true" tabindex="-1"></a>          <span class="at">axis.text =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">10</span>),</span>
<span id="cb12-11"><a href="pop-growth.html#cb12-11" aria-hidden="true" tabindex="-1"></a>          <span class="at">axis.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">14</span>),</span>
<span id="cb12-12"><a href="pop-growth.html#cb12-12" aria-hidden="true" tabindex="-1"></a>          <span class="at">legend.text =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">14</span>),</span>
<span id="cb12-13"><a href="pop-growth.html#cb12-13" aria-hidden="true" tabindex="-1"></a>          <span class="at">legend.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">14</span>, <span class="at">face =</span> <span class="st">&quot;bold&quot;</span>),</span>
<span id="cb12-14"><a href="pop-growth.html#cb12-14" aria-hidden="true" tabindex="-1"></a>          <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">14</span>, <span class="at">face =</span> <span class="st">&quot;bold&quot;</span>),</span>
<span id="cb12-15"><a href="pop-growth.html#cb12-15" aria-hidden="true" tabindex="-1"></a>          <span class="at">title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">14</span>)) <span class="sc">+</span></span>
<span id="cb12-16"><a href="pop-growth.html#cb12-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_y_continuous</span>(<span class="at">name =</span> <span class="st">&quot;[x1000]&quot;</span>) <span class="sc">+</span></span>
<span id="cb12-17"><a href="pop-growth.html#cb12-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_x_date</span>(<span class="at">name =</span> <span class="st">&quot;&quot;</span>, <span class="at">date_breaks =</span> <span class="st">&quot;3 year&quot;</span>, <span class="at">date_labels =</span> <span class="st">&quot;%y&quot;</span>) <span class="sc">+</span></span>
<span id="cb12-18"><a href="pop-growth.html#cb12-18" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_colour_manual</span>(<span class="at">name =</span> <span class="st">&quot;Ancestry&quot;</span>,</span>
<span id="cb12-19"><a href="pop-growth.html#cb12-19" aria-hidden="true" tabindex="-1"></a>                        <span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;#0072B2&quot;</span>, <span class="st">&quot;#D55E00&quot;</span>, <span class="st">&quot;#000000&quot;</span>))</span></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:fig-pop-change"></span>
<img src="Housing_prices_book_files/figure-html/fig-pop-change-1.png" alt="Population change from 2008 (municipalitiess are shorted by the total population in 2019)" width="960" />
<p class="caption">
Figure 1.5: Population change from 2008 (municipalitiess are shorted by the total population in 2019)
</p>
</div>
<p>The total number of immigrants and their descendants living in Denmark at the first day of the four quarter of 2020 is 814.5k. From them, Copenhagen accounts for approximately 20% (164k), and then another 20% lives in Aarhus (60k), Odense (34k), Aalborg (24k), Frederiksberg (20k), and Vejle (15.7k).</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="pop-growth.html#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load data ----</span></span>
<span id="cb13-2"><a href="pop-growth.html#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; Data from Statistic Denmark: https://www.statbank.dk/10021 </span></span>
<span id="cb13-3"><a href="pop-growth.html#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; Table: FOLK1C</span></span>
<span id="cb13-4"><a href="pop-growth.html#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; Population at the first day of the quarter by region, ancestry, and country of origin</span></span>
<span id="cb13-5"><a href="pop-growth.html#cb13-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; Subjects of interest: population and elections (02)</span></span>
<span id="cb13-6"><a href="pop-growth.html#cb13-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; Immigrants and their descendants (2402)</span></span>
<span id="cb13-7"><a href="pop-growth.html#cb13-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-8"><a href="pop-growth.html#cb13-8" aria-hidden="true" tabindex="-1"></a>  id_table <span class="ot">&lt;-</span> <span class="st">&quot;FOLK1C&quot;</span></span>
<span id="cb13-9"><a href="pop-growth.html#cb13-9" aria-hidden="true" tabindex="-1"></a>  var_pop <span class="ot">&lt;-</span> <span class="fu">get_table_metadata</span>(<span class="at">table_id =</span> id_table, <span class="at">variables_only =</span> <span class="cn">TRUE</span>)</span>
<span id="cb13-10"><a href="pop-growth.html#cb13-10" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb13-11"><a href="pop-growth.html#cb13-11" aria-hidden="true" tabindex="-1"></a><span class="co"># loop by quarter for getting the data </span></span>
<span id="cb13-12"><a href="pop-growth.html#cb13-12" aria-hidden="true" tabindex="-1"></a>  steps <span class="ot">&lt;-</span> <span class="cf">function</span>(quarter){</span>
<span id="cb13-13"><a href="pop-growth.html#cb13-13" aria-hidden="true" tabindex="-1"></a>    var_values <span class="ot">&lt;-</span> <span class="fu">list</span>(id_region,</span>
<span id="cb13-14"><a href="pop-growth.html#cb13-14" aria-hidden="true" tabindex="-1"></a>                       id_ancestry,</span>
<span id="cb13-15"><a href="pop-growth.html#cb13-15" aria-hidden="true" tabindex="-1"></a>                       id_citizen,</span>
<span id="cb13-16"><a href="pop-growth.html#cb13-16" aria-hidden="true" tabindex="-1"></a>                       quarter)</span>
<span id="cb13-17"><a href="pop-growth.html#cb13-17" aria-hidden="true" tabindex="-1"></a>    var_input <span class="ot">&lt;-</span> purrr<span class="sc">::</span><span class="fu">map2</span>(<span class="at">.x =</span> var_codes,</span>
<span id="cb13-18"><a href="pop-growth.html#cb13-18" aria-hidden="true" tabindex="-1"></a>                             <span class="at">.y =</span> var_values,</span>
<span id="cb13-19"><a href="pop-growth.html#cb13-19" aria-hidden="true" tabindex="-1"></a>                             <span class="at">.f =</span> <span class="sc">~</span><span class="fu">list</span>(<span class="at">code =</span> .x, <span class="at">values =</span> .y))</span>
<span id="cb13-20"><a href="pop-growth.html#cb13-20" aria-hidden="true" tabindex="-1"></a>    <span class="fu">get_data</span>(id_table, <span class="at">variables =</span> var_input)</span>
<span id="cb13-21"><a href="pop-growth.html#cb13-21" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb13-22"><a href="pop-growth.html#cb13-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-23"><a href="pop-growth.html#cb13-23" aria-hidden="true" tabindex="-1"></a><span class="co"># Codes for var_input</span></span>
<span id="cb13-24"><a href="pop-growth.html#cb13-24" aria-hidden="true" tabindex="-1"></a>  var_codes <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;OMRÅDE&quot;</span>, <span class="st">&quot;HERKOMST&quot;</span>, <span class="st">&quot;IELAND&quot;</span>, <span class="st">&quot;Tid&quot;</span>)</span>
<span id="cb13-25"><a href="pop-growth.html#cb13-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-26"><a href="pop-growth.html#cb13-26" aria-hidden="true" tabindex="-1"></a><span class="co"># Values for var_input</span></span>
<span id="cb13-27"><a href="pop-growth.html#cb13-27" aria-hidden="true" tabindex="-1"></a>  <span class="do">## Region: Denmark</span></span>
<span id="cb13-28"><a href="pop-growth.html#cb13-28" aria-hidden="true" tabindex="-1"></a>  id_region <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb13-29"><a href="pop-growth.html#cb13-29" aria-hidden="true" tabindex="-1"></a>  <span class="do">## Ancestry (Immigrants and Descendant)</span></span>
<span id="cb13-30"><a href="pop-growth.html#cb13-30" aria-hidden="true" tabindex="-1"></a>  id_ancestry <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">4</span>, <span class="dv">3</span>)</span>
<span id="cb13-31"><a href="pop-growth.html#cb13-31" aria-hidden="true" tabindex="-1"></a>  <span class="do">## Country of origin (remove total)</span></span>
<span id="cb13-32"><a href="pop-growth.html#cb13-32" aria-hidden="true" tabindex="-1"></a>  id_citizen <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(var_pop<span class="sc">$</span>values[[<span class="dv">5</span>]]<span class="sc">$</span>id)</span>
<span id="cb13-33"><a href="pop-growth.html#cb13-33" aria-hidden="true" tabindex="-1"></a>  id_citizen <span class="ot">&lt;-</span> id_citizen[id_citizen <span class="sc">&gt;</span> <span class="dv">0</span>]</span>
<span id="cb13-34"><a href="pop-growth.html#cb13-34" aria-hidden="true" tabindex="-1"></a>  <span class="do">## Quarters</span></span>
<span id="cb13-35"><a href="pop-growth.html#cb13-35" aria-hidden="true" tabindex="-1"></a>  id_quarter <span class="ot">&lt;-</span> var_pop<span class="sc">$</span>values[[<span class="dv">6</span>]]<span class="sc">$</span>id[<span class="dv">1</span><span class="sc">:</span><span class="dv">45</span>]   <span class="co"># Select all quarters</span></span>
<span id="cb13-36"><a href="pop-growth.html#cb13-36" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Parallel process with {future}</span></span>
<span id="cb13-37"><a href="pop-growth.html#cb13-37" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plan</span>(multisession)  </span>
<span id="cb13-38"><a href="pop-growth.html#cb13-38" aria-hidden="true" tabindex="-1"></a>  pop_migr <span class="ot">&lt;-</span> id_quarter <span class="sc">%&gt;%</span> <span class="fu">future_map</span>(steps)</span>
<span id="cb13-39"><a href="pop-growth.html#cb13-39" aria-hidden="true" tabindex="-1"></a>  pop_migr <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(pop_migr)</span>
<span id="cb13-40"><a href="pop-growth.html#cb13-40" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plan</span>(<span class="st">&quot;default&quot;</span>)</span>
<span id="cb13-41"><a href="pop-growth.html#cb13-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-42"><a href="pop-growth.html#cb13-42" aria-hidden="true" tabindex="-1"></a><span class="co"># Clean column names and format some data</span></span>
<span id="cb13-43"><a href="pop-growth.html#cb13-43" aria-hidden="true" tabindex="-1"></a>  pop_migr <span class="ot">&lt;-</span> pop_migr <span class="sc">%&gt;%</span> </span>
<span id="cb13-44"><a href="pop-growth.html#cb13-44" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Translate column names into English</span></span>
<span id="cb13-45"><a href="pop-growth.html#cb13-45" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rename</span>(<span class="at">muni_name =</span> OMRÅDE,</span>
<span id="cb13-46"><a href="pop-growth.html#cb13-46" aria-hidden="true" tabindex="-1"></a>           <span class="at">ancestry =</span> HERKOMST,</span>
<span id="cb13-47"><a href="pop-growth.html#cb13-47" aria-hidden="true" tabindex="-1"></a>           <span class="at">origin =</span> IELAND,</span>
<span id="cb13-48"><a href="pop-growth.html#cb13-48" aria-hidden="true" tabindex="-1"></a>           <span class="at">date =</span> TID, </span>
<span id="cb13-49"><a href="pop-growth.html#cb13-49" aria-hidden="true" tabindex="-1"></a>           <span class="at">pop =</span> INDHOLD) <span class="sc">%&gt;%</span> </span>
<span id="cb13-50"><a href="pop-growth.html#cb13-50" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Translate Copenhagen</span></span>
<span id="cb13-51"><a href="pop-growth.html#cb13-51" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">muni_name =</span> <span class="fu">gsub</span>(<span class="st">&quot;Copenhagen&quot;</span>, <span class="st">&quot;København&quot;</span>, muni_name)) <span class="sc">%&gt;%</span> </span>
<span id="cb13-52"><a href="pop-growth.html#cb13-52" aria-hidden="true" tabindex="-1"></a>    <span class="co"># First day of the quarter</span></span>
<span id="cb13-53"><a href="pop-growth.html#cb13-53" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">date =</span> <span class="fu">gsub</span>(<span class="st">&quot;Q&quot;</span>, <span class="st">&quot;&quot;</span>, date),</span>
<span id="cb13-54"><a href="pop-growth.html#cb13-54" aria-hidden="true" tabindex="-1"></a>           <span class="at">date =</span> <span class="fu">as_date_yq</span>(<span class="fu">as.integer</span>(date)),</span>
<span id="cb13-55"><a href="pop-growth.html#cb13-55" aria-hidden="true" tabindex="-1"></a>           <span class="at">date =</span> <span class="fu">first_of_quarter</span>(date)) <span class="sc">%&gt;%</span> </span>
<span id="cb13-56"><a href="pop-growth.html#cb13-56" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Total Immigrants and Descendants by muni_name, date, and country of origin</span></span>
<span id="cb13-57"><a href="pop-growth.html#cb13-57" aria-hidden="true" tabindex="-1"></a>    <span class="fu">pivot_wider</span>(<span class="fu">c</span>(muni_name, origin, date),</span>
<span id="cb13-58"><a href="pop-growth.html#cb13-58" aria-hidden="true" tabindex="-1"></a>                <span class="at">names_from =</span> ancestry,</span>
<span id="cb13-59"><a href="pop-growth.html#cb13-59" aria-hidden="true" tabindex="-1"></a>                <span class="at">values_from =</span> pop) <span class="sc">%&gt;%</span> </span>
<span id="cb13-60"><a href="pop-growth.html#cb13-60" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">Total =</span> Immigrants <span class="sc">+</span> Descendant) <span class="sc">%&gt;%</span> </span>
<span id="cb13-61"><a href="pop-growth.html#cb13-61" aria-hidden="true" tabindex="-1"></a>    <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="fu">c</span>(Immigrants, Descendant, Total),</span>
<span id="cb13-62"><a href="pop-growth.html#cb13-62" aria-hidden="true" tabindex="-1"></a>                 <span class="at">values_to =</span> <span class="st">&quot;pop&quot;</span>,</span>
<span id="cb13-63"><a href="pop-growth.html#cb13-63" aria-hidden="true" tabindex="-1"></a>                 <span class="at">names_to =</span> <span class="st">&quot;ancestry&quot;</span>)  </span>
<span id="cb13-64"><a href="pop-growth.html#cb13-64" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-65"><a href="pop-growth.html#cb13-65" aria-hidden="true" tabindex="-1"></a><span class="co"># Top 10 origin countries in Denmark (in 2019Q1)   </span></span>
<span id="cb13-66"><a href="pop-growth.html#cb13-66" aria-hidden="true" tabindex="-1"></a>  pop_migr_top10_2019 <span class="ot">&lt;-</span> pop_migr <span class="sc">%&gt;%</span></span>
<span id="cb13-67"><a href="pop-growth.html#cb13-67" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(muni_name <span class="sc">==</span> <span class="st">&quot;All Denmark&quot;</span>,</span>
<span id="cb13-68"><a href="pop-growth.html#cb13-68" aria-hidden="true" tabindex="-1"></a>           date <span class="sc">==</span> <span class="fu">as.Date</span>(<span class="st">&quot;2019-01-01&quot;</span>),</span>
<span id="cb13-69"><a href="pop-growth.html#cb13-69" aria-hidden="true" tabindex="-1"></a>           ancestry <span class="sc">==</span> <span class="st">&quot;Total&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb13-70"><a href="pop-growth.html#cb13-70" aria-hidden="true" tabindex="-1"></a>    <span class="fu">slice_max</span>(pop, <span class="at">n =</span> <span class="dv">10</span>) </span>
<span id="cb13-71"><a href="pop-growth.html#cb13-71" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-72"><a href="pop-growth.html#cb13-72" aria-hidden="true" tabindex="-1"></a><span class="co"># Evolution of the top 10 countries over the years (since 2008)</span></span>
<span id="cb13-73"><a href="pop-growth.html#cb13-73" aria-hidden="true" tabindex="-1"></a>  pop_migr_top10 <span class="ot">&lt;-</span> pop_migr <span class="sc">%&gt;%</span></span>
<span id="cb13-74"><a href="pop-growth.html#cb13-74" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(muni_name <span class="sc">==</span> <span class="st">&quot;All Denmark&quot;</span>, </span>
<span id="cb13-75"><a href="pop-growth.html#cb13-75" aria-hidden="true" tabindex="-1"></a>           origin <span class="sc">%in%</span> pop_migr_top10_2019<span class="sc">$</span>origin) <span class="sc">%&gt;%</span> </span>
<span id="cb13-76"><a href="pop-growth.html#cb13-76" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Reorder factors (shorted by Total population in 2019-q1)</span></span>
<span id="cb13-77"><a href="pop-growth.html#cb13-77" aria-hidden="true" tabindex="-1"></a>    <span class="fu">pivot_wider</span>(<span class="fu">c</span>(origin, date), <span class="at">names_from =</span> ancestry, <span class="at">values_from =</span> pop) <span class="sc">%&gt;%</span></span>
<span id="cb13-78"><a href="pop-growth.html#cb13-78" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">origin =</span> <span class="fu">factor</span>(origin),</span>
<span id="cb13-79"><a href="pop-growth.html#cb13-79" aria-hidden="true" tabindex="-1"></a>           <span class="at">origin =</span> <span class="fu">fct_reorder2</span>(origin, date, Total)) <span class="sc">%&gt;%</span> </span>
<span id="cb13-80"><a href="pop-growth.html#cb13-80" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Long format</span></span>
<span id="cb13-81"><a href="pop-growth.html#cb13-81" aria-hidden="true" tabindex="-1"></a>    <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="fu">c</span>(Immigrants, Descendant, Total),</span>
<span id="cb13-82"><a href="pop-growth.html#cb13-82" aria-hidden="true" tabindex="-1"></a>                 <span class="at">names_to =</span> <span class="st">&quot;ancestry&quot;</span>,</span>
<span id="cb13-83"><a href="pop-growth.html#cb13-83" aria-hidden="true" tabindex="-1"></a>                 <span class="at">values_to =</span> <span class="st">&quot;pop&quot;</span>) </span></code></pre></div>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="pop-growth.html#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Total</span></span>
<span id="cb14-2"><a href="pop-growth.html#cb14-2" aria-hidden="true" tabindex="-1"></a>p1 <span class="ot">&lt;-</span> pop_migr_top10 <span class="sc">%&gt;%</span> </span>
<span id="cb14-3"><a href="pop-growth.html#cb14-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(ancestry <span class="sc">==</span> <span class="st">&quot;Total&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb14-4"><a href="pop-growth.html#cb14-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb14-5"><a href="pop-growth.html#cb14-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">x =</span> date, <span class="at">y =</span> pop<span class="sc">/</span><span class="dv">1000</span>, <span class="at">colour =</span> origin)) <span class="sc">+</span></span>
<span id="cb14-6"><a href="pop-growth.html#cb14-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb14-7"><a href="pop-growth.html#cb14-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Immigrants and descendants in Denmark&quot;</span>, </span>
<span id="cb14-8"><a href="pop-growth.html#cb14-8" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&quot;Top 10 countries of origin in 2020&quot;</span>,</span>
<span id="cb14-9"><a href="pop-growth.html#cb14-9" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">&quot;Pop [x1000]&quot;</span>,</span>
<span id="cb14-10"><a href="pop-growth.html#cb14-10" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">&quot;&quot;</span>) <span class="sc">+</span></span>
<span id="cb14-11"><a href="pop-growth.html#cb14-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_brewer</span>(<span class="at">name =</span> <span class="st">&quot;Country of</span><span class="sc">\n</span><span class="st">origin&quot;</span>, <span class="at">palette =</span> <span class="st">&quot;Paired&quot;</span>)  </span>
<span id="cb14-12"><a href="pop-growth.html#cb14-12" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb14-13"><a href="pop-growth.html#cb14-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Immigrants and Descendants</span></span>
<span id="cb14-14"><a href="pop-growth.html#cb14-14" aria-hidden="true" tabindex="-1"></a>p2 <span class="ot">&lt;-</span> pop_migr_top10 <span class="sc">%&gt;%</span> </span>
<span id="cb14-15"><a href="pop-growth.html#cb14-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(ancestry <span class="sc">!=</span> <span class="st">&quot;Total&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb14-16"><a href="pop-growth.html#cb14-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">ancestry =</span> <span class="fu">factor</span>(ancestry,</span>
<span id="cb14-17"><a href="pop-growth.html#cb14-17" aria-hidden="true" tabindex="-1"></a>                             <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">&quot;Immigrants&quot;</span>,<span class="st">&quot;Descendant&quot;</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb14-18"><a href="pop-growth.html#cb14-18" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb14-19"><a href="pop-growth.html#cb14-19" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">x =</span> date, <span class="at">y =</span> pop<span class="sc">/</span><span class="dv">1000</span>, <span class="at">colour =</span> origin)) <span class="sc">+</span></span>
<span id="cb14-20"><a href="pop-growth.html#cb14-20" aria-hidden="true" tabindex="-1"></a>    <span class="fu">facet_grid</span>(<span class="sc">~</span>ancestry) <span class="sc">+</span></span>
<span id="cb14-21"><a href="pop-growth.html#cb14-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb14-22"><a href="pop-growth.html#cb14-22" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">subtitle =</span> <span class="st">&quot;Divided by ancestry&quot;</span>, </span>
<span id="cb14-23"><a href="pop-growth.html#cb14-23" aria-hidden="true" tabindex="-1"></a>         <span class="at">y =</span> <span class="st">&quot;Pop [x1000]&quot;</span>,</span>
<span id="cb14-24"><a href="pop-growth.html#cb14-24" aria-hidden="true" tabindex="-1"></a>         <span class="at">x =</span> <span class="st">&quot;&quot;</span>) <span class="sc">+</span></span>
<span id="cb14-25"><a href="pop-growth.html#cb14-25" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_color_brewer</span>(<span class="at">name =</span> <span class="st">&quot;Country of</span><span class="sc">\n</span><span class="st">origin&quot;</span>, <span class="at">palette =</span> <span class="st">&quot;Paired&quot;</span>) </span>
<span id="cb14-26"><a href="pop-growth.html#cb14-26" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb14-27"><a href="pop-growth.html#cb14-27" aria-hidden="true" tabindex="-1"></a>  p1 <span class="sc">/</span> p2 <span class="sc">+</span> <span class="fu">plot_layout</span>(<span class="at">guides =</span> <span class="st">&quot;collect&quot;</span>)</span></code></pre></div>
<p><img src="Housing_prices_book_files/figure-html/fig-pop-migr-top-1.png" width="672" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="pop-growth.html#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot spatial situation in 2019</span></span>
<span id="cb15-2"><a href="pop-growth.html#cb15-2" aria-hidden="true" tabindex="-1"></a>pop_migr_muni_2019Q1 <span class="ot">&lt;-</span> dk_muni <span class="sc">%&gt;%</span> </span>
<span id="cb15-3"><a href="pop-growth.html#cb15-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">left_join</span>(<span class="fu">filter</span>(pop_migr, date <span class="sc">==</span> <span class="fu">as.Date</span>(<span class="st">&quot;2019-01-01&quot;</span>), ancestry <span class="sc">==</span> <span class="st">&quot;Total&quot;</span>),</span>
<span id="cb15-4"><a href="pop-growth.html#cb15-4" aria-hidden="true" tabindex="-1"></a>              <span class="at">by =</span> <span class="st">&quot;muni_name&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb15-5"><a href="pop-growth.html#cb15-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">st_as_sf</span>() </span></code></pre></div>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="pop-growth.html#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Total foreign population by muni (and percentage over the total migrants)</span></span>
<span id="cb16-2"><a href="pop-growth.html#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Binds represent the same percentage of population (~20%)</span></span>
<span id="cb16-3"><a href="pop-growth.html#cb16-3" aria-hidden="true" tabindex="-1"></a>cumsum__breaks <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">20</span>, <span class="dv">40</span>, <span class="dv">60</span>, <span class="dv">80</span>, <span class="dv">100</span>)</span>
<span id="cb16-4"><a href="pop-growth.html#cb16-4" aria-hidden="true" tabindex="-1"></a>pop_migr_total <span class="ot">&lt;-</span> pop_migr_muni_2019Q1 <span class="sc">%&gt;%</span></span>
<span id="cb16-5"><a href="pop-growth.html#cb16-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(muni_name) <span class="sc">%&gt;%</span> </span>
<span id="cb16-6"><a href="pop-growth.html#cb16-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">pop =</span> <span class="fu">sum</span>(pop, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb16-7"><a href="pop-growth.html#cb16-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="sc">-</span>pop) <span class="sc">%&gt;%</span></span>
<span id="cb16-8"><a href="pop-growth.html#cb16-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb16-9"><a href="pop-growth.html#cb16-9" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Municipality grouped with the same percentage of migrants (~ 20%)</span></span>
<span id="cb16-10"><a href="pop-growth.html#cb16-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">pop_pct =</span> <span class="dv">100</span> <span class="sc">*</span> pop<span class="sc">/</span><span class="fu">sum</span>(pop)) <span class="sc">%&gt;%</span> </span>
<span id="cb16-11"><a href="pop-growth.html#cb16-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">pop_pct_cum =</span> <span class="fu">cumsum</span>(pop_pct)) <span class="sc">%&gt;%</span> </span>
<span id="cb16-12"><a href="pop-growth.html#cb16-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">pop_pct_cum_brk =</span> <span class="fu">cut</span>(pop_pct_cum, <span class="at">breaks =</span> cumsum__breaks)) </span>
<span id="cb16-13"><a href="pop-growth.html#cb16-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-14"><a href="pop-growth.html#cb16-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot</span></span>
<span id="cb16-15"><a href="pop-growth.html#cb16-15" aria-hidden="true" tabindex="-1"></a>  pop_migr_total <span class="sc">%&gt;%</span> </span>
<span id="cb16-16"><a href="pop-growth.html#cb16-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb16-17"><a href="pop-growth.html#cb16-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_sf</span>(<span class="fu">aes</span>(<span class="at">fill =</span> pop_pct_cum_brk),</span>
<span id="cb16-18"><a href="pop-growth.html#cb16-18" aria-hidden="true" tabindex="-1"></a>            <span class="at">color =</span> <span class="st">&quot;grey&quot;</span>,</span>
<span id="cb16-19"><a href="pop-growth.html#cb16-19" aria-hidden="true" tabindex="-1"></a>            <span class="at">size =</span> <span class="fl">0.05</span>) <span class="sc">+</span> </span>
<span id="cb16-20"><a href="pop-growth.html#cb16-20" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_brewer</span>(<span class="at">name =</span> <span class="st">&quot;Cumulative [%]&quot;</span>,</span>
<span id="cb16-21"><a href="pop-growth.html#cb16-21" aria-hidden="true" tabindex="-1"></a>                      <span class="at">palette =</span> <span class="st">&quot;YlGnBu&quot;</span>,</span>
<span id="cb16-22"><a href="pop-growth.html#cb16-22" aria-hidden="true" tabindex="-1"></a>                      <span class="at">direction =</span> <span class="sc">-</span><span class="dv">1</span>, </span>
<span id="cb16-23"><a href="pop-growth.html#cb16-23" aria-hidden="true" tabindex="-1"></a>                      <span class="at">drop =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb16-24"><a href="pop-growth.html#cb16-24" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;&quot;</span>,</span>
<span id="cb16-25"><a href="pop-growth.html#cb16-25" aria-hidden="true" tabindex="-1"></a>         <span class="at">y =</span> <span class="st">&quot;&quot;</span>) <span class="sc">+</span></span>
<span id="cb16-26"><a href="pop-growth.html#cb16-26" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_void</span>() <span class="sc">+</span></span>
<span id="cb16-27"><a href="pop-growth.html#cb16-27" aria-hidden="true" tabindex="-1"></a>    <span class="co"># ylim(54.50, 58.0) +</span></span>
<span id="cb16-28"><a href="pop-growth.html#cb16-28" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_sf_label_repel</span>(<span class="at">data =</span> big_cities,</span>
<span id="cb16-29"><a href="pop-growth.html#cb16-29" aria-hidden="true" tabindex="-1"></a>                        <span class="fu">aes</span>(<span class="at">label =</span> muni_name),</span>
<span id="cb16-30"><a href="pop-growth.html#cb16-30" aria-hidden="true" tabindex="-1"></a>                        <span class="at">nudge_y =</span> <span class="dv">100000</span>,</span>
<span id="cb16-31"><a href="pop-growth.html#cb16-31" aria-hidden="true" tabindex="-1"></a>                        <span class="at">nudge_x =</span> <span class="dv">80000</span>)</span></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:fig-pop-migr-total"></span>
<img src="Housing_prices_book_files/figure-html/fig-pop-migr-total-1.png" alt="Spatial distribution of immigrants and their descendants (Date: 2019-01-01)" width="672" />
<p class="caption">
Figure 1.6: Spatial distribution of immigrants and their descendants (Date: 2019-01-01)
</p>
</div>
<p>Spatial distribution:</p>
<ul>
<li><p>Turkish and Iraqi citizens are clustered over the big cities (why?):</p>
<ul>
<li>Historical reason?</li>
<li>Do these countries have a long history of immigration into Denmark, and before the big cities where the main receptors of immigrants?</li>
<li>Furthermore, since these people have been for a long time in Denmark they have a similar migration pattern than Danes (i.e. they have moved to big cities)?</li>
<li>Are they supporting newcomers from these countries? Do they have support groups (religion,…) in this municipalities, so newcomers prefer to stay in these cities? Links with country of origin?</li>
</ul></li>
<li><p>Polish, Romanian, and Syrian citizens settled all over Denmark, without a clear pattern.</p></li>
<li><p>German citizens: in the big cities but the population is also important in the border region with Germany.</p></li>
</ul>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="pop-growth.html#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Top 6 citizen groups (and percentage over the same country of origin)</span></span>
<span id="cb17-2"><a href="pop-growth.html#cb17-2" aria-hidden="true" tabindex="-1"></a>  cumsum__breaks <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">20</span>, <span class="fl">40.0</span>, <span class="fl">60.0</span>, <span class="fl">80.0</span>, <span class="dv">100</span>)</span>
<span id="cb17-3"><a href="pop-growth.html#cb17-3" aria-hidden="true" tabindex="-1"></a>  top_migr_groups <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Turkey&quot;</span>, <span class="st">&quot;Poland&quot;</span>, <span class="st">&quot;Syria&quot;</span>, <span class="st">&quot;Germany&quot;</span>, <span class="st">&quot;Romania&quot;</span>, <span class="st">&quot;Iraq&quot;</span>)</span>
<span id="cb17-4"><a href="pop-growth.html#cb17-4" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb17-5"><a href="pop-growth.html#cb17-5" aria-hidden="true" tabindex="-1"></a>  pop_migr_muni_2019Q1_top_groups <span class="ot">&lt;-</span>  pop_migr_muni_2019Q1 <span class="sc">%&gt;%</span> </span>
<span id="cb17-6"><a href="pop-growth.html#cb17-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(origin <span class="sc">%in%</span> top_migr_groups) <span class="sc">%&gt;%</span> </span>
<span id="cb17-7"><a href="pop-growth.html#cb17-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">st_sf</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb17-8"><a href="pop-growth.html#cb17-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(origin) <span class="sc">%&gt;%</span> </span>
<span id="cb17-9"><a href="pop-growth.html#cb17-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">arrange</span>(<span class="sc">-</span>pop) <span class="sc">%&gt;%</span> </span>
<span id="cb17-10"><a href="pop-growth.html#cb17-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">pop_pct =</span> <span class="dv">100</span> <span class="sc">*</span> pop <span class="sc">/</span> <span class="fu">sum</span>(pop, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb17-11"><a href="pop-growth.html#cb17-11" aria-hidden="true" tabindex="-1"></a>           <span class="at">pop_pct_cum =</span> <span class="fu">cumsum</span>(pop_pct),</span>
<span id="cb17-12"><a href="pop-growth.html#cb17-12" aria-hidden="true" tabindex="-1"></a>           <span class="at">pop_pct_cum_brk =</span> <span class="fu">cut</span>(pop_pct_cum, <span class="at">breaks =</span> cumsum__breaks)) <span class="sc">%&gt;%</span> </span>
<span id="cb17-13"><a href="pop-growth.html#cb17-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(muni_name, origin, pop, pop_pct, pop_pct_cum, pop_pct_cum_brk)</span>
<span id="cb17-14"><a href="pop-growth.html#cb17-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-15"><a href="pop-growth.html#cb17-15" aria-hidden="true" tabindex="-1"></a><span class="co"># facet by top countries, adding the total number of immigrants/descendants</span></span>
<span id="cb17-16"><a href="pop-growth.html#cb17-16" aria-hidden="true" tabindex="-1"></a>  sum_pop <span class="ot">&lt;-</span> <span class="cf">function</span>(country) {</span>
<span id="cb17-17"><a href="pop-growth.html#cb17-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">sum</span>(pop_migr_muni_2019Q1_top_groups[pop_migr_muni_2019Q1_top_groups<span class="sc">$</span>origin <span class="sc">==</span> country, ]<span class="sc">$</span>pop,</span>
<span id="cb17-18"><a href="pop-growth.html#cb17-18" aria-hidden="true" tabindex="-1"></a>        <span class="at">na.rm =</span> T)</span>
<span id="cb17-19"><a href="pop-growth.html#cb17-19" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb17-20"><a href="pop-growth.html#cb17-20" aria-hidden="true" tabindex="-1"></a>  levels <span class="ot">&lt;-</span> top_migr_groups</span>
<span id="cb17-21"><a href="pop-growth.html#cb17-21" aria-hidden="true" tabindex="-1"></a>  labels <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fu">paste</span>(<span class="st">&quot;Turkish citizens</span><span class="sc">\n</span><span class="st">(&quot;</span>,</span>
<span id="cb17-22"><a href="pop-growth.html#cb17-22" aria-hidden="true" tabindex="-1"></a>                    <span class="fu">sum_pop</span>(<span class="st">&quot;Turkey&quot;</span>) ,</span>
<span id="cb17-23"><a href="pop-growth.html#cb17-23" aria-hidden="true" tabindex="-1"></a>                    <span class="st">&quot; inhabitants)&quot;</span>,</span>
<span id="cb17-24"><a href="pop-growth.html#cb17-24" aria-hidden="true" tabindex="-1"></a>                    <span class="at">sep =</span> <span class="st">&quot;&quot;</span>),</span>
<span id="cb17-25"><a href="pop-growth.html#cb17-25" aria-hidden="true" tabindex="-1"></a>              <span class="fu">paste</span>(<span class="st">&quot;Polish citizens</span><span class="sc">\n</span><span class="st">(&quot;</span>,</span>
<span id="cb17-26"><a href="pop-growth.html#cb17-26" aria-hidden="true" tabindex="-1"></a>                    <span class="fu">sum_pop</span>(<span class="st">&quot;Poland&quot;</span>),</span>
<span id="cb17-27"><a href="pop-growth.html#cb17-27" aria-hidden="true" tabindex="-1"></a>                    <span class="st">&quot; inhabitants)&quot;</span>,</span>
<span id="cb17-28"><a href="pop-growth.html#cb17-28" aria-hidden="true" tabindex="-1"></a>                    <span class="at">sep =</span> <span class="st">&quot;&quot;</span>),</span>
<span id="cb17-29"><a href="pop-growth.html#cb17-29" aria-hidden="true" tabindex="-1"></a>              <span class="fu">paste</span>(<span class="st">&quot;Syrian citizens</span><span class="sc">\n</span><span class="st">(&quot;</span>,</span>
<span id="cb17-30"><a href="pop-growth.html#cb17-30" aria-hidden="true" tabindex="-1"></a>                    <span class="fu">sum_pop</span>(<span class="st">&quot;Syria&quot;</span>),</span>
<span id="cb17-31"><a href="pop-growth.html#cb17-31" aria-hidden="true" tabindex="-1"></a>                    <span class="st">&quot; inhabitants)&quot;</span>,</span>
<span id="cb17-32"><a href="pop-growth.html#cb17-32" aria-hidden="true" tabindex="-1"></a>                    <span class="at">sep =</span> <span class="st">&quot;&quot;</span>),</span>
<span id="cb17-33"><a href="pop-growth.html#cb17-33" aria-hidden="true" tabindex="-1"></a>              <span class="fu">paste</span>(<span class="st">&quot;German citizens</span><span class="sc">\n</span><span class="st">(&quot;</span>,</span>
<span id="cb17-34"><a href="pop-growth.html#cb17-34" aria-hidden="true" tabindex="-1"></a>                    <span class="fu">sum_pop</span>(<span class="st">&quot;Germany&quot;</span>),</span>
<span id="cb17-35"><a href="pop-growth.html#cb17-35" aria-hidden="true" tabindex="-1"></a>                    <span class="st">&quot; inhabitants)&quot;</span>,</span>
<span id="cb17-36"><a href="pop-growth.html#cb17-36" aria-hidden="true" tabindex="-1"></a>                    <span class="at">sep =</span> <span class="st">&quot;&quot;</span>),</span>
<span id="cb17-37"><a href="pop-growth.html#cb17-37" aria-hidden="true" tabindex="-1"></a>              <span class="fu">paste</span>(<span class="st">&quot;Romanian citizens</span><span class="sc">\n</span><span class="st">(&quot;</span>,</span>
<span id="cb17-38"><a href="pop-growth.html#cb17-38" aria-hidden="true" tabindex="-1"></a>                    <span class="fu">sum_pop</span>(<span class="st">&quot;Romania&quot;</span>),</span>
<span id="cb17-39"><a href="pop-growth.html#cb17-39" aria-hidden="true" tabindex="-1"></a>                    <span class="st">&quot; inhabitants)&quot;</span>,</span>
<span id="cb17-40"><a href="pop-growth.html#cb17-40" aria-hidden="true" tabindex="-1"></a>                    <span class="at">sep =</span> <span class="st">&quot;&quot;</span>),</span>
<span id="cb17-41"><a href="pop-growth.html#cb17-41" aria-hidden="true" tabindex="-1"></a>              <span class="fu">paste</span>(<span class="st">&quot;Iraqi citizens</span><span class="sc">\n</span><span class="st">(&quot;</span>,</span>
<span id="cb17-42"><a href="pop-growth.html#cb17-42" aria-hidden="true" tabindex="-1"></a>                    <span class="fu">sum_pop</span>(<span class="st">&quot;Iraq&quot;</span>),</span>
<span id="cb17-43"><a href="pop-growth.html#cb17-43" aria-hidden="true" tabindex="-1"></a>                    <span class="st">&quot; inhabitants)&quot;</span>,</span>
<span id="cb17-44"><a href="pop-growth.html#cb17-44" aria-hidden="true" tabindex="-1"></a>                    <span class="at">sep =</span> <span class="st">&quot;&quot;</span>) )</span>
<span id="cb17-45"><a href="pop-growth.html#cb17-45" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb17-46"><a href="pop-growth.html#cb17-46" aria-hidden="true" tabindex="-1"></a>  pop_migr_muni_2019Q1_top_groups <span class="ot">&lt;-</span> pop_migr_muni_2019Q1_top_groups <span class="sc">%&gt;%</span> </span>
<span id="cb17-47"><a href="pop-growth.html#cb17-47" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">origin_num =</span> <span class="fu">factor</span>(origin, <span class="at">levels =</span> levels, <span class="at">labels =</span> labels))</span></code></pre></div>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="pop-growth.html#cb18-1" aria-hidden="true" tabindex="-1"></a>pop_migr_muni_2019Q1_top_groups <span class="sc">%&gt;%</span> </span>
<span id="cb18-2"><a href="pop-growth.html#cb18-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb18-3"><a href="pop-growth.html#cb18-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_sf</span>(<span class="fu">aes</span>(<span class="at">fill =</span> pop_pct_cum_brk), <span class="at">color =</span> <span class="st">&quot;grey&quot;</span>, <span class="at">size =</span> <span class="fl">0.05</span>) <span class="sc">+</span></span>
<span id="cb18-4"><a href="pop-growth.html#cb18-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_brewer</span>(<span class="at">name =</span> <span class="st">&quot;Cumulative [%]&quot;</span>,</span>
<span id="cb18-5"><a href="pop-growth.html#cb18-5" aria-hidden="true" tabindex="-1"></a>                      <span class="at">palette =</span> <span class="st">&quot;YlGnBu&quot;</span>,</span>
<span id="cb18-6"><a href="pop-growth.html#cb18-6" aria-hidden="true" tabindex="-1"></a>                      <span class="at">direction =</span> <span class="sc">-</span><span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb18-7"><a href="pop-growth.html#cb18-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">facet_wrap</span>(<span class="sc">~</span> origin_num, <span class="at">ncol =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb18-8"><a href="pop-growth.html#cb18-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_void</span>()</span></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:fig-pop-migr-top10-countries"></span>
<img src="Housing_prices_book_files/figure-html/fig-pop-migr-top10-countries-1.png" alt="Top countries of origin for immigrants and their descendants (Date: 2019-01-01)" width="672" />
<p class="caption">
Figure 1.7: Top countries of origin for immigrants and their descendants (Date: 2019-01-01)
</p>
</div>
<p>Definitions (from DST):</p>
<ul>
<li><p><strong>Immigrant</strong>: An immigrant is defined as a person born abroad whose parents are both (or one of them if there is no available information on the other parent) foreign citizens or were both born abroad. If there is no available information on either of the parents and the person was born abroad, the person is also defined as an immigrant.</p></li>
<li><p><strong>Descendant</strong>: A descendant is defined as a person born in Denmark whose parents (or one of them if there is no available information on the other parent) are either immigrants or descendants with foreign citizenship. If there is no available information on either of the parents and the person in question is a foreign citizen, the person is also defined as a descendant.</p></li>
<li><p><strong>Person of Danish origin</strong>: A person – regardless place of birth – where at least one parent is Danish citizen and also born in Denmark.</p></li>
<li><p><strong>Country of origin</strong>: Country of origin is defined as following:</p></li>
</ul>
<p>When no parents are known, the country of origin is defined from the persons own information. If the person is an immigrant, it’s assumed that the country of origin is equal to the country of birth. If the person is a descendant, it’s assumed that the country of origin is equal to the country of citizenship.</p>
<p>When only one parent is known, the country of origin is defined as the country of birth of the parent. If this is Denmark, the country of citizenship is used.</p>
<p>When both parents are known, the country of origin is defined as the country of birth of the mother respectively country of citizenship.</p>

</div>



<h3>References</h3>
<div id="refs" class="references csl-bib-body hanging-indent">
<div id="ref-Jeanty2010" class="csl-entry">
Jeanty, P. Wilner, Mark Partridge, and Elena Irwin. 2010. <span>“<span class="nocase">Estimation of a spatial simultaneous equation model of population migration and housing price dynamics</span>.”</span> <em>Regional Science and Urban Economics</em> 40 (5): 343–52. <a href="https://doi.org/10.1016/j.regsciurbeco.2010.01.002">https://doi.org/10.1016/j.regsciurbeco.2010.01.002</a>.
</div>
<div id="ref-Lin2018" class="csl-entry">
Lin, Yingchao, Zhili Ma, Ke Zhao, Weiyan Hu, and Jing Wei. 2018. <span>“<span class="nocase">The Impact of Population Migration on Urban Housing Prices: Evidence from China’s Major Cities</span>.”</span> <em>Sustainability</em> 10 (9): 3169. <a href="https://doi.org/10.3390/su10093169">https://doi.org/10.3390/su10093169</a>.
</div>
<div id="ref-Peng2019" class="csl-entry">
Peng, Chien-Wen, and I-Chun Tsai. 2019. <span>“<span class="nocase">The long- and short-run influences of housing prices on migration</span>.”</span> <em>Cities</em> 93 (May): 253–62. <a href="https://doi.org/10.1016/j.cities.2019.05.011">https://doi.org/10.1016/j.cities.2019.05.011</a>.
</div>
<div id="ref-Tyrcha2019" class="csl-entry">
Tyrcha, Adam, and Maria Abreu. 2019. <span>“<span class="nocase">Migration Diversity and House Prices - Evidence from Sweden</span>.”</span> <em>SSRN Electronic Journal</em>, 1–36. <a href="https://doi.org/10.2139/ssrn.3394234">https://doi.org/10.2139/ssrn.3394234</a>.
</div>
<div id="ref-Wang2017a" class="csl-entry">
Wang, Xin-Rui, Eddie Chi-Man Hui, and Jiu-Xia Sun. 2017. <span>“<span class="nocase">Population migration, urbanization and housing prices: Evidence from the cities in China</span>.”</span> <em>Habitat International</em> 66 (August): 49–56. <a href="https://doi.org/10.1016/j.habitatint.2017.05.010">https://doi.org/10.1016/j.habitatint.2017.05.010</a>.
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="index.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="hedonic-price-model.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": false,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": false
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/javiereliomedina/housing_prices_book/edit/master/011_pop_growth_LAU.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
