<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 2 Housing prices at municipality level | Housing prices Copenhagen</title>
  <meta name="description" content="Housing prices BBR data" />
  <meta name="generator" content="bookdown 0.22 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 2 Housing prices at municipality level | Housing prices Copenhagen" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Housing prices BBR data" />
  <meta name="github-repo" content="javiereliomedina/housing_prices_book" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 2 Housing prices at municipality level | Housing prices Copenhagen" />
  
  <meta name="twitter:description" content="Housing prices BBR data" />
  

<meta name="author" content="Javier Elío, Henning S. Hansen, Frederik S. Hass, Carsten Keßler" />


<meta name="date" content="2021-06-22" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="pop-growth.html"/>
<link rel="next" href="study-area.html"/>
<script src="libs/header-attrs-2.8/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
<link href="libs/bsTable-3.3.7/bootstrapTable.min.css" rel="stylesheet" />
<script src="libs/bsTable-3.3.7/bootstrapTable.js"></script>
<script>
/* ========================================================================
 * Bootstrap: transition.js v3.3.7
 * http://getbootstrap.com/javascript/#transitions
 * ========================================================================
 * Copyright 2011-2016 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */


+function ($) {
  'use strict';

  // CSS TRANSITION SUPPORT (Shoutout: http://www.modernizr.com/)
  // ============================================================

  function transitionEnd() {
    var el = document.createElement('bootstrap')

    var transEndEventNames = {
      WebkitTransition : 'webkitTransitionEnd',
      MozTransition    : 'transitionend',
      OTransition      : 'oTransitionEnd otransitionend',
      transition       : 'transitionend'
    }

    for (var name in transEndEventNames) {
      if (el.style[name] !== undefined) {
        return { end: transEndEventNames[name] }
      }
    }

    return false // explicit for ie8 (  ._.)
  }

  // http://blog.alexmaccaw.com/css-transitions
  $.fn.emulateTransitionEnd = function (duration) {
    var called = false
    var $el = this
    $(this).one('bsTransitionEnd', function () { called = true })
    var callback = function () { if (!called) $($el).trigger($.support.transition.end) }
    setTimeout(callback, duration)
    return this
  }

  $(function () {
    $.support.transition = transitionEnd()

    if (!$.support.transition) return

    $.event.special.bsTransitionEnd = {
      bindType: $.support.transition.end,
      delegateType: $.support.transition.end,
      handle: function (e) {
        if ($(e.target).is(this)) return e.handleObj.handler.apply(this, arguments)
      }
    }
  })

}(jQuery);
</script>
<script>
/* ========================================================================
 * Bootstrap: collapse.js v3.3.7
 * http://getbootstrap.com/javascript/#collapse
 * ========================================================================
 * Copyright 2011-2016 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */

/* jshint latedef: false */

+function ($) {
  'use strict';

  // COLLAPSE PUBLIC CLASS DEFINITION
  // ================================

  var Collapse = function (element, options) {
    this.$element      = $(element)
    this.options       = $.extend({}, Collapse.DEFAULTS, options)
    this.$trigger      = $('[data-toggle="collapse"][href="#' + element.id + '"],' +
                           '[data-toggle="collapse"][data-target="#' + element.id + '"]')
    this.transitioning = null

    if (this.options.parent) {
      this.$parent = this.getParent()
    } else {
      this.addAriaAndCollapsedClass(this.$element, this.$trigger)
    }

    if (this.options.toggle) this.toggle()
  }

  Collapse.VERSION  = '3.3.7'

  Collapse.TRANSITION_DURATION = 350

  Collapse.DEFAULTS = {
    toggle: true
  }

  Collapse.prototype.dimension = function () {
    var hasWidth = this.$element.hasClass('width')
    return hasWidth ? 'width' : 'height'
  }

  Collapse.prototype.show = function () {
    if (this.transitioning || this.$element.hasClass('in')) return

    var activesData
    var actives = this.$parent && this.$parent.children('.panel').children('.in, .collapsing')

    if (actives && actives.length) {
      activesData = actives.data('bs.collapse')
      if (activesData && activesData.transitioning) return
    }

    var startEvent = $.Event('show.bs.collapse')
    this.$element.trigger(startEvent)
    if (startEvent.isDefaultPrevented()) return

    if (actives && actives.length) {
      Plugin.call(actives, 'hide')
      activesData || actives.data('bs.collapse', null)
    }

    var dimension = this.dimension()

    this.$element
      .removeClass('collapse')
      .addClass('collapsing')[dimension](0)
      .attr('aria-expanded', true)

    this.$trigger
      .removeClass('collapsed')
      .attr('aria-expanded', true)

    this.transitioning = 1

    var complete = function () {
      this.$element
        .removeClass('collapsing')
        .addClass('collapse in')[dimension]('')
      this.transitioning = 0
      this.$element
        .trigger('shown.bs.collapse')
    }

    if (!$.support.transition) return complete.call(this)

    var scrollSize = $.camelCase(['scroll', dimension].join('-'))

    this.$element
      .one('bsTransitionEnd', $.proxy(complete, this))
      .emulateTransitionEnd(Collapse.TRANSITION_DURATION)[dimension](this.$element[0][scrollSize])
  }

  Collapse.prototype.hide = function () {
    if (this.transitioning || !this.$element.hasClass('in')) return

    var startEvent = $.Event('hide.bs.collapse')
    this.$element.trigger(startEvent)
    if (startEvent.isDefaultPrevented()) return

    var dimension = this.dimension()

    this.$element[dimension](this.$element[dimension]())[0].offsetHeight

    this.$element
      .addClass('collapsing')
      .removeClass('collapse in')
      .attr('aria-expanded', false)

    this.$trigger
      .addClass('collapsed')
      .attr('aria-expanded', false)

    this.transitioning = 1

    var complete = function () {
      this.transitioning = 0
      this.$element
        .removeClass('collapsing')
        .addClass('collapse')
        .trigger('hidden.bs.collapse')
    }

    if (!$.support.transition) return complete.call(this)

    this.$element
      [dimension](0)
      .one('bsTransitionEnd', $.proxy(complete, this))
      .emulateTransitionEnd(Collapse.TRANSITION_DURATION)
  }

  Collapse.prototype.toggle = function () {
    this[this.$element.hasClass('in') ? 'hide' : 'show']()
  }

  Collapse.prototype.getParent = function () {
    return $(this.options.parent)
      .find('[data-toggle="collapse"][data-parent="' + this.options.parent + '"]')
      .each($.proxy(function (i, element) {
        var $element = $(element)
        this.addAriaAndCollapsedClass(getTargetFromTrigger($element), $element)
      }, this))
      .end()
  }

  Collapse.prototype.addAriaAndCollapsedClass = function ($element, $trigger) {
    var isOpen = $element.hasClass('in')

    $element.attr('aria-expanded', isOpen)
    $trigger
      .toggleClass('collapsed', !isOpen)
      .attr('aria-expanded', isOpen)
  }

  function getTargetFromTrigger($trigger) {
    var href
    var target = $trigger.attr('data-target')
      || (href = $trigger.attr('href')) && href.replace(/.*(?=#[^\s]+$)/, '') // strip for ie7

    return $(target)
  }


  // COLLAPSE PLUGIN DEFINITION
  // ==========================

  function Plugin(option) {
    return this.each(function () {
      var $this   = $(this)
      var data    = $this.data('bs.collapse')
      var options = $.extend({}, Collapse.DEFAULTS, $this.data(), typeof option == 'object' && option)

      if (!data && options.toggle && /show|hide/.test(option)) options.toggle = false
      if (!data) $this.data('bs.collapse', (data = new Collapse(this, options)))
      if (typeof option == 'string') data[option]()
    })
  }

  var old = $.fn.collapse

  $.fn.collapse             = Plugin
  $.fn.collapse.Constructor = Collapse


  // COLLAPSE NO CONFLICT
  // ====================

  $.fn.collapse.noConflict = function () {
    $.fn.collapse = old
    return this
  }


  // COLLAPSE DATA-API
  // =================

  $(document).on('click.bs.collapse.data-api', '[data-toggle="collapse"]', function (e) {
    var $this   = $(this)

    if (!$this.attr('data-target')) e.preventDefault()

    var $target = getTargetFromTrigger($this)
    var data    = $target.data('bs.collapse')
    var option  = data ? 'toggle' : $this.data()

    Plugin.call($target, option)
  })

}(jQuery);
</script>
<script>
window.initializeCodeFolding = function(show) {

  // handlers for show-all and hide all
  $("#rmd-show-all-code").click(function() {
    // close the dropdown menu when an option is clicked
    $("#allCodeButton").dropdown("toggle");
    $('div.r-code-collapse').each(function() {
      $(this).collapse('show');
    });
  });
  $("#rmd-hide-all-code").click(function() {
    // close the dropdown menu when an option is clicked
    $("#allCodeButton").dropdown("toggle");
    $('div.r-code-collapse').each(function() {
      $(this).collapse('hide');
    });
  });

  // index for unique code element ids
  var currentIndex = 1;

  // select all R code blocks
  var rCodeBlocks = $('pre.sourceCode, pre.r, pre.python, pre.bash, pre.sql, pre.cpp, pre.stan');
  rCodeBlocks.each(function() {

    // if code block has been labeled with class `fold-show`, show the code on init!
    var classList = $(this).attr('class').split(/\s+/);
    for (var i = 0; i < classList.length; i++) {
    if (classList[i] === 'fold-show') {
        show = true;
      }
    }

    // create a collapsable div to wrap the code in
    var div = $('<div class="collapse r-code-collapse"></div>');
    if (show)
      div.addClass('in');
    var id = 'rcode-643E0F36' + currentIndex++;
    div.attr('id', id);
    $(this).before(div);
    $(this).detach().appendTo(div);

    // add a show code button right above
    var showCodeText = $('<span>' + (show ? 'Hide' : 'Code') + '</span>');
    var showCodeButton = $('<button type="button" class="btn btn-default btn-xs code-folding-btn pull-right"></button>');
    showCodeButton.append(showCodeText);
    showCodeButton
        .attr('data-toggle', 'collapse')
        .attr('data-target', '#' + id)
        .attr('aria-expanded', show)
        .attr('aria-controls', id);

    var buttonRow = $('<div class="row"></div>');
    var buttonCol = $('<div class="col-md-12"></div>');

    buttonCol.append(showCodeButton);
    buttonRow.append(buttonCol);

    div.before(buttonRow);

    // hack: return show to false, otherwise all next codeBlocks will be shown!
    show = false;

    // update state of button on show/hide
    div.on('hidden.bs.collapse', function () {
      showCodeText.text('Code');
    });
    div.on('show.bs.collapse', function () {
      showCodeText.text('Hide');
    });
  });

}
</script>
<script>
/* ========================================================================
 * Bootstrap: dropdown.js v3.3.7
 * http://getbootstrap.com/javascript/#dropdowns
 * ========================================================================
 * Copyright 2011-2016 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */


+function ($) {
  'use strict';

  // DROPDOWN CLASS DEFINITION
  // =========================

  var backdrop = '.dropdown-backdrop'
  var toggle   = '[data-toggle="dropdown"]'
  var Dropdown = function (element) {
    $(element).on('click.bs.dropdown', this.toggle)
  }

  Dropdown.VERSION = '3.3.7'

  function getParent($this) {
    var selector = $this.attr('data-target')

    if (!selector) {
      selector = $this.attr('href')
      selector = selector && /#[A-Za-z]/.test(selector) && selector.replace(/.*(?=#[^\s]*$)/, '') // strip for ie7
    }

    var $parent = selector && $(selector)

    return $parent && $parent.length ? $parent : $this.parent()
  }

  function clearMenus(e) {
    if (e && e.which === 3) return
    $(backdrop).remove()
    $(toggle).each(function () {
      var $this         = $(this)
      var $parent       = getParent($this)
      var relatedTarget = { relatedTarget: this }

      if (!$parent.hasClass('open')) return

      if (e && e.type == 'click' && /input|textarea/i.test(e.target.tagName) && $.contains($parent[0], e.target)) return

      $parent.trigger(e = $.Event('hide.bs.dropdown', relatedTarget))

      if (e.isDefaultPrevented()) return

      $this.attr('aria-expanded', 'false')
      $parent.removeClass('open').trigger($.Event('hidden.bs.dropdown', relatedTarget))
    })
  }

  Dropdown.prototype.toggle = function (e) {
    var $this = $(this)

    if ($this.is('.disabled, :disabled')) return

    var $parent  = getParent($this)
    var isActive = $parent.hasClass('open')

    clearMenus()

    if (!isActive) {
      if ('ontouchstart' in document.documentElement && !$parent.closest('.navbar-nav').length) {
        // if mobile we use a backdrop because click events don't delegate
        $(document.createElement('div'))
          .addClass('dropdown-backdrop')
          .insertAfter($(this))
          .on('click', clearMenus)
      }

      var relatedTarget = { relatedTarget: this }
      $parent.trigger(e = $.Event('show.bs.dropdown', relatedTarget))

      if (e.isDefaultPrevented()) return

      $this
        .trigger('focus')
        .attr('aria-expanded', 'true')

      $parent
        .toggleClass('open')
        .trigger($.Event('shown.bs.dropdown', relatedTarget))
    }

    return false
  }

  Dropdown.prototype.keydown = function (e) {
    if (!/(38|40|27|32)/.test(e.which) || /input|textarea/i.test(e.target.tagName)) return

    var $this = $(this)

    e.preventDefault()
    e.stopPropagation()

    if ($this.is('.disabled, :disabled')) return

    var $parent  = getParent($this)
    var isActive = $parent.hasClass('open')

    if (!isActive && e.which != 27 || isActive && e.which == 27) {
      if (e.which == 27) $parent.find(toggle).trigger('focus')
      return $this.trigger('click')
    }

    var desc = ' li:not(.disabled):visible a'
    var $items = $parent.find('.dropdown-menu' + desc)

    if (!$items.length) return

    var index = $items.index(e.target)

    if (e.which == 38 && index > 0)                 index--         // up
    if (e.which == 40 && index < $items.length - 1) index++         // down
    if (!~index)                                    index = 0

    $items.eq(index).trigger('focus')
  }


  // DROPDOWN PLUGIN DEFINITION
  // ==========================

  function Plugin(option) {
    return this.each(function () {
      var $this = $(this)
      var data  = $this.data('bs.dropdown')

      if (!data) $this.data('bs.dropdown', (data = new Dropdown(this)))
      if (typeof option == 'string') data[option].call($this)
    })
  }

  var old = $.fn.dropdown

  $.fn.dropdown             = Plugin
  $.fn.dropdown.Constructor = Dropdown


  // DROPDOWN NO CONFLICT
  // ====================

  $.fn.dropdown.noConflict = function () {
    $.fn.dropdown = old
    return this
  }


  // APPLY TO STANDARD DROPDOWN ELEMENTS
  // ===================================

  $(document)
    .on('click.bs.dropdown.data-api', clearMenus)
    .on('click.bs.dropdown.data-api', '.dropdown form', function (e) { e.stopPropagation() })
    .on('click.bs.dropdown.data-api', toggle, Dropdown.prototype.toggle)
    .on('keydown.bs.dropdown.data-api', toggle, Dropdown.prototype.keydown)
    .on('keydown.bs.dropdown.data-api', '.dropdown-menu', Dropdown.prototype.keydown)

}(jQuery);
</script>
<style type="text/css">
.code-folding-btn {
  margin-bottom: 4px;
}

.row { display: flex; }
.collapse { display: none; }
.in { display:block }
.pull-right > .dropdown-menu {
    right: 0;
    left: auto;
}

.dropdown-menu {
    position: absolute;
    top: 100%;
    left: 0;
    z-index: 1000;
    display: none;
    float: left;
    min-width: 160px;
    padding: 5px 0;
    margin: 2px 0 0;
    font-size: 14px;
    text-align: left;
    list-style: none;
    background-color: #fff;
    -webkit-background-clip: padding-box;
    background-clip: padding-box;
    border: 1px solid #ccc;
    border: 1px solid rgba(0,0,0,.15);
    border-radius: 4px;
    -webkit-box-shadow: 0 6px 12px rgba(0,0,0,.175);
    box-shadow: 0 6px 12px rgba(0,0,0,.175);
}

.open > .dropdown-menu {
    display: block;
    color: #ffffff;
    background-color: #ffffff;
    background-image: none;
    border-color: #92897e;
}

.dropdown-menu > li > a {
  display: block;
  padding: 3px 20px;
  clear: both;
  font-weight: 400;
  line-height: 1.42857143;
  color: #000000;
  white-space: nowrap;
}

.dropdown-menu > li > a:hover,
.dropdown-menu > li > a:focus {
  color: #ffffff;
  text-decoration: none;
  background-color: #e95420;
}

.dropdown-menu > .active > a,
.dropdown-menu > .active > a:hover,
.dropdown-menu > .active > a:focus {
  color: #ffffff;
  text-decoration: none;
  background-color: #e95420;
  outline: 0;
}
.dropdown-menu > .disabled > a,
.dropdown-menu > .disabled > a:hover,
.dropdown-menu > .disabled > a:focus {
  color: #aea79f;
}

.dropdown-menu > .disabled > a:hover,
.dropdown-menu > .disabled > a:focus {
  text-decoration: none;
  cursor: not-allowed;
  background-color: transparent;
  background-image: none;
  filter: progid:DXImageTransform.Microsoft.gradient(enabled = false);
}

.btn {
  display: inline-block;
  margin-bottom: 1;
  font-weight: normal;
  text-align: center;
  white-space: nowrap;
  vertical-align: middle;
  -ms-touch-action: manipulation;
      touch-action: manipulation;
  cursor: pointer;
  background-image: none;
  border: 1px solid transparent;
  padding: 4px 8px;
  font-size: 14px;
  line-height: 1.42857143;
  border-radius: 4px;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

.btn:focus,
.btn:active:focus,
.btn.active:focus,
.btn.focus,
.btn:active.focus,
.btn.active.focus {
  outline: 5px auto -webkit-focus-ring-color;
  outline-offset: -2px;
}
.btn:hover,
.btn:focus,
.btn.focus {
  color: #ffffff;
  text-decoration: none;
}
.btn:active,
.btn.active {
  background-image: none;
  outline: 0;
  box-shadow: inset 0 3px 5px rgba(0, 0, 0, 0.125);
}
.btn.disabled,
.btn[disabled],
fieldset[disabled] .btn {
  cursor: not-allowed;
  filter: alpha(opacity=65);
  opacity: 0.65;
  box-shadow: none;
}
a.btn.disabled,
fieldset[disabled] a.btn {
  pointer-events: none;
}
.btn-default {
  color: #ffffff;
  background-color: #aea79f; #important
  border-color: #aea79f;
}

.btn-default:focus,
.btn-default.focus {
  color: #ffffff;
  background-color: #978e83;
  border-color: #6f675e;
}

.btn-default:hover {
  color: #ffffff;
  background-color: #978e83;
  border-color: #92897e;
}
.btn-default:active,
.btn-default.active,
.btn-group > .btn:not(:first-child):not(:last-child):not(.dropdown-toggle) {
  border-radius: 0;
}
.btn-group > .btn:first-child {
  margin-left: 0;
}
.btn-group > .btn:first-child:not(:last-child):not(.dropdown-toggle) {
  border-top-right-radius: 0;
  border-bottom-right-radius: 0;
}
.btn-group > .btn:last-child:not(:first-child),
.btn-group > .dropdown-toggle:not(:first-child) {
  border-top-left-radius: 0;
  border-bottom-left-radius: 0;
}
.btn-group > .btn-group {
  float: left;
}
.btn-group > .btn-group:not(:first-child):not(:last-child) > .btn {
  border-radius: 0;
}
.btn-group > .btn-group:first-child:not(:last-child) > .btn:last-child,
.btn-group > .btn-group:first-child:not(:last-child) > .dropdown-toggle {
  border-top-right-radius: 0;
  border-bottom-right-radius: 0;
}
.btn-group > .btn-group:last-child:not(:first-child) > .btn:first-child {
  border-top-left-radius: 0;
  border-bottom-left-radius: 0;
}
.btn-group .dropdown-toggle:active,
.btn-group.open .dropdown-toggle {
  outline: 0;
}
.btn-group > .btn + .dropdown-toggle {
  padding-right: 8px;
  padding-left: 8px;
}
.btn-group > .btn-lg + .dropdown-toggle {
  padding-right: 12px;
  padding-left: 12px;
}
.btn-group.open .dropdown-toggle {
  box-shadow: inset 0 3px 5px rgba(0, 0, 0, 0.125);
}
.btn-group.open .dropdown-toggle.btn-link {
  box-shadow: none;
}

</style>
<script>
var str = '<div class="btn-group pull-right" style="position: fixed; right: 50px; top: 10px; z-index: 200"><button type="button" class="btn btn-default btn-xs dropdown-toggle" id="allCodeButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true" data-_extension-text-contrast=""><span>Code</span> <span class="caret"></span></button><ul class="dropdown-menu" style="min-width: 50px;"><li><a id="rmd-show-all-code" href="#">Show All Code</a></li><li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li></ul></div>';
document.write(str);
</script>
<script>
$(document).ready(function () {
  window.initializeCodeFolding("show" === "hide");
});
</script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Housing prices in Copenhagen region</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Prerequisite</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#acknowledgements"><i class="fa fa-check"></i>Acknowledgements</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#r-session"><i class="fa fa-check"></i>R session</a></li>
</ul></li>
<li class="part"><span><b>I Population growth in Denmark and housing prices</b></span></li>
<li class="chapter" data-level="1" data-path="pop-growth.html"><a href="pop-growth.html"><i class="fa fa-check"></i><b>1</b> Population growth</a></li>
<li class="chapter" data-level="2" data-path="house-prices-LAUs.html"><a href="house-prices-LAUs.html"><i class="fa fa-check"></i><b>2</b> Housing prices at municipality level</a></li>
<li class="chapter" data-level="3" data-path="study-area.html"><a href="study-area.html"><i class="fa fa-check"></i><b>3</b> Copenhagen region</a>
<ul>
<li class="chapter" data-level="3.1" data-path="study-area.html"><a href="study-area.html#population-density-by-grid-cells-of-100m-x-100m"><i class="fa fa-check"></i><b>3.1</b> Population density by grid cells of 100m x 100m</a></li>
<li class="chapter" data-level="3.2" data-path="study-area.html"><a href="study-area.html#house-prices-by-grid-cells-of-100m-x-100m"><i class="fa fa-check"></i><b>3.2</b> House prices by grid cells of 100m x 100m</a></li>
</ul></li>
<li class="part"><span><b>II Hedonic price model</b></span></li>
<li class="chapter" data-level="4" data-path="hedonic-price-model.html"><a href="hedonic-price-model.html"><i class="fa fa-check"></i><b>4</b> Hedonic model</a>
<ul>
<li class="chapter" data-level="4.1" data-path="hedonic-price-model.html"><a href="hedonic-price-model.html#house-characteristics"><i class="fa fa-check"></i><b>4.1</b> House characteristics</a></li>
<li class="chapter" data-level="4.2" data-path="hedonic-price-model.html"><a href="hedonic-price-model.html#location-characteristics"><i class="fa fa-check"></i><b>4.2</b> Location characteristics</a></li>
<li class="chapter" data-level="4.3" data-path="hedonic-price-model.html"><a href="hedonic-price-model.html#neighbourhood-characteristics"><i class="fa fa-check"></i><b>4.3</b> Neighbourhood characteristics</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="OSM-features.html"><a href="OSM-features.html"><i class="fa fa-check"></i><b>5</b> Open Street Map</a>
<ul>
<li class="chapter" data-level="5.1" data-path="OSM-features.html"><a href="OSM-features.html#features"><i class="fa fa-check"></i><b>5.1</b> Features</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="OSM-features.html"><a href="OSM-features.html#areal-features"><i class="fa fa-check"></i><b>5.1.1</b> Areal features</a></li>
<li class="chapter" data-level="5.1.2" data-path="OSM-features.html"><a href="OSM-features.html#point-features"><i class="fa fa-check"></i><b>5.1.2</b> Point features</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="OSM-features.html"><a href="OSM-features.html#potential-model"><i class="fa fa-check"></i><b>5.2</b> Potential model</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="dist-CBD.html"><a href="dist-CBD.html"><i class="fa fa-check"></i><b>6</b> Distance to Central Business District</a></li>
<li class="chapter" data-level="7" data-path="noise.html"><a href="noise.html"><i class="fa fa-check"></i><b>7</b> Noise</a></li>
<li class="part"><span><b>III Data analysis</b></span></li>
<li class="chapter" data-level="8" data-path="EDA-house-prices.html"><a href="EDA-house-prices.html"><i class="fa fa-check"></i><b>8</b> Residential units saled as free scale</a>
<ul>
<li class="chapter" data-level="8.1" data-path="EDA-house-prices.html"><a href="EDA-house-prices.html#residential-units-by-floor-level"><i class="fa fa-check"></i><b>8.1</b> Residential units by floor level</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Housing prices Copenhagen</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="house-prices-LAUs" class="section level1" number="2">
<h1><span class="header-section-number">Chapter 2</span> Housing prices at municipality level</h1>
<p>We load all residences for year-round living (<em>ENH_ANVEND_KODE</em>) from the Building and Dwelling Register (<a href="https://teknik.bbr.dk/forside">BBR</a>), and then we estimate the mean and median prices in each municipality.</p>
<ul>
<li>110 = Farmhouse for agricultural property.<br />
</li>
<li>120, 121, 122 = Detached single-family house (detached house).</li>
<li>130, 131, 132 = Townhouse, chain, or semi-detached house (vertical separation between the units).</li>
<li>140 = Multi-storey residential building (multi-family house, including two-family house (horizontal separation between the units).</li>
<li>150 = College.</li>
<li>160 = Residential building for residential institution.</li>
<li>190 = Second building for year-round living.</li>
</ul>
<p>We selected from the main residential buildings those that are on the ordinary free trade (<em>OVERDRAGELSES_KODE == 1 - Almindelig frit salg</em>) or public sales (<em>OVERDRAGELSES_KODE == 3 - Auktion</em>). Furthermore, we filtered those dwellings that are actually used for residential purpose (i.e. <em>BOLIGTYPE_KODE <span class="math inline">\(\neq\)</span> E - Andet (bl.a. institutioner og erhverv)</em> or <em>BOLIGTYPE_KODE <span class="math inline">\(\neq\)</span> 5 - Sommer-/fritidsbolig</em>). Dwelling with a size lower that 10 <span class="math inline">\(m^2\)</span> were removed from the analysis. <em>Colleges</em> and <em>Residential building for residential institution</em> were also excluded from the data analysis since they are a special type of buildings dedicated to students residences and housing for institutions, respectively, and they are mainly outside of the free marked.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="house-prices-LAUs.html#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Residential buildings for year round living</span></span>
<span id="cb20-2"><a href="house-prices-LAUs.html#cb20-2" aria-hidden="true" tabindex="-1"></a>res_codes <span class="ot">&lt;-</span> <span class="fu">tribble</span> (<span class="sc">~</span>ENH_ANVEND_KODE, <span class="sc">~</span>type,</span>
<span id="cb20-3"><a href="house-prices-LAUs.html#cb20-3" aria-hidden="true" tabindex="-1"></a>                      <span class="dv">110</span>, <span class="st">&quot;Farmhouse&quot;</span>,</span>
<span id="cb20-4"><a href="house-prices-LAUs.html#cb20-4" aria-hidden="true" tabindex="-1"></a>                      <span class="dv">120</span>, <span class="st">&quot;Single-family house&quot;</span>,</span>
<span id="cb20-5"><a href="house-prices-LAUs.html#cb20-5" aria-hidden="true" tabindex="-1"></a>                      <span class="dv">121</span>, <span class="st">&quot;Single-family house&quot;</span>,</span>
<span id="cb20-6"><a href="house-prices-LAUs.html#cb20-6" aria-hidden="true" tabindex="-1"></a>                      <span class="dv">122</span>, <span class="st">&quot;Single-family house&quot;</span>,</span>
<span id="cb20-7"><a href="house-prices-LAUs.html#cb20-7" aria-hidden="true" tabindex="-1"></a>                      <span class="dv">130</span>, <span class="st">&quot;Semi-detached house&quot;</span>,</span>
<span id="cb20-8"><a href="house-prices-LAUs.html#cb20-8" aria-hidden="true" tabindex="-1"></a>                      <span class="dv">131</span>, <span class="st">&quot;Semi-detached house&quot;</span>,</span>
<span id="cb20-9"><a href="house-prices-LAUs.html#cb20-9" aria-hidden="true" tabindex="-1"></a>                      <span class="dv">132</span>, <span class="st">&quot;Semi-detached house&quot;</span>,</span>
<span id="cb20-10"><a href="house-prices-LAUs.html#cb20-10" aria-hidden="true" tabindex="-1"></a>                      <span class="dv">140</span>, <span class="st">&quot;Multi-storey&quot;</span>,</span>
<span id="cb20-11"><a href="house-prices-LAUs.html#cb20-11" aria-hidden="true" tabindex="-1"></a>                      <span class="dv">190</span>, <span class="st">&quot;Second building&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb20-12"><a href="house-prices-LAUs.html#cb20-12" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Convert type to factor</span></span>
<span id="cb20-13"><a href="house-prices-LAUs.html#cb20-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">type =</span> <span class="fu">factor</span>(type)) <span class="sc">%&gt;%</span></span>
<span id="cb20-14"><a href="house-prices-LAUs.html#cb20-14" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Convert to data.table</span></span>
<span id="cb20-15"><a href="house-prices-LAUs.html#cb20-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as.data.table</span>()</span>
<span id="cb20-16"><a href="house-prices-LAUs.html#cb20-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-17"><a href="house-prices-LAUs.html#cb20-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Aux. function</span></span>
<span id="cb20-18"><a href="house-prices-LAUs.html#cb20-18" aria-hidden="true" tabindex="-1"></a>f_average_price_muni <span class="ot">&lt;-</span> <span class="cf">function</span>(.file) {</span>
<span id="cb20-19"><a href="house-prices-LAUs.html#cb20-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fread</span>(.file) <span class="sc">%&gt;%</span> </span>
<span id="cb20-20"><a href="house-prices-LAUs.html#cb20-20" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Select only Residential houses - Buildings for year-round living</span></span>
<span id="cb20-21"><a href="house-prices-LAUs.html#cb20-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter.</span>(ENH_ANVEND_KODE <span class="sc">%in%</span> res_codes<span class="sc">$</span>ENH_ANVEND_KODE) <span class="sc">%&gt;%</span></span>
<span id="cb20-22"><a href="house-prices-LAUs.html#cb20-22" aria-hidden="true" tabindex="-1"></a>    <span class="co"># ordinary free trade or auction</span></span>
<span id="cb20-23"><a href="house-prices-LAUs.html#cb20-23" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter.</span>(OVERDRAGELSES_KODE <span class="sc">==</span> <span class="st">&quot;1&quot;</span> <span class="sc">|</span> OVERDRAGELSES_KODE <span class="sc">==</span> <span class="st">&quot;3&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb20-24"><a href="house-prices-LAUs.html#cb20-24" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Remove residential units not used for for residential purpose</span></span>
<span id="cb20-25"><a href="house-prices-LAUs.html#cb20-25" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter.</span>(BOLIGTYPE_KODE <span class="sc">!=</span> <span class="st">&quot;E&quot;</span> <span class="sc">|</span> BOLIGTYPE_KODE <span class="sc">!=</span> <span class="st">&quot;5&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb20-26"><a href="house-prices-LAUs.html#cb20-26" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Remove tiny dwellings (area &lt; 10 m2)</span></span>
<span id="cb20-27"><a href="house-prices-LAUs.html#cb20-27" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter.</span>(BEBO_ARL <span class="sc">&gt;=</span> <span class="dv">10</span>) <span class="sc">%&gt;%</span></span>
<span id="cb20-28"><a href="house-prices-LAUs.html#cb20-28" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Add year of the BBR dataset </span></span>
<span id="cb20-29"><a href="house-prices-LAUs.html#cb20-29" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate.</span>(<span class="at">year =</span> <span class="fu">parse_number</span>(stringr<span class="sc">::</span><span class="fu">str_extract</span>(.file, <span class="st">&quot;_[0-9]+_&quot;</span>))) <span class="sc">%&gt;%</span> </span>
<span id="cb20-30"><a href="house-prices-LAUs.html#cb20-30" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Convert house price (KONTANT_KOEBESUM) to numeric and kDKK</span></span>
<span id="cb20-31"><a href="house-prices-LAUs.html#cb20-31" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate.</span>(<span class="at">price_kDKK =</span> KONTANT_KOEBESUM <span class="sc">/</span> <span class="dv">1000</span>,</span>
<span id="cb20-32"><a href="house-prices-LAUs.html#cb20-32" aria-hidden="true" tabindex="-1"></a>            <span class="at">price_kDKK =</span> <span class="fu">as.numeric</span>(price_kDKK)) <span class="sc">%&gt;%</span> </span>
<span id="cb20-33"><a href="house-prices-LAUs.html#cb20-33" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Drop unused factors levels</span></span>
<span id="cb20-34"><a href="house-prices-LAUs.html#cb20-34" aria-hidden="true" tabindex="-1"></a>    <span class="fu">droplevels</span>()</span>
<span id="cb20-35"><a href="house-prices-LAUs.html#cb20-35" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb20-36"><a href="house-prices-LAUs.html#cb20-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-37"><a href="house-prices-LAUs.html#cb20-37" aria-hidden="true" tabindex="-1"></a><span class="co"># Read in parallel </span></span>
<span id="cb20-38"><a href="house-prices-LAUs.html#cb20-38" aria-hidden="true" tabindex="-1"></a>csv_files_path <span class="ot">&lt;-</span> <span class="fu">list.files</span>(<span class="at">path =</span> <span class="fu">Sys.getenv</span>(<span class="st">&quot;OneDrive_BBR_path&quot;</span>),</span>
<span id="cb20-39"><a href="house-prices-LAUs.html#cb20-39" aria-hidden="true" tabindex="-1"></a>                             <span class="at">pattern =</span> <span class="st">&quot;*.csv&quot;</span>,</span>
<span id="cb20-40"><a href="house-prices-LAUs.html#cb20-40" aria-hidden="true" tabindex="-1"></a>                             <span class="at">full.names =</span> <span class="cn">TRUE</span>)</span>
<span id="cb20-41"><a href="house-prices-LAUs.html#cb20-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-42"><a href="house-prices-LAUs.html#cb20-42" aria-hidden="true" tabindex="-1"></a><span class="fu">plan</span>(multisession, <span class="at">workers =</span> <span class="dv">7</span>)</span>
<span id="cb20-43"><a href="house-prices-LAUs.html#cb20-43" aria-hidden="true" tabindex="-1"></a>res_prices_read <span class="ot">&lt;-</span> <span class="fu">future_map_dfr</span>(<span class="at">.x =</span> csv_files_path,</span>
<span id="cb20-44"><a href="house-prices-LAUs.html#cb20-44" aria-hidden="true" tabindex="-1"></a>                             <span class="at">.f =</span> f_average_price_muni) <span class="sc">%&gt;%</span> </span>
<span id="cb20-45"><a href="house-prices-LAUs.html#cb20-45" aria-hidden="true" tabindex="-1"></a>  <span class="co"># rename KomKode</span></span>
<span id="cb20-46"><a href="house-prices-LAUs.html#cb20-46" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate.</span>(<span class="at">KomKode =</span> <span class="fu">paste0</span>(<span class="st">&quot;0&quot;</span>, KomKode)) <span class="sc">%&gt;%</span> </span>
<span id="cb20-47"><a href="house-prices-LAUs.html#cb20-47" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename.</span>(<span class="at">muni_id =</span> KomKode)</span>
<span id="cb20-48"><a href="house-prices-LAUs.html#cb20-48" aria-hidden="true" tabindex="-1"></a><span class="fu">plan</span>(<span class="st">&quot;default&quot;</span>)</span></code></pre></div>
<p>There are some unrealistic house prices in <em>Kerteminde</em> and <em>Ringsted</em> municipalities. In this sense, there are 499 houses with a value of 267000000 DKK in <em>Kerteminde</em> and 310 with a value of 375000000 DKK in <em>Ringsted</em>. We may expect few houses with very high prices in this areas but these numbers seem unlikely for small towns and oly for one year (2008 and 2011, respectively). Therefore, we have removed them from the datasets assuming there was a mistake in the data imputation and we do not have other criteria for assigning a realistic value. We also remove properties with no value (<em>KONTANT_KOEBESUM</em> = 0; there were 18,801 of 1,494,495 data)</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="house-prices-LAUs.html#cb21-1" aria-hidden="true" tabindex="-1"></a>res_prices <span class="ot">&lt;-</span> res_prices_read <span class="sc">%&gt;%</span></span>
<span id="cb21-2"><a href="house-prices-LAUs.html#cb21-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>(muni_id <span class="sc">==</span> <span class="st">&quot;0440&quot;</span> <span class="sc">&amp;</span> year <span class="sc">==</span> <span class="dv">2008</span> <span class="sc">&amp;</span> KONTANT_KOEBESUM <span class="sc">==</span> <span class="dv">267000000</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb21-3"><a href="house-prices-LAUs.html#cb21-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>(muni_id <span class="sc">==</span> <span class="st">&quot;0329&quot;</span> <span class="sc">&amp;</span> year <span class="sc">==</span> <span class="dv">2011</span> <span class="sc">&amp;</span> KONTANT_KOEBESUM <span class="sc">==</span> <span class="dv">375000000</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb21-4"><a href="house-prices-LAUs.html#cb21-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(KONTANT_KOEBESUM <span class="sc">&gt;</span> <span class="dv">0</span>)</span></code></pre></div>
<p>We adjusted the housing prices to 2019 prices. In this regard, we take into account the inflation and, therefore, prices from different years can be compared (<span class="citation"><a href="#ref-Valtersdorf2020" role="doc-biblioref">Valtersdorf Møller</a> (<a href="#ref-Valtersdorf2020" role="doc-biblioref">2020</a>)</span>). The adjusted price is obtained as follow:</p>
<p><span class="math display">\[ Pice_{2019} = Price_{i} \cdot \frac{Index_{2019}}{Index_{i}}\]</span></p>
<p>Where, <span class="math inline">\(Price_{2019}\)</span> is the adjusted housing price for 2019, <span class="math inline">\(Price_{i}\)</span> is the price of the respective year <span class="math inline">\(i\)</span>, and <span class="math inline">\(Index_{i}\)</span> and <span class="math inline">\(Index_{2019}\)</span> are the price indexes for the origin year <span class="math inline">\({i}\)</span> and <span class="math inline">\(2019\)</span>, respectively. The indexes have been obtained from Statistic Denmark; i.e. table <a href="https://www.statistikbanken.dk/statbank5a/SelectVarVal/Define.asp?MainTable=EJ6&amp;PLanguage=1&amp;PXSId=0&amp;wsid=cftree">EJ6: Price index for sales property (2006=100) by category of real property and unit</a> (Table <a href="house-prices-LAUs.html#tab:price-index-DK">2.1</a>).</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="house-prices-LAUs.html#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co"># DST table (PRIS112 - Consumer price index (2015=100) by main figures and time)</span></span>
<span id="cb22-2"><a href="house-prices-LAUs.html#cb22-2" aria-hidden="true" tabindex="-1"></a>  id_table <span class="ot">&lt;-</span> <span class="st">&quot;EJ6&quot;</span></span>
<span id="cb22-3"><a href="house-prices-LAUs.html#cb22-3" aria-hidden="true" tabindex="-1"></a>  dat_meta <span class="ot">&lt;-</span> <span class="fu">get_table_metadata</span>(<span class="at">table_id =</span> id_table, <span class="at">variables_only =</span> <span class="cn">TRUE</span>)</span>
<span id="cb22-4"><a href="house-prices-LAUs.html#cb22-4" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb22-5"><a href="house-prices-LAUs.html#cb22-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Values to retrieve</span></span>
<span id="cb22-6"><a href="house-prices-LAUs.html#cb22-6" aria-hidden="true" tabindex="-1"></a>  variables <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb22-7"><a href="house-prices-LAUs.html#cb22-7" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Category of real property (i.e. One-family houses)</span></span>
<span id="cb22-8"><a href="house-prices-LAUs.html#cb22-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">list</span>(<span class="at">code =</span> <span class="st">&quot;EJENDOMSKATE&quot;</span>, <span class="at">values =</span> <span class="st">&quot;0111&quot;</span>),</span>
<span id="cb22-9"><a href="house-prices-LAUs.html#cb22-9" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Index</span></span>
<span id="cb22-10"><a href="house-prices-LAUs.html#cb22-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">list</span>(<span class="at">code =</span> <span class="st">&quot;TAL&quot;</span>, <span class="at">values =</span> <span class="st">&quot;100&quot;</span>),</span>
<span id="cb22-11"><a href="house-prices-LAUs.html#cb22-11" aria-hidden="true" tabindex="-1"></a>    <span class="co"># From 2004 to 2019</span></span>
<span id="cb22-12"><a href="house-prices-LAUs.html#cb22-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">list</span>(<span class="at">code =</span> <span class="st">&quot;Tid&quot;</span>, <span class="at">values =</span> <span class="fu">seq</span>(<span class="dv">2004</span>, <span class="dv">2019</span>, <span class="dv">1</span>))</span>
<span id="cb22-13"><a href="house-prices-LAUs.html#cb22-13" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb22-14"><a href="house-prices-LAUs.html#cb22-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-15"><a href="house-prices-LAUs.html#cb22-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Get index</span></span>
<span id="cb22-16"><a href="house-prices-LAUs.html#cb22-16" aria-hidden="true" tabindex="-1"></a>  price_index <span class="ot">&lt;-</span> <span class="fu">get_data</span>(<span class="st">&quot;EJ6&quot;</span>, variables) <span class="sc">%&gt;%</span> </span>
<span id="cb22-17"><a href="house-prices-LAUs.html#cb22-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(<span class="sc">-</span>TAL) <span class="sc">%&gt;%</span> </span>
<span id="cb22-18"><a href="house-prices-LAUs.html#cb22-18" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Translate into English </span></span>
<span id="cb22-19"><a href="house-prices-LAUs.html#cb22-19" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rename</span>(<span class="at">index_desc =</span> EJENDOMSKATE,</span>
<span id="cb22-20"><a href="house-prices-LAUs.html#cb22-20" aria-hidden="true" tabindex="-1"></a>           <span class="at">index_year =</span> TID, </span>
<span id="cb22-21"><a href="house-prices-LAUs.html#cb22-21" aria-hidden="true" tabindex="-1"></a>           <span class="at">index_value =</span> INDHOLD) <span class="sc">%&gt;%</span> </span>
<span id="cb22-22"><a href="house-prices-LAUs.html#cb22-22" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Convert index tu numeric</span></span>
<span id="cb22-23"><a href="house-prices-LAUs.html#cb22-23" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">index_value =</span> index_value<span class="sc">/</span><span class="dv">10</span>) </span>
<span id="cb22-24"><a href="house-prices-LAUs.html#cb22-24" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb22-25"><a href="house-prices-LAUs.html#cb22-25" aria-hidden="true" tabindex="-1"></a><span class="co"># Print price index table  </span></span>
<span id="cb22-26"><a href="house-prices-LAUs.html#cb22-26" aria-hidden="true" tabindex="-1"></a>  price_index <span class="sc">%&gt;%</span> </span>
<span id="cb22-27"><a href="house-prices-LAUs.html#cb22-27" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Wide format</span></span>
<span id="cb22-28"><a href="house-prices-LAUs.html#cb22-28" aria-hidden="true" tabindex="-1"></a>    <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> index_year, </span>
<span id="cb22-29"><a href="house-prices-LAUs.html#cb22-29" aria-hidden="true" tabindex="-1"></a>                <span class="at">values_from =</span> index_value) <span class="sc">%&gt;%</span> </span>
<span id="cb22-30"><a href="house-prices-LAUs.html#cb22-30" aria-hidden="true" tabindex="-1"></a>    <span class="fu">kbl</span>(<span class="at">caption =</span> <span class="st">&quot;Price index for sale properties in Denmark&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb22-31"><a href="house-prices-LAUs.html#cb22-31" aria-hidden="true" tabindex="-1"></a>    <span class="fu">kable_paper</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb22-32"><a href="house-prices-LAUs.html#cb22-32" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scroll_box</span>(<span class="at">width =</span> <span class="st">&quot;100%&quot;</span>)</span></code></pre></div>
<div style="border: 1px solid #ddd; padding: 5px; overflow-x: scroll; width:100%; ">
<table class=" lightable-paper" style="font-family: &quot;Arial Narrow&quot;, arial, helvetica, sans-serif; margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:price-index-DK">Table 2.1: </span>Price index for sale properties in Denmark
</caption>
<thead>
<tr>
<th style="text-align:left;">
index_desc
</th>
<th style="text-align:right;">
2004
</th>
<th style="text-align:right;">
2005
</th>
<th style="text-align:right;">
2006
</th>
<th style="text-align:right;">
2007
</th>
<th style="text-align:right;">
2008
</th>
<th style="text-align:right;">
2009
</th>
<th style="text-align:right;">
2010
</th>
<th style="text-align:right;">
2011
</th>
<th style="text-align:right;">
2012
</th>
<th style="text-align:right;">
2013
</th>
<th style="text-align:right;">
2014
</th>
<th style="text-align:right;">
2015
</th>
<th style="text-align:right;">
2016
</th>
<th style="text-align:right;">
2017
</th>
<th style="text-align:right;">
2018
</th>
<th style="text-align:right;">
2019
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
One-family houses
</td>
<td style="text-align:right;">
70.1
</td>
<td style="text-align:right;">
82.3
</td>
<td style="text-align:right;">
100
</td>
<td style="text-align:right;">
105
</td>
<td style="text-align:right;">
101
</td>
<td style="text-align:right;">
88.1
</td>
<td style="text-align:right;">
90.5
</td>
<td style="text-align:right;">
88.1
</td>
<td style="text-align:right;">
85.1
</td>
<td style="text-align:right;">
87.4
</td>
<td style="text-align:right;">
90.4
</td>
<td style="text-align:right;">
95.8
</td>
<td style="text-align:right;">
99.6
</td>
<td style="text-align:right;">
104
</td>
<td style="text-align:right;">
108
</td>
<td style="text-align:right;">
111
</td>
</tr>
</tbody>
</table>
</div>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="house-prices-LAUs.html#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Adjust housing prices</span></span>
<span id="cb23-2"><a href="house-prices-LAUs.html#cb23-2" aria-hidden="true" tabindex="-1"></a>price_index_2019 <span class="ot">&lt;-</span> price_index <span class="sc">%&gt;%</span> </span>
<span id="cb23-3"><a href="house-prices-LAUs.html#cb23-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(index_year <span class="sc">==</span> <span class="dv">2019</span>)</span>
<span id="cb23-4"><a href="house-prices-LAUs.html#cb23-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-5"><a href="house-prices-LAUs.html#cb23-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Add adjusted prices </span></span>
<span id="cb23-6"><a href="house-prices-LAUs.html#cb23-6" aria-hidden="true" tabindex="-1"></a>res_prices <span class="ot">&lt;-</span> res_prices <span class="sc">%&gt;%</span> </span>
<span id="cb23-7"><a href="house-prices-LAUs.html#cb23-7" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Add price index by year and category</span></span>
<span id="cb23-8"><a href="house-prices-LAUs.html#cb23-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join.</span>(price_index, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">&quot;year&quot;</span> <span class="ot">=</span> <span class="st">&quot;index_year&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb23-9"><a href="house-prices-LAUs.html#cb23-9" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Add columns with index_2019</span></span>
<span id="cb23-10"><a href="house-prices-LAUs.html#cb23-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate.</span>(<span class="at">index_2019 =</span> price_index_2019<span class="sc">$</span>index_year) <span class="sc">%&gt;%</span> </span>
<span id="cb23-11"><a href="house-prices-LAUs.html#cb23-11" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Calculate prices 2019</span></span>
<span id="cb23-12"><a href="house-prices-LAUs.html#cb23-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate.</span>(<span class="at">price_2019_kDKK =</span> (price_kDKK <span class="sc">*</span> index_2019 <span class="sc">/</span> index_value)) <span class="sc">%&gt;%</span> </span>
<span id="cb23-13"><a href="house-prices-LAUs.html#cb23-13" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Price per m2</span></span>
<span id="cb23-14"><a href="house-prices-LAUs.html#cb23-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">price_2019_kDKK_m2 =</span> price_2019_kDKK <span class="sc">/</span> BEBO_ARL)</span></code></pre></div>
<p>Prices change (median) from 2008 to 2019.</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="house-prices-LAUs.html#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Summary statistics of 2019 adjusted housing prices by municipalities</span></span>
<span id="cb24-2"><a href="house-prices-LAUs.html#cb24-2" aria-hidden="true" tabindex="-1"></a>res_prices_muni <span class="ot">&lt;-</span> res_prices <span class="sc">%&gt;%</span></span>
<span id="cb24-3"><a href="house-prices-LAUs.html#cb24-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># 2008  - year we start to have population data </span></span>
<span id="cb24-4"><a href="house-prices-LAUs.html#cb24-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter.</span>(year <span class="sc">&gt;=</span> <span class="dv">2008</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb24-5"><a href="house-prices-LAUs.html#cb24-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Estimate mean and median values (house prices)</span></span>
<span id="cb24-6"><a href="house-prices-LAUs.html#cb24-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise.</span>(<span class="at">num_res_units =</span> <span class="fu">n</span>(), </span>
<span id="cb24-7"><a href="house-prices-LAUs.html#cb24-7" aria-hidden="true" tabindex="-1"></a>             <span class="at">median_2019_kDKK_m2 =</span> <span class="fu">median</span>(price_2019_kDKK_m2),</span>
<span id="cb24-8"><a href="house-prices-LAUs.html#cb24-8" aria-hidden="true" tabindex="-1"></a>             <span class="at">.by =</span> <span class="fu">c</span>(muni_id, year)) <span class="sc">%&gt;%</span> </span>
<span id="cb24-9"><a href="house-prices-LAUs.html#cb24-9" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Price change with 2008 as baseline</span></span>
<span id="cb24-10"><a href="house-prices-LAUs.html#cb24-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange.</span>(muni_id, year) <span class="sc">%&gt;%</span> </span>
<span id="cb24-11"><a href="house-prices-LAUs.html#cb24-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate.</span>(</span>
<span id="cb24-12"><a href="house-prices-LAUs.html#cb24-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">median_2019_kDKK_m2_dif =</span> </span>
<span id="cb24-13"><a href="house-prices-LAUs.html#cb24-13" aria-hidden="true" tabindex="-1"></a>      <span class="dv">100</span> <span class="sc">*</span> (median_2019_kDKK_m2 <span class="sc">-</span> <span class="fu">first</span>(median_2019_kDKK_m2)) <span class="sc">/</span> <span class="fu">first</span>(median_2019_kDKK_m2),</span>
<span id="cb24-14"><a href="house-prices-LAUs.html#cb24-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">.by =</span> muni_id)</span>
<span id="cb24-15"><a href="house-prices-LAUs.html#cb24-15" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb24-16"><a href="house-prices-LAUs.html#cb24-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Link house prices (at the first day of the year) with population.  </span></span>
<span id="cb24-17"><a href="house-prices-LAUs.html#cb24-17" aria-hidden="true" tabindex="-1"></a>dk_muni_prices <span class="ot">&lt;-</span> dk_muni_pop <span class="sc">%&gt;%</span> </span>
<span id="cb24-18"><a href="house-prices-LAUs.html#cb24-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_tibble</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb24-19"><a href="house-prices-LAUs.html#cb24-19" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Population at the first day of the year</span></span>
<span id="cb24-20"><a href="house-prices-LAUs.html#cb24-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(date, <span class="fu">c</span>(<span class="st">&quot;year&quot;</span>, <span class="st">&quot;month&quot;</span>, <span class="st">&quot;day&quot;</span>), <span class="at">sep =</span> <span class="st">&quot;-&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb24-21"><a href="house-prices-LAUs.html#cb24-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(month <span class="sc">==</span> <span class="st">&quot;01&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb24-22"><a href="house-prices-LAUs.html#cb24-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">year =</span> <span class="fu">as.numeric</span>(year)) <span class="sc">%&gt;%</span> </span>
<span id="cb24-23"><a href="house-prices-LAUs.html#cb24-23" aria-hidden="true" tabindex="-1"></a>  <span class="co"># get only population data by municipality</span></span>
<span id="cb24-24"><a href="house-prices-LAUs.html#cb24-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(muni_id, muni_name, area_km2, year, ancestry, pop, pop_km2, geometry) <span class="sc">%&gt;%</span></span>
<span id="cb24-25"><a href="house-prices-LAUs.html#cb24-25" aria-hidden="true" tabindex="-1"></a>  <span class="co"># wide format</span></span>
<span id="cb24-26"><a href="house-prices-LAUs.html#cb24-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> ancestry,</span>
<span id="cb24-27"><a href="house-prices-LAUs.html#cb24-27" aria-hidden="true" tabindex="-1"></a>              <span class="at">values_from =</span> <span class="fu">c</span>(pop, pop_km2)) <span class="sc">%&gt;%</span> </span>
<span id="cb24-28"><a href="house-prices-LAUs.html#cb24-28" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Add spatial residential prices </span></span>
<span id="cb24-29"><a href="house-prices-LAUs.html#cb24-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(res_prices_muni, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">&quot;muni_id&quot;</span>, <span class="st">&quot;year&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb24-30"><a href="house-prices-LAUs.html#cb24-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">st_sf</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb24-31"><a href="house-prices-LAUs.html#cb24-31" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Remove Christiansø (there is no residential houses)</span></span>
<span id="cb24-32"><a href="house-prices-LAUs.html#cb24-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(muni_id <span class="sc">!=</span> <span class="st">&quot;0411&quot;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="house-prices-LAUs.html#cb25-1" aria-hidden="true" tabindex="-1"></a>dk_muni_prices <span class="sc">%&gt;%</span> </span>
<span id="cb25-2"><a href="house-prices-LAUs.html#cb25-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2019</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb25-3"><a href="house-prices-LAUs.html#cb25-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb25-4"><a href="house-prices-LAUs.html#cb25-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_sf</span>(<span class="fu">aes</span>(<span class="at">fill =</span> median_2019_kDKK_m2_dif),</span>
<span id="cb25-5"><a href="house-prices-LAUs.html#cb25-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">color =</span> <span class="st">&quot;grey&quot;</span>, <span class="at">size =</span> <span class="fl">0.05</span>) <span class="sc">+</span></span>
<span id="cb25-6"><a href="house-prices-LAUs.html#cb25-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_gradient2</span>(<span class="at">name =</span> <span class="st">&quot;Change [%]&quot;</span>,</span>
<span id="cb25-7"><a href="house-prices-LAUs.html#cb25-7" aria-hidden="true" tabindex="-1"></a>                         <span class="at">low =</span> <span class="st">&quot;blue&quot;</span>,</span>
<span id="cb25-8"><a href="house-prices-LAUs.html#cb25-8" aria-hidden="true" tabindex="-1"></a>                         <span class="at">mid =</span> <span class="st">&quot;white&quot;</span>,</span>
<span id="cb25-9"><a href="house-prices-LAUs.html#cb25-9" aria-hidden="true" tabindex="-1"></a>                         <span class="at">high =</span> <span class="st">&quot;red&quot;</span>,</span>
<span id="cb25-10"><a href="house-prices-LAUs.html#cb25-10" aria-hidden="true" tabindex="-1"></a>                         <span class="at">midpoint =</span> <span class="dv">0</span>) <span class="sc">+</span></span>
<span id="cb25-11"><a href="house-prices-LAUs.html#cb25-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_void</span>()</span></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:fig-prices-LAUs"></span>
<img src="Housing_prices_book_files/figure-html/fig-prices-LAUs-1.png" alt="Adjusted 2019 housing prices variation from 2008 to 2019" width="672" />
<p class="caption">
Figure 2.1: Adjusted 2019 housing prices variation from 2008 to 2019
</p>
</div>
<p>Relationship between population density and house prices (median values) at municipality level.</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="house-prices-LAUs.html#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot</span></span>
<span id="cb26-2"><a href="house-prices-LAUs.html#cb26-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb26-3"><a href="house-prices-LAUs.html#cb26-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">data =</span> dk_muni_prices,</span>
<span id="cb26-4"><a href="house-prices-LAUs.html#cb26-4" aria-hidden="true" tabindex="-1"></a>             <span class="fu">aes</span>(<span class="at">x =</span> pop_km2_Total,</span>
<span id="cb26-5"><a href="house-prices-LAUs.html#cb26-5" aria-hidden="true" tabindex="-1"></a>                 <span class="at">y =</span> median_2019_kDKK_m2,</span>
<span id="cb26-6"><a href="house-prices-LAUs.html#cb26-6" aria-hidden="true" tabindex="-1"></a>                 <span class="at">colour =</span> muni_name,</span>
<span id="cb26-7"><a href="house-prices-LAUs.html#cb26-7" aria-hidden="true" tabindex="-1"></a>                 <span class="at">shape =</span> <span class="fu">factor</span>(year))) <span class="sc">+</span></span>
<span id="cb26-8"><a href="house-prices-LAUs.html#cb26-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_shape_manual</span>(<span class="at">values =</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nlevels</span>(<span class="fu">factor</span>(dk_muni_prices<span class="sc">$</span>year))) <span class="sc">+</span></span>
<span id="cb26-9"><a href="house-prices-LAUs.html#cb26-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_log10</span>() <span class="sc">+</span></span>
<span id="cb26-10"><a href="house-prices-LAUs.html#cb26-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_mark_ellipse</span>(<span class="at">data =</span> dk_muni_prices_lbls,</span>
<span id="cb26-11"><a href="house-prices-LAUs.html#cb26-11" aria-hidden="true" tabindex="-1"></a>                    <span class="fu">aes</span>(<span class="at">x =</span> pop_km2_Total,</span>
<span id="cb26-12"><a href="house-prices-LAUs.html#cb26-12" aria-hidden="true" tabindex="-1"></a>                        <span class="at">y =</span> median_2019_kDKK_m2,</span>
<span id="cb26-13"><a href="house-prices-LAUs.html#cb26-13" aria-hidden="true" tabindex="-1"></a>                        <span class="at">colour =</span> muni_name,</span>
<span id="cb26-14"><a href="house-prices-LAUs.html#cb26-14" aria-hidden="true" tabindex="-1"></a>                        <span class="at">label =</span> muni_name),</span>
<span id="cb26-15"><a href="house-prices-LAUs.html#cb26-15" aria-hidden="true" tabindex="-1"></a>                    <span class="at">label.fill =</span> <span class="cn">NA</span>) <span class="sc">+</span></span>
<span id="cb26-16"><a href="house-prices-LAUs.html#cb26-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;&quot;</span>,</span>
<span id="cb26-17"><a href="house-prices-LAUs.html#cb26-17" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">&quot;Population density [ppl/km2]&quot;</span>,</span>
<span id="cb26-18"><a href="house-prices-LAUs.html#cb26-18" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">&quot;2019 adjusted median values [kDKK/m2]&quot;</span>,</span>
<span id="cb26-19"><a href="house-prices-LAUs.html#cb26-19" aria-hidden="true" tabindex="-1"></a>       <span class="at">colour =</span> <span class="st">&quot;Municipality&quot;</span>,</span>
<span id="cb26-20"><a href="house-prices-LAUs.html#cb26-20" aria-hidden="true" tabindex="-1"></a>       <span class="at">shape =</span> <span class="st">&quot;Year&quot;</span>) <span class="sc">+</span></span>
<span id="cb26-21"><a href="house-prices-LAUs.html#cb26-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb26-22"><a href="house-prices-LAUs.html#cb26-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;bottom&quot;</span>) <span class="sc">+</span></span>
<span id="cb26-23"><a href="house-prices-LAUs.html#cb26-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">guides</span>(<span class="at">shape =</span> <span class="fu">guide_legend</span>(<span class="at">ncol =</span> <span class="dv">2</span>, <span class="at">title.position =</span> <span class="st">&quot;top&quot;</span>),</span>
<span id="cb26-24"><a href="house-prices-LAUs.html#cb26-24" aria-hidden="true" tabindex="-1"></a>         <span class="at">colour =</span> <span class="fu">guide_legend</span>(<span class="at">ncol =</span> <span class="dv">7</span>, <span class="at">title.position =</span> <span class="st">&quot;top&quot;</span>)) <span class="sc">+</span></span>
<span id="cb26-25"><a href="house-prices-LAUs.html#cb26-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">data =</span> dk_muni_prices,</span>
<span id="cb26-26"><a href="house-prices-LAUs.html#cb26-26" aria-hidden="true" tabindex="-1"></a>              <span class="fu">aes</span>(<span class="at">x =</span> pop_km2_Total,</span>
<span id="cb26-27"><a href="house-prices-LAUs.html#cb26-27" aria-hidden="true" tabindex="-1"></a>                  <span class="at">y =</span> median_2019_kDKK_m2),</span>
<span id="cb26-28"><a href="house-prices-LAUs.html#cb26-28" aria-hidden="true" tabindex="-1"></a>              <span class="at">method =</span> <span class="st">&quot;lm&quot;</span>, </span>
<span id="cb26-29"><a href="house-prices-LAUs.html#cb26-29" aria-hidden="true" tabindex="-1"></a>              <span class="at">se =</span> F,</span>
<span id="cb26-30"><a href="house-prices-LAUs.html#cb26-30" aria-hidden="true" tabindex="-1"></a>              <span class="at">colour =</span> <span class="st">&quot;blue&quot;</span>) </span></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:fig-prices-pop-a"></span>
<img src="Housing_prices_book_files/figure-html/fig-prices-pop-a-1.png" alt="Association between population density and median housing prices at municipality level" width="960" />
<p class="caption">
Figure 2.2: Association between population density and median housing prices at municipality level
</p>
</div>
<p>Plots variation over time (adjusted prices). NOTE: Zoom up to 80% change</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="house-prices-LAUs.html#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Short municipalities by total population density in 2008-Q1</span></span>
<span id="cb27-2"><a href="house-prices-LAUs.html#cb27-2" aria-hidden="true" tabindex="-1"></a>dk_muni_prices <span class="ot">&lt;-</span> dk_muni_prices <span class="sc">%&gt;%</span></span>
<span id="cb27-3"><a href="house-prices-LAUs.html#cb27-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">muni_name =</span> <span class="fu">fct_reorder2</span>(muni_name, year, pop_km2_Total,</span>
<span id="cb27-4"><a href="house-prices-LAUs.html#cb27-4" aria-hidden="true" tabindex="-1"></a>                                  <span class="at">.fun =</span> last2))</span>
<span id="cb27-5"><a href="house-prices-LAUs.html#cb27-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-6"><a href="house-prices-LAUs.html#cb27-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot</span></span>
<span id="cb27-7"><a href="house-prices-LAUs.html#cb27-7" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> dk_muni_prices,</span>
<span id="cb27-8"><a href="house-prices-LAUs.html#cb27-8" aria-hidden="true" tabindex="-1"></a>            <span class="fu">aes</span>(<span class="at">x =</span> year,</span>
<span id="cb27-9"><a href="house-prices-LAUs.html#cb27-9" aria-hidden="true" tabindex="-1"></a>                <span class="at">y =</span> median_2019_kDKK_m2_dif)) <span class="sc">+</span></span>
<span id="cb27-10"><a href="house-prices-LAUs.html#cb27-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb27-11"><a href="house-prices-LAUs.html#cb27-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">&quot;loess&quot;</span>,</span>
<span id="cb27-12"><a href="house-prices-LAUs.html#cb27-12" aria-hidden="true" tabindex="-1"></a>              <span class="at">span =</span> <span class="fl">0.75</span>,</span>
<span id="cb27-13"><a href="house-prices-LAUs.html#cb27-13" aria-hidden="true" tabindex="-1"></a>              <span class="at">se =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb27-14"><a href="house-prices-LAUs.html#cb27-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="dv">0</span>, <span class="at">linetype=</span><span class="st">&quot;dashed&quot;</span>, <span class="at">color =</span> <span class="st">&quot;grey&quot;</span>, <span class="at">size =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb27-15"><a href="house-prices-LAUs.html#cb27-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>muni_name, <span class="at">ncol =</span> <span class="dv">6</span>) <span class="sc">+</span></span>
<span id="cb27-16"><a href="house-prices-LAUs.html#cb27-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb27-17"><a href="house-prices-LAUs.html#cb27-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;bottom&quot;</span>,</span>
<span id="cb27-18"><a href="house-prices-LAUs.html#cb27-18" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.text =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">10</span>),</span>
<span id="cb27-19"><a href="house-prices-LAUs.html#cb27-19" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">14</span>),</span>
<span id="cb27-20"><a href="house-prices-LAUs.html#cb27-20" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.text =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">14</span>),</span>
<span id="cb27-21"><a href="house-prices-LAUs.html#cb27-21" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">14</span>, <span class="at">face =</span> <span class="st">&quot;bold&quot;</span>),</span>
<span id="cb27-22"><a href="house-prices-LAUs.html#cb27-22" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">14</span>, <span class="at">face =</span> <span class="st">&quot;bold&quot;</span>),</span>
<span id="cb27-23"><a href="house-prices-LAUs.html#cb27-23" aria-hidden="true" tabindex="-1"></a>        <span class="at">title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">14</span>)) <span class="sc">+</span></span>
<span id="cb27-24"><a href="house-prices-LAUs.html#cb27-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">name =</span> <span class="st">&quot;[%]&quot;</span>) <span class="sc">+</span></span>
<span id="cb27-25"><a href="house-prices-LAUs.html#cb27-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>(<span class="at">ylim =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="dv">80</span>, <span class="dv">80</span>)) <span class="sc">+</span></span>
<span id="cb27-26"><a href="house-prices-LAUs.html#cb27-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">name =</span> <span class="st">&quot;&quot;</span>,</span>
<span id="cb27-27"><a href="house-prices-LAUs.html#cb27-27" aria-hidden="true" tabindex="-1"></a>                     <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">2008</span>, <span class="dv">2019</span>, <span class="dv">3</span>))</span></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:fig-price-change-muni"></span>
<img src="Housing_prices_book_files/figure-html/fig-price-change-muni-1.png" alt="Adjusted median house price (kDKK/m2) change from 2008 (municipalities shorted by population density in 2019)" width="960" />
<p class="caption">
Figure 2.3: Adjusted median house price (kDKK/m2) change from 2008 (municipalities shorted by population density in 2019)
</p>
</div>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="house-prices-LAUs.html#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Big cities/urban areas</span></span>
<span id="cb28-2"><a href="house-prices-LAUs.html#cb28-2" aria-hidden="true" tabindex="-1"></a>  lbls <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;København&quot;</span>, <span class="st">&quot;Aarhus&quot;</span>, <span class="st">&quot;Odense&quot;</span>, <span class="st">&quot;Aalborg&quot;</span>, <span class="st">&quot;Frederiksberg&quot;</span>,</span>
<span id="cb28-3"><a href="house-prices-LAUs.html#cb28-3" aria-hidden="true" tabindex="-1"></a>            <span class="st">&quot;Tønder&quot;</span>, <span class="st">&quot;Læsø&quot;</span> )</span>
<span id="cb28-4"><a href="house-prices-LAUs.html#cb28-4" aria-hidden="true" tabindex="-1"></a>  dk_muni_prices_lbls <span class="ot">&lt;-</span> dk_muni_prices <span class="sc">%&gt;%</span> </span>
<span id="cb28-5"><a href="house-prices-LAUs.html#cb28-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(muni_name <span class="sc">%in%</span> lbls) </span>
<span id="cb28-6"><a href="house-prices-LAUs.html#cb28-6" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb28-7"><a href="house-prices-LAUs.html#cb28-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot</span></span>
<span id="cb28-8"><a href="house-prices-LAUs.html#cb28-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="at">data =</span> dk_muni_prices,</span>
<span id="cb28-9"><a href="house-prices-LAUs.html#cb28-9" aria-hidden="true" tabindex="-1"></a>         <span class="fu">aes</span>(<span class="at">x =</span> pop_km2_Total,</span>
<span id="cb28-10"><a href="house-prices-LAUs.html#cb28-10" aria-hidden="true" tabindex="-1"></a>             <span class="at">y =</span> median_2019_kDKK_m2)) <span class="sc">+</span></span>
<span id="cb28-11"><a href="house-prices-LAUs.html#cb28-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb28-12"><a href="house-prices-LAUs.html#cb28-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">&quot;lm&quot;</span>) <span class="sc">+</span></span>
<span id="cb28-13"><a href="house-prices-LAUs.html#cb28-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_x_log10</span>() <span class="sc">+</span></span>
<span id="cb28-14"><a href="house-prices-LAUs.html#cb28-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;&quot;</span>,</span>
<span id="cb28-15"><a href="house-prices-LAUs.html#cb28-15" aria-hidden="true" tabindex="-1"></a>         <span class="at">x =</span> <span class="st">&quot;Population density [ppl/km2]&quot;</span>,</span>
<span id="cb28-16"><a href="house-prices-LAUs.html#cb28-16" aria-hidden="true" tabindex="-1"></a>         <span class="at">y =</span> <span class="st">&quot;2019 adjusted median values [kDKK/m2]&quot;</span>) <span class="sc">+</span></span>
<span id="cb28-17"><a href="house-prices-LAUs.html#cb28-17" aria-hidden="true" tabindex="-1"></a>    ggrepel<span class="sc">::</span><span class="fu">geom_text_repel</span>(<span class="at">data =</span> dk_muni_prices_lbls, </span>
<span id="cb28-18"><a href="house-prices-LAUs.html#cb28-18" aria-hidden="true" tabindex="-1"></a>                             <span class="fu">aes</span>(<span class="at">label =</span> muni_name),</span>
<span id="cb28-19"><a href="house-prices-LAUs.html#cb28-19" aria-hidden="true" tabindex="-1"></a>                             <span class="at">nudge_y =</span> <span class="dv">20</span>,</span>
<span id="cb28-20"><a href="house-prices-LAUs.html#cb28-20" aria-hidden="true" tabindex="-1"></a>                             <span class="at">max.iter =</span> <span class="fl">3e3</span>) <span class="sc">+</span></span>
<span id="cb28-21"><a href="house-prices-LAUs.html#cb28-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">facet_wrap</span>(<span class="sc">~</span>year) <span class="sc">+</span></span>
<span id="cb28-22"><a href="house-prices-LAUs.html#cb28-22" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_bw</span>()</span></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:fig-prices-pop-b"></span>
<img src="Housing_prices_book_files/figure-html/fig-prices-pop-b-1.png" alt="Association between population density and median housing prices at municipality level" width="960" />
<p class="caption">
Figure 2.4: Association between population density and median housing prices at municipality level
</p>
</div>

</div>
<h3>References</h3>
<div id="refs" class="references csl-bib-body hanging-indent">
<div id="ref-Valtersdorf2020" class="csl-entry">
Valtersdorf Møller, Katrine. 2020. <span>“<span class="nocase">The influence of traffic noise on house prices</span>.”</span> Aalborg University. <a href="https://projekter.aau.dk/projekter/files/334368384/Thesis{\_}without{\_}appendix.pdf">https://projekter.aau.dk/projekter/files/334368384/Thesis{\_}without{\_}appendix.pdf</a>.
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="pop-growth.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="study-area.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": false,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": false
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/javiereliomedina/housing_prices_book/edit/master/011_2_house_prices_LAU.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
